"use strict";(self.webpackChunkjagruti_software=self.webpackChunkjagruti_software||[]).push([[5537],{3316:(e,s,n)=>{n.d(s,{A:()=>r});const r=[{name:"ADMIN",value:"ADMIN"},{name:"DOCTOR",value:"DOCTOR"},{name:"COUNSELLOR",value:"COUNSELLOR"},{name:"ACCOUNTANT",value:"ACCOUNTANT"},{name:"MANAGER",value:"MANAGER"},{name:"NURSE",value:"NURSE"},{name:"ONLINE SUPPORT ADMIN",value:"ONLINE_SUPPORT_ADMIN"}]},3655:(e,s,n)=>{n.d(s,{A:()=>m});var r=n(65043),l=n(65173),t=n.n(l),i=n(98139),o=n.n(i),a=n(96794),d=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function p(e,s){if(null==e)return{};var n,r,l=function(e,s){if(null==e)return{};var n,r,l={},t=Object.keys(e);for(r=0;r<t.length;r++)n=t[r],s.indexOf(n)>=0||(l[n]=e[n]);return l}(e,s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)n=t[r],s.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var u={bordered:t().bool,borderless:t().bool,className:t().string,cssModule:t().object,dark:t().bool,hover:t().bool,innerRef:t().oneOfType([t().func,t().string,t().object]),responsive:t().oneOfType([t().bool,t().string]),responsiveTag:a.Wx,size:t().string,striped:t().bool,tag:a.Wx};function x(e){var s=e.className,n=e.cssModule,l=e.size,t=e.bordered,i=e.borderless,u=e.striped,x=e.dark,m=e.hover,h=e.responsive,g=e.tag,f=void 0===g?"table":g,b=e.responsiveTag,v=void 0===b?"div":b,y=e.innerRef,j=p(e,d),C=(0,a.qO)(o()(s,"table",!!l&&"table-"+l,!!t&&"table-bordered",!!i&&"table-borderless",!!u&&"table-striped",!!x&&"table-dark",!!m&&"table-hover"),n),A=r.createElement(f,c({},j,{ref:y,className:C}));if(h){var w=(0,a.qO)(!0===h?"table-responsive":"table-responsive-".concat(h),n);return r.createElement(v,{className:w},A)}return A}x.propTypes=u;const m=x},24410:(e,s,n)=>{n.d(s,{A:()=>a});var r=n(65043),l=n(35475),t=n(12327),i=n(22345),o=n(70579);const a=e=>{let{title:s,pageTitle:n}=e;return(0,o.jsx)(r.Fragment,{children:(0,o.jsx)(t.A,{children:(0,o.jsx)(i.A,{xs:12,children:(0,o.jsxs)("div",{className:"page-title-box p-3 d-flex flex-column flex-sm-row align-items-start align-items-sm-center justify-content-between gap-2",children:[(0,o.jsx)("h4",{className:"mb-2 mb-sm-0",children:s}),(0,o.jsx)("div",{className:"page-title-right",children:(0,o.jsxs)("ol",{className:"breadcrumb m-0",children:[(0,o.jsx)("li",{className:"breadcrumb-item",children:(0,o.jsx)(l.N_,{to:"#",children:n})}),(0,o.jsx)("li",{className:"breadcrumb-item active",children:s})]})})]})})})})}},95537:(e,s,n)=>{n.r(s),n.d(s,{default:()=>pe});var r=n(65043),l=n(73216),t=n(22166),i=n(87426),o=n(12327),a=n(22345),d=n(72679),c=n(3655),p=n(26259),u=n(25601),x=n(91036),m=n(45627),h=n(52336),g=n(52969),f=n(70579);const b=()=>{const{id:e}=(0,l.g)(),s=((0,t.wA)(),(0,l.Zp)()),n=localStorage.getItem("micrologin"),b=n?JSON.parse(n).token:null,[v,y]=(0,r.useState)(!1),[j,C]=(0,r.useState)([]),[A,w]=(0,r.useState)(1),[N,k]=(0,r.useState)(1),[S,R]=(0,r.useState)(10),[O,P]=(0,r.useState)(0),{loading:T,hasPermission:z}=(0,h.S)(b),M=z("USER",null,"READ"),D=(0,g.m)();(0,r.useEffect)(()=>{if(!b||!M)return;(async()=>{try{var s,n,r,l;y(!0);const t=await(0,u.h0K)({id:e,page:A,limit:S,token:b});C(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.data),k((null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.totalPages)||1),P(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.total),w(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.page)}catch(t){D(t)||x.oR.error("Failed to fetch user activity.")}finally{y(!1)}})()},[A,b,e,s,S,M]);const E=e=>{w(e)};return T?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,f.jsx)(i.A,{color:"primary",className:"d-block",style:{width:"3rem",height:"3rem"}})}):M?(0,f.jsx)(r.Fragment,{children:(0,f.jsxs)("div",{className:"p-4 bg-light rounded shadow-sm",children:[(0,f.jsxs)(o.A,{className:"mb-3 align-items-center",children:[(0,f.jsx)(a.A,{xs:"auto",children:(0,f.jsx)(d.A,{type:"select",value:S,className:"",onChange:e=>{return s=Number(e.target.value),R(s),void w(1);var s},style:{width:"120px"},children:[10,20,30,50].map(e=>(0,f.jsx)("option",{value:e,children:e},e))})}),(0,f.jsxs)(a.A,{className:"text-end text-muted",children:["Page ",A," of ",N]})]}),(0,f.jsxs)(c.A,{bordered:!0,hover:!0,className:"bg-white",children:[(0,f.jsx)("thead",{className:"table-primary text-center",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"Time"}),(0,f.jsx)("th",{children:"Action"}),(0,f.jsx)("th",{children:"Actor"}),(0,f.jsx)("th",{children:"Target"}),(0,f.jsx)("th",{children:"Target Email"}),(0,f.jsx)("th",{children:"Target Role"}),(0,f.jsx)("th",{children:"Model"})]})}),(0,f.jsx)("tbody",{children:v?(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:"10",className:"text-center py-4",children:(0,f.jsx)("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",style:{width:"1rem",height:"1rem"},children:(0,f.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):j&&Array.isArray(j)&&j.length>0?j.map(e=>{var s,n,r,l;return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"fw-semibold text-primary text-center",children:(0,m.A)(new Date(null===e||void 0===e?void 0:e.updatedAt),"dd MMM, yyyy hh:mm a")}),(0,f.jsx)("td",{className:"text-capitalize text-center",children:(null===e||void 0===e?void 0:e.task)||"-"}),(0,f.jsx)("td",{className:"text-center",children:(null===e||void 0===e||null===(s=e.userid)||void 0===s?void 0:s.name)||"-"}),(0,f.jsx)("td",{className:"text-center",children:(null===e||void 0===e||null===(n=e.targetId)||void 0===n?void 0:n.name)||"-"}),(0,f.jsx)("td",{className:"text-center",children:(null===e||void 0===e||null===(r=e.targetId)||void 0===r?void 0:r.email)||"-"}),(0,f.jsx)("td",{className:"text-capitalize text-center",children:(null===e||void 0===e||null===(l=e.targetId)||void 0===l?void 0:l.role)||"-"}),(0,f.jsx)("td",{className:"text-center",children:(null===e||void 0===e?void 0:e.targetModel)||"-"})]},e._id)}):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:"10",className:"text-center text-muted py-4",children:"No activity found"})})})]}),N>0&&(0,f.jsxs)(o.A,{className:"mt-4 justify-content-between align-items-center",children:[(0,f.jsx)(a.A,{xs:"auto",children:(0,f.jsx)(p.A,{color:"secondary",disabled:1===A,onClick:()=>E(A-1),children:"\u2190 Previous"})}),(0,f.jsxs)(a.A,{className:"text-center text-muted",children:["Showing"," ",Math.min((A-1)*S+1,O),"\u2013",Math.min(A*S,O)," of ",O]}),(0,f.jsx)(a.A,{xs:"auto",children:(0,f.jsx)(p.A,{color:"secondary",disabled:A===N,onClick:()=>E(A+1),children:"Next \u2192"})})]})]})}):(s("/unauthorized"),null)};var v=n(89379),y=n(89804),j=n(49157),C=n(18353),A=n(49935),w=n(62739),N=n(85873),k=n(81349),S=n(35475),R=n(16854),O=n.n(R),P=n(82485),T=(n(9686),n(58168)),z=n(64122),M=n(9817),D=n(60436),E=n(80045),F=n(72234),U=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],I=function(){var e=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,n=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),r=String(s.getOptionValue(e)).toLowerCase(),l=String(s.getOptionLabel(e)).toLowerCase();return r===n||l===n},L={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,s,n,r){return!(!e||s.some(function(s){return I(e,s,r)})||n.some(function(s){return I(e,s,r)}))},getNewOptionData:function(e,s){return{label:s,value:e,__isNew__:!0}}};n(97950),n(11322);var W=(0,r.forwardRef)(function(e,s){var n=function(e){var s=e.allowCreateWhileLoading,n=void 0!==s&&s,l=e.createOptionPosition,t=void 0===l?"last":l,i=e.formatCreateLabel,o=void 0===i?L.formatCreateLabel:i,a=e.isValidNewOption,d=void 0===a?L.isValidNewOption:a,c=e.getNewOptionData,p=void 0===c?L.getNewOptionData:c,u=e.onCreateOption,x=e.options,m=void 0===x?[]:x,h=e.onChange,g=(0,E.A)(e,U),f=g.getOptionValue,b=void 0===f?z.g:f,y=g.getOptionLabel,j=void 0===y?z.b:y,C=g.inputValue,A=g.isLoading,w=g.isMulti,N=g.value,k=g.name,S=(0,r.useMemo)(function(){return d(C,(0,F.H)(N),m,{getOptionValue:b,getOptionLabel:j})?p(C,o(C)):void 0},[o,p,j,b,C,d,m,N]),R=(0,r.useMemo)(function(){return!n&&A||!S?m:"first"===t?[S].concat((0,D.A)(m)):[].concat((0,D.A)(m),[S])},[n,t,A,S,m]),O=(0,r.useCallback)(function(e,s){if("select-option"!==s.action)return h(e,s);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==S)h(e,s);else if(u)u(C);else{var r=p(C,C),l={action:"create-option",name:k,option:r};h((0,F.D)(w,[].concat((0,D.A)((0,F.H)(N)),[r]),r),l)}},[p,C,w,k,S,u,h,N]);return(0,v.A)((0,v.A)({},g),{},{options:R,onChange:O})}((0,M.u)(e));return r.createElement(z.S,(0,T.A)({ref:s},n))}),_=n(80899),B=n(86897),V=n(98093),q=n(3316),Y=n(94983),H=n(91364);const J=e=>{const[s,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const s=window.matchMedia(e),r=()=>n(s.matches);return n(s.matches),s.addListener(r),()=>s.removeListener(r)},[e]),s};var Q=n(78639),G=n(73705);n(65016);const K=e=>{var s,n,l,i,o,a,d,c,p,m,h;let{isOpen:b,toggleForm:y,userData:j,setUserData:C,hasUserPermission:A}=e;const w=J("(max-width: 640px)"),N=J("(min-width: 641px) and (max-width: 1023px)"),k=(0,t.wA)(),S=(0,r.useRef)(null),R=(0,r.useRef)(null),O=(0,t.d4)(e=>e.User.user),T=(0,t.d4)(e=>e.Center.allCenters),z=localStorage.getItem("micrologin"),M=z?JSON.parse(z).token:null,D=(0,t.d4)(e=>e.User.loading),[E,F]=(0,r.useState)(null!==j&&void 0!==j&&null!==(s=j.faqs)&&void 0!==s&&s.length?j.faqs:[]),[U,I]=(0,r.useState)(null),[L,K]=(0,r.useState)(null!==j&&void 0!==j&&j.signature?{dataURI:j.signature}:null),[X,Z]=(0,r.useState)(null),[$,ee]=(0,r.useState)(null!==j&&void 0!==j&&j.profilePicture?{dataURI:j.profilePicture}:null),[se,ne]=(0,r.useState)([]),[re,le]=(0,r.useState)([]),[te,ie]=(0,r.useState)([]),[oe,ae]=(0,r.useState)(!1),[de,ce]=(0,r.useState)([]),[pe,ue]=(0,r.useState)([]),xe=(0,g.m)();(0,r.useEffect)(()=>{(async()=>{if(M&&A)try{ae(!0);const e=await(0,u.BbW)({token:M,search:pe});ce((null===e||void 0===e?void 0:e.data)||[])}catch(e){xe(e)||x.oR.error("Failed to fetch access roles.")}finally{ae(!1)}})()},[M]);(0,r.useEffect)(()=>{var e,s,n;F((null===j||void 0===j?void 0:j.faqs)||[]),ne((null===j||void 0===j||null===(e=j.patientsConcern)||void 0===e?void 0:e.map(e=>({label:e,value:e})))||[]),le((null===j||void 0===j||null===(s=j.expertise)||void 0===s?void 0:s.map(e=>({label:e,value:e})))||[]),ie((null===j||void 0===j||null===(n=j.languages)||void 0===n?void 0:n.map(e=>({label:e,value:e})))||[]),ee(null!==j&&void 0!==j&&j.profilePicture?{dataURI:j.profilePicture}:null),K(null!==j&&void 0!==j&&j.signature?{dataURI:j.signature}:null),I(null),Z(null)},[j]);const me=(0,B.Wx)({enableReinitialize:!0,initialValues:{authorId:(null===O||void 0===O?void 0:O._id)||"",name:j?j.name:"",email:j?j.email:"",accessroles:(null===j||void 0===j||null===(n=j.accessroles)||void 0===n?void 0:n._id)||"",role:j?j.role:"",phoneNumber:j?j.phoneNumber:"",degrees:null!==j&&void 0!==j&&j.education?null===(l=j.education)||void 0===l?void 0:l.degrees:(null===j||void 0===j?void 0:j.degrees)||"",speciality:null!==j&&void 0!==j&&j.education?null===(i=j.education)||void 0===i?void 0:i.speciality:(null===j||void 0===j?void 0:j.speciality)||"",registrationNo:null!==j&&void 0!==j&&j.education?null===(o=j.education)||void 0===o?void 0:o.registrationNo:(null===j||void 0===j?void 0:j.registrationNo)||"",centerAccess:null!==j&&void 0!==j&&j.centerAccess?j.centerAccess.map(e=>e._id):[],pageAccess:j?null===(a=j.pageAccess)||void 0===a?void 0:a.pages:[],confirm_password:"",password:"",patientsConcern:j?null===j||void 0===j||null===(d=j.patientsConcern)||void 0===d?void 0:d.map(e=>({label:e,value:e})):[],languages:j?null===j||void 0===j||null===(c=j.languages)||void 0===c?void 0:c.map(e=>({label:e,value:e})):[],bio:j?null===j||void 0===j?void 0:j.bio:"",experience:j?null===j||void 0===j?void 0:j.experience:"",expertise:j?null===j||void 0===j||null===(p=j.expertise)||void 0===p?void 0:p.map(e=>({label:e,value:e})):[],availabilityMode:j?null===j||void 0===j?void 0:j.availabilityMode:[]},validationSchema:_.Ik((0,v.A)((0,v.A)((0,v.A)({email:_.Yj().required("Please Enter Your Email"),name:_.Yj().required("Please Enter Your Username")},!j&&{password:_.Yj().required("Please Enter Your Password")}),!j&&{confirm_password:_.Yj().oneOf([_.KR("password")],"Confirm Password Doesn't Match")}),{},{phoneNumber:_.Yj().required("Please Enter Phone Number").test("is-valid-phone","Invalid phone number",function(e){return(0,G.g0)(e||"")}),centerAccess:_.YO().test("notEmpty","Center Access is required",e=>!(!e||0===e.length)),accessroles:_.Yj().required("Access Role is required"),pageAccess:_.YO().test("notEmpty","Pages Access is required",e=>!(!e||0===e.length)),role:_.Yj().required("Please Select User Role")})),onSubmit:async e=>{const s=new FormData;if(s.append("authorId",e.authorId),s.append("name",e.name),s.append("email",e.email),s.append("accessroles",e.accessroles),s.append("role",e.role),s.append("phoneNumber",e.phoneNumber),s.append("degrees",e.degrees),s.append("speciality",e.speciality),s.append("registrationNo",e.registrationNo),s.append("centerAccess",e.centerAccess.join(",")),s.append("pageAccess",JSON.stringify(e.pageAccess)),s.append("password",e.password),s.append("bio",e.bio),null!==re&&void 0!==re&&re.length&&s.append("expertise",JSON.stringify(null===re||void 0===re?void 0:re.map(e=>e.value))),s.append("availabilityMode",e.availabilityMode),s.append("experience",e.experience),null!==se&&void 0!==se&&se.length&&s.append("patientsConcern",JSON.stringify(null===se||void 0===se?void 0:se.map(e=>e.value))),null!==te&&void 0!==te&&te.length&&s.append("languages",JSON.stringify(null===te||void 0===te?void 0:te.map(e=>e.value))),null!==E&&void 0!==E&&E.length&&s.append("faqs",JSON.stringify(E)),null!==L&&void 0!==L&&L.file&&s.append("signature",L.file),null!==$&&void 0!==$&&$.file&&s.append("profilePicture",$.file),j){var n,r,l;s.append("pageAccessId",null===(n=j.pageAccess)||void 0===n?void 0:n._id),null!==(r=j.education)&&void 0!==r&&r._id&&s.append("educationId",null===(l=j.education)||void 0===l?void 0:l._id),s.append("id",j._id);try{await k((0,V.TKu)({data:s,id:j._id,token:M})).unwrap(),C(null)}catch(t){xe(t)||x.oR.error(t.message||"Failed to update user.")}}else try{await k((0,H.H9)({data:s,token:M})).unwrap()}catch(t){xe(t)||x.oR.error(t.message||"Failed to add new user.")}}}),he=[{label:"Name",name:"name",type:"text",placeholder:"Enter full name"},{label:"Email",name:"email",type:"email",placeholder:"Enter email address"},{label:"Acccess Role",name:"accessroles",type:"select",options:de,placeholder:"Select Access role"},{label:"Role",name:"role",type:"select",options:q.A,placeholder:"Select role"},{label:"Phone number",name:"phoneNumber",type:"phoneNumber",handleChange:e=>me.handleChange(e)},!j&&{label:"Password",name:"password",type:"password",placeholder:"Enter password"},!j&&{label:"Confirm Password",name:"confirm_password",type:"password",placeholder:"Confirm password"},{label:"Availability Mode",name:"availabilityMode",type:"checkbox",value:"_id",options:[{_id:"in-person",title:"In-Person"},{_id:"virtual",title:"Video"}],check:(e,s)=>{var n;return null===(n=me.values[e.name])||void 0===n?void 0:n.includes(null===s||void 0===s?void 0:s._id)}},{name:"hidden_input"},{label:"Page Access",name:"pageAccess",type:"checkbox",value:"label",options:Y.Ay,check:(e,s)=>{var n;return null===(n=me.values[e.name])||void 0===n?void 0:n.find(e=>e.name===s.name)},subCheck:(e,s,n)=>{var r;const l=null===(r=me.values[e])||void 0===r?void 0:r.find(e=>e.name===s);return l&&Array.isArray(l.subAccess)&&l.subAccess.some(e=>e.name===n)},checkPermission:(e,s,n)=>{var r;return!!(null===(r=me.values.pageAccess)||void 0===r?void 0:r.find(r=>{var l,t;return n?r.name===e&&(null===(l=r.subAccess)||void 0===l||null===(t=l.find(e=>e.name===n))||void 0===t?void 0:t.permissions[s]):r.name===e&&r.permissions[s]}))},handleChange:(e,s,n,r)=>fe(e,s,n,r)}],ge=()=>{y(),C(null),K(null),I(null),ee(null),Z(null),me.resetForm()},fe=(e,s,n,r)=>{const l=me.values.pageAccess||[];let t=[];if(r)t=l.map(e=>{if(n.name===e.name){const s=Array.isArray(e.subAccess)?e.subAccess:[];return s.some(e=>e.name===r.name)?(0,v.A)((0,v.A)({},e),{},{subAccess:s.filter(e=>e.name!==r.name)}):(0,v.A)((0,v.A)({},e),{},{subAccess:[...s,(0,v.A)((0,v.A)({},r),{},{permissions:(0,v.A)({},r.permissions)})]})}return e});else{t=l.some(e=>e.name===n.name)?l.filter(e=>e.name!==n.name):[...l,(0,v.A)((0,v.A)({},n),{},{permissions:(0,v.A)({},n.permissions),subAccess:(n.children,[])})]}me.setFieldValue("pageAccess",t)},be=(e,s,n)=>{let r=[...me.values.pageAccess];r=n?r.map(r=>e.name===r.name?(0,v.A)((0,v.A)({},r),{},{subAccess:r.subAccess.map(e=>e.name===n.name?(0,v.A)((0,v.A)({},e),{},{permissions:(0,v.A)((0,v.A)({},e.permissions),{},{[s]:!e.permissions[s]})}):e)}):r):r.map(n=>e.name===n.name?(0,v.A)((0,v.A)({},n),{},{permissions:(0,v.A)((0,v.A)({},n.permissions),{},{[s]:!n.permissions[s]})}):n),me.setFieldValue("pageAccess",r)},ve=e=>{const s=e.target.files||e.dataTransfer.files,n=new FileReader;n.onload=()=>I(n.result),n.readAsDataURL(s[0])},ye=(e,s)=>{const{name:n,value:r}=s.target,l=[...E];l[e][n]=r,F(l)};return(0,f.jsx)("div",{style:{display:b?"flex":"none",position:"fixed",top:50,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",zIndex:1e3,transition:"opacity 0.3s ease",opacity:b?1:0},children:(0,f.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)",width:"100%",maxWidth:"1200px",maxHeight:"80vh",overflowY:"auto",padding:"48px"},children:[(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[(0,f.jsx)("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1f2937"},children:j?"Edit User":"Add New User"}),(0,f.jsx)("button",{onClick:ge,style:{background:"none",border:"none",cursor:"pointer",padding:"8px"},children:(0,f.jsx)("svg",{style:{width:"28px",height:"28px",color:"#6b7280"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,f.jsxs)("form",{onSubmit:me.handleSubmit,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)("img",{src:(null===j||void 0===j||null===(m=j.profilePicture)||void 0===m?void 0:m.url)||(null===$||void 0===$?void 0:$.dataURI)||"https://skala.or.id/wp-content/uploads/2024/01/dummy-post-square-1-1.jpg",alt:"Profile",style:{width:"140px",height:"140px",borderRadius:"50%",objectFit:"cover",border:"3px solid #e5e7eb"}}),(0,f.jsx)("label",{htmlFor:"profilePicInput",style:{position:"absolute",bottom:"0",right:"0",backgroundColor:"#3b82f6",color:"#ffffff",borderRadius:"50%",padding:"10px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2563eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3b82f6",children:(0,f.jsxs)("svg",{style:{width:"22px",height:"22px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,f.jsx)("input",{id:"profilePicInput",type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{const s=e.target.files,n=new FileReader;n.onload=()=>Z(n.result),n.readAsDataURL(s[0])}})]})}),(U||X)&&(0,f.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,f.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"32px",maxWidth:"600px",width:"100%"},children:[(0,f.jsx)("h3",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"#1f2937"},children:U?"Crop Signature":"Crop Profile Picture"}),(0,f.jsx)(P.A,{ref:U?S:R,src:U||X,style:{height:"350px",width:"100%"},initialAspectRatio:1,viewMode:1,minCropBoxHeight:100,minCropBoxWidth:100,dragMode:"move",cropBoxMovable:!1,cropBoxResizable:!1,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0}),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"16px",marginTop:"20px"},children:[(0,f.jsx)("button",{type:"button",style:{padding:"10px 20px",backgroundColor:"#e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#d1d5db",onMouseOut:e=>e.currentTarget.style.backgroundColor="#e5e7eb",onClick:()=>U?I(null):Z(null),children:"Cancel"}),(0,f.jsx)("button",{type:"button",style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"#ffffff",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2563eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3b82f6",onClick:()=>(async e=>{var s;const n="profile"===e?R:S;if(null!==(s=n.current)&&void 0!==s&&s.cropper){const s=n.current.cropper.getCroppedCanvas().toDataURL(),r=await fetch(s).then(e=>e.blob()),l=new File([r],"".concat(e,".jpg"),{type:"image/jpeg",lastModified:new Date});"profile"===e?(ee({file:l,dataURI:s}),Z(null)):(K({file:l,dataURI:s}),I(null))}})(U?"signature":"profile"),children:"Crop"})]})]})}),(0,f.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px"},children:he.filter(Boolean).filter(e=>"pageAccess"!==e.name).map((e,s)=>(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:e.label}),"phoneNumber"===e.name?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(G.Ay,{placeholder:"Enter phone number",name:e.name,value:me.values[e.name],onBlur:me.handleBlur,onChange:s=>e.handleChange({target:{name:e.name,value:s}}),limitMaxLength:!0,defaultCountry:"IN",className:"w-100",style:{width:"100%",height:"42px",padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})}):"select"===e.type?(0,f.jsxs)("select",{name:e.name,style:{padding:"10px",border:"1px solid ".concat(me.touched[e.name]&&me.errors[e.name]?"#ef4444":"#d1d5db"),borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:s=>{s.target.style.border="1px solid ".concat(me.touched[e.name]&&me.errors[e.name]?"#ef4444":"#d1d5db"),me.handleBlur(s)},onChange:me.handleChange,value:me.values[e.name]||"",children:[(0,f.jsx)("option",{value:"",disabled:!0,children:e.placeholder}),e.options.map((e,s)=>(0,f.jsx)("option",{value:"object"===typeof e?e._id:e,children:"object"===typeof e?e.name:e},s))]}):"checkbox"===e.type&&"availabilityMode"===e.name?(0,f.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[e.options.map((s,n)=>{var r;return(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:s[e.value],checked:e.check(e,s),onChange:n=>e.handleChange?e.handleChange(n,e,s):me.handleChange(n),style:{marginRight:"10px",width:"18px",height:"18px"}}),(0,f.jsx)("label",{style:{fontSize:"15px",color:"#374151"},children:s.title||s.label})]}),e.check(e,s)&&s.permissions&&(0,f.jsx)("div",{style:{marginLeft:"30px",display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(s.permissions).map(n=>{let[r,l]=n;return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:r,checked:e.checkPermission(s.name,r),onChange:()=>be(s,r),style:{marginRight:"10px",width:"18px",height:"18px"}}),(0,f.jsx)("label",{style:{fontSize:"15px",color:"#374151",textTransform:"capitalize"},children:r})]},r)})}),e.check(e,s)&&(null===(r=s.children)||void 0===r?void 0:r.map((n,r)=>(0,f.jsxs)("div",{style:{marginLeft:"30px",display:"flex",flexDirection:"column",gap:"12px"},children:[(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:n.name,checked:e.subCheck(e.name,s.name,n.name),disabled:!e.check(e,s),onChange:r=>e.handleChange(r,e,s,n),style:{marginRight:"10px",width:"18px",height:"18px"}}),(0,f.jsx)("label",{style:{fontSize:"15px",color:"#374151"},children:n.name})]}),e.subCheck(e.name,s.name,n.name)&&n.permissions&&(0,f.jsx)("div",{style:{marginLeft:"30px",display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(n.permissions).map(r=>{let[l,t]=r;return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:l,checked:e.checkPermission(s.name,l,n.name),onChange:()=>be(s,l,n),style:{marginRight:"10px",width:"18px",height:"18px"}}),(0,f.jsx)("label",{style:{fontSize:"15px",color:"#374151",textTransform:"capitalize"},children:l})]},l)})})]},r)))]},n)}),me.touched[e.name]&&me.errors[e.name]&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px",gridColumn:"1 / -1"},children:me.errors[e.name]})]}):"hidden_input"===e.name?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("label",{style:{display:"hidden"}}),(0,f.jsx)("input",{type:"hidden",name:e.name})]}):(0,f.jsx)("input",{type:e.type,name:e.name,placeholder:e.placeholder,autoComplete:"password"===e.type?"new-password":"off",style:{padding:"10px",border:"1px solid ".concat(me.touched[e.name]&&me.errors[e.name]?"#ef4444":"#d1d5db"),borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",textTransform:"name"===e.name?"capitalize":"none",transition:"border-color 0.2s",backgroundColor:"#ffffff"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:s=>{s.target.style.border="1px solid ".concat(me.touched[e.name]&&me.errors[e.name]?"#ef4444":"#d1d5db"),me.handleBlur(s)},onChange:me.handleChange,value:me.values[e.name]||""}),me.touched[e.name]&&me.errors[e.name]&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px"},children:me.errors[e.name]})]},s))}),he.find(e=>"pageAccess"===e.name)&&(0,f.jsx)("div",{style:{marginTop:"30px"},children:(()=>{const e=he.find(e=>"pageAccess"===e.name);return(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:e.label}),(0,f.jsxs)("div",{style:{display:"grid",gridTemplateColumns:w?"1fr":N?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:"20px",width:"100%"},children:[e.options.map((s,n)=>(0,f.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.05)",display:"flex",flexDirection:"column",gap:"16px",border:"1px solid #e5e7eb"},children:[(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:s[e.value],checked:e.check(e,s),onChange:n=>e.handleChange?e.handleChange(n,e,s):me.handleChange(n),style:{marginRight:"12px",width:"18px",height:"18px",cursor:"pointer"}}),(0,f.jsx)("label",{style:{fontSize:"16px",color:"#111827",fontWeight:600,cursor:"pointer"},children:s.title||s.label})]}),e.check(e,s)&&s.permissions&&(0,f.jsx)("div",{style:{marginLeft:"24px",display:"flex",flexWrap:w?"wrap":"nowrap",gap:"20px",overflowX:w?"visible":"auto"},children:Object.entries(s.permissions).map(n=>{let[r,l]=n;return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",flexShrink:0},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:r,checked:e.checkPermission(s.name,r),onChange:()=>be(s,r),style:{marginRight:"10px",width:"16px",height:"16px",cursor:"pointer"}}),(0,f.jsx)("label",{style:{fontSize:"15px",color:"#4b5563",textTransform:"capitalize"},children:r})]},r)})}),e.check(e,s)&&s.children&&(0,f.jsx)("div",{style:{display:"grid",gridTemplateColumns:w?"1fr":"1fr 1fr",gap:"16px",marginTop:"10px"},children:s.children.map((n,r)=>(0,f.jsxs)("div",{style:{background:"#f3f4f6",borderRadius:"8px",padding:"12px",border:"1px solid #e5e7eb",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:n.name,checked:e.subCheck(e.name,s.name,n.name),disabled:!e.check(e,s),onChange:r=>e.handleChange(r,e,s,n),style:{marginRight:"10px",width:"16px",height:"16px",cursor:e.check(e,s)?"pointer":"not-allowed"}}),(0,f.jsx)("label",{style:{fontSize:"15px",color:"#1f2937",fontWeight:500},children:n.name})]}),e.subCheck(e.name,s.name,n.name)&&n.permissions&&(0,f.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"8px",marginLeft:"10px"},children:Object.entries(n.permissions).map(r=>{let[l,t]=r;return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:e.name,value:l,checked:e.checkPermission(s.name,l,n.name),onChange:()=>be(s,l,n),style:{marginRight:"10px",width:"16px",height:"16px",cursor:"pointer"}}),(0,f.jsx)("label",{style:{fontSize:"14px",color:"#6b7280",textTransform:"capitalize"},children:l})]},l)})})]},r))})]},n)),me.touched[e.name]&&me.errors[e.name]&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px",gridColumn:"1 / -1"},children:me.errors[e.name]})]})]})})()}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Center Access"}),(0,f.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[null===T||void 0===T?void 0:T.map((e,s)=>{var n;return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("input",{type:"checkbox",name:"centerAccess",value:e._id,checked:null===(n=me.values.centerAccess)||void 0===n?void 0:n.includes(e._id),onChange:me.handleChange,style:{marginRight:"10px",width:"18px",height:"18px"}}),(0,f.jsx)("label",{style:{fontSize:"15px",color:"#374151"},children:e.title})]},s)}),me.touched.centerAccess&&me.errors.centerAccess&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px",gridColumn:"1 / -1"},children:me.errors.centerAccess})]})]}),("DOCTOR"===me.values.role||"COUNSELLOR"===me.values.role)&&(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Signature"}),L?(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[(0,f.jsx)("img",{src:L.dataURI,alt:"Edited Signature",style:{maxWidth:"250px",height:"auto",border:"1px solid #e5e7eb",borderRadius:"4px",padding:"4px",backgroundColor:"#f9fafb"}}),(0,f.jsx)("button",{type:"button",style:{padding:"10px 20px",backgroundColor:"#ef4444",color:"#ffffff",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#dc2626",onMouseOut:e=>e.currentTarget.style.backgroundColor="#ef4444",onClick:()=>K(null),children:"Clear Signature"})]}):null!==j&&void 0!==j&&null!==(h=j.signature)&&void 0!==h&&h.url?(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[(0,f.jsx)("img",{src:j.signature,alt:"Current Signature",style:{maxWidth:"250px",height:"auto",border:"1px solid #e5e7eb",borderRadius:"4px",padding:"4px",backgroundColor:"#f9fafb"}}),(0,f.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,f.jsx)("button",{type:"button",style:{padding:"10px 20px",backgroundColor:"#ef4444",color:"#ffffff",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#dc2626",onMouseOut:e=>e.currentTarget.style.backgroundColor="#ef4444",onClick:()=>{K(null),me.setFieldValue("signature","")},children:"Remove"}),(0,f.jsx)("label",{htmlFor:"signatureInput",style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"#ffffff",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2563eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3b82f6",children:"Change"}),(0,f.jsx)("input",{id:"signatureInput",type:"file",accept:"image/*",style:{display:"none"},onChange:ve})]})]}):(0,f.jsxs)("div",{children:[(0,f.jsx)("input",{type:"file",accept:"image/*",style:{padding:"10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>e.target.style.border="1px solid #d1d5db",onChange:ve}),(0,f.jsx)("p",{style:{fontSize:"13px",color:"#6b7280",marginTop:"8px"},children:"Upload a clear signature image (PNG format recommended)"})]})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Patient Concerns"}),(0,f.jsx)(W,{isMulti:!0,name:"patientsConcern",options:se,classNamePrefix:"react-select",onChange:e=>{ne(e||[]),me.setFieldValue("patientsConcern",e)},onCreateOption:e=>{const s={value:e.toLowerCase(),label:e};ne(e=>[...e,s]),me.setFieldValue("patientsConcern",[...me.values.patientsConcern||[],s])},value:me.values.patientsConcern||[]}),me.touched.patientsConcern&&me.errors.patientsConcern&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px"},children:me.errors.patientsConcern})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Degrees"}),(0,f.jsx)("input",{type:"text",name:"degrees",placeholder:"Enter degrees",style:{padding:"10px",border:"1px solid ".concat(me.touched.degrees&&me.errors.degrees?"#ef4444":"#d1d5db"),borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>{e.target.style.border="1px solid ".concat(me.touched.degrees&&me.errors.degrees?"#ef4444":"#d1d5db"),me.handleBlur(e)},onChange:me.handleChange,value:me.values.degrees||""}),me.touched.degrees&&me.errors.degrees&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px"},children:me.errors.degrees})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Languages Spoken"}),(0,f.jsx)(W,{isMulti:!0,name:"languages",options:te,classNamePrefix:"react-select",onChange:e=>{ie(e||[]),me.setFieldValue("languages",e)},onCreateOption:e=>{const s={value:e.toLowerCase(),label:e};ie(e=>[...e,s]),me.setFieldValue("languages",[...me.values.languages||[],s])},value:me.values.languages||[]}),me.touched.languages&&me.errors.languages&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px"},children:me.errors.languages})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Speciality"}),(0,f.jsx)("input",{type:"text",name:"speciality",placeholder:"Enter speciality",style:{padding:"10px",border:"1px solid ".concat(me.touched.speciality&&me.errors.speciality?"#ef4444":"#d1d5db"),borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>{e.target.style.border="1px solid ".concat(me.touched.speciality&&me.errors.speciality?"#ef4444":"#d1d5db"),me.handleBlur(e)},onChange:me.handleChange,value:me.values.speciality||""}),me.touched.speciality&&me.errors.speciality&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px"},children:me.errors.speciality})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Registration Number"}),(0,f.jsx)("input",{type:"text",name:"registrationNo",placeholder:"Enter registration number",style:{padding:"10px",border:"1px solid ".concat(me.touched.registrationNo&&me.errors.registrationNo?"#ef4444":"#d1d5db"),borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>{e.target.style.border="1px solid ".concat(me.touched.registrationNo&&me.errors.registrationNo?"#ef4444":"#d1d5db"),me.handleBlur(e)},onChange:me.handleChange,value:me.values.registrationNo||""}),me.touched.registrationNo&&me.errors.registrationNo&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px"},children:me.errors.registrationNo})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Bio"}),(0,f.jsx)("textarea",{name:"bio",placeholder:"Enter bio",style:{padding:"10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",minHeight:"120px",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>{e.target.style.border="1px solid #d1d5db",me.handleBlur(e)},onChange:me.handleChange,value:me.values.bio||""})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Expertise"}),(0,f.jsx)(W,{isMulti:!0,name:"expertise",options:re,classNamePrefix:"react-select",onChange:e=>{le(e||[]),me.setFieldValue("expertise",e)},onCreateOption:e=>{const s={value:e.toLowerCase(),label:e};le(e=>[...e,s]),me.setFieldValue("expertise",[...me.values.expertise||[],s])},value:me.values.expertise||[]}),me.touched.expertise&&me.errors.expertise&&(0,f.jsx)("p",{style:{color:"#ef4444",fontSize:"13px",marginTop:"6px"},children:me.errors.expertise})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Years of Experience"}),(0,f.jsx)("input",{type:"text",name:"experience",placeholder:"Enter years of experience",style:{padding:"10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>{e.target.style.border="1px solid #d1d5db",me.handleBlur(e)},onChange:me.handleChange,value:me.values.experience||""})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"FAQs"}),E.map((e,s)=>(0,f.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px",marginBottom:"20px"},children:[(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Question"}),(0,f.jsx)("input",{type:"text",name:"question",placeholder:"Enter question",style:{padding:"10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>e.target.style.border="1px solid #d1d5db",onChange:e=>ye(s,e),value:e.question||""})]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("label",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Answer"}),(0,f.jsx)("textarea",{name:"answer",placeholder:"Enter answer",style:{padding:"10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"15px",outline:"none",width:"100%",minHeight:"100px",backgroundColor:"#ffffff",transition:"border-color 0.2s"},onFocus:e=>e.target.style.border="1px solid #3b82f6",onBlur:e=>e.target.style.border="1px solid #d1d5db",onChange:e=>ye(s,e),value:e.answer||""})]}),(0,f.jsx)("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"flex-end"},children:(0,f.jsx)("button",{type:"button",style:{padding:"10px 16px",backgroundColor:"#ef4444",color:"#ffffff",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#dc2626",onMouseOut:e=>e.currentTarget.style.backgroundColor="#ef4444",onClick:()=>F(E.filter((e,n)=>n!==s)),children:"Remove"})})]},s)),(0,f.jsx)("button",{type:"button",style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"#ffffff",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s",alignSelf:"flex-start"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2563eb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3b82f6",onClick:()=>F([...E,{question:"",answer:""}]),children:"Add FAQ"})]})]}),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"16px"},children:[(0,f.jsx)("button",{type:"button",style:{padding:"10px 20px",backgroundColor:"#e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#d1d5db",onMouseOut:e=>e.currentTarget.style.backgroundColor="#e5e7eb",onClick:ge,children:"Cancel"}),(0,f.jsxs)("button",{type:"submit",disabled:D,style:{padding:"10px 20px",backgroundColor:D?"#2563eb":"#3b82f6",color:"#ffffff",borderRadius:"6px",cursor:D?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",border:"none",minWidth:"100px"},onMouseOver:e=>{D||(e.currentTarget.style.backgroundColor="#2563eb")},onMouseOut:e=>{D||(e.currentTarget.style.backgroundColor="#3b82f6")},children:[(0,f.jsx)(Q.A,{isTrue:D,children:(0,f.jsx)("div",{className:"spinner-border spinner-border-sm text-light",role:"status",style:{width:"1rem",height:"1rem"},children:(0,f.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),"Save"]})]})]})]})})};var X=n(88190),Z=n(10591),$=n(20782),ee=n(6221),se=n(7493),ne=n(23194);const re=e=>{let{userData:s,isOpen:n,toggleForm:l,setUserData:i,token:c}=e;const u=(0,t.wA)(),m=(0,t.d4)(e=>e.User.loading),h=(0,g.m)(),b=(0,B.Wx)({enableReinitialize:!0,initialValues:{password:"",confirmPassword:""},validationSchema:_.Ik({password:_.Yj().required("Please Enter Your Password"),confirmPassword:_.Yj().oneOf([_.KR("password")],"Confirm Password Doesn't Match")}),onSubmit:async e=>{try{await u((0,V.ejV)({id:s._id,newPassword:e.password,token:c})).unwrap(),i(null)}catch(n){h(n)||x.oR.error("Failed to update password.")}finally{b.resetForm(),l()}}}),v=()=>{l(),i(null),b.resetForm()};return(0,f.jsx)(r.Fragment,{children:(0,f.jsxs)(X.A,{isOpen:n,centered:!0,size:"md",className:"p-0 border-0",children:[(0,f.jsx)(Z.A,{toggle:v,children:"Edit Password"}),(0,f.jsx)($.A,{className:"p-4",children:(0,f.jsx)(j.A,{className:"shadow-sm border-0 rounded",children:(0,f.jsx)(C.A,{children:(0,f.jsx)(ee.A,{onSubmit:e=>(e.preventDefault(),b.handleSubmit(),!1),action:"#",children:(0,f.jsxs)(o.A,{className:"gy-3",children:[(0,f.jsx)(a.A,{xs:12,children:(0,f.jsxs)("div",{className:"mb-3",children:[(0,f.jsx)(se.A,{htmlFor:"password",className:"form-label fw-semibold",children:"Password"}),(0,f.jsx)(d.A,{name:"password",className:"form-control",placeholder:"Enter Password",type:"password",onChange:b.handleChange,onBlur:b.handleBlur,value:b.values.password||"",invalid:!(!b.touched.password||!b.errors.password)}),b.touched.password&&b.errors.password?(0,f.jsx)(ne.A,{type:"invalid",children:b.errors.password}):null]})}),(0,f.jsx)(a.A,{xs:12,children:(0,f.jsxs)("div",{className:"mb-3",children:[(0,f.jsx)(se.A,{htmlFor:"confirmPassword",className:"form-label fw-semibold",children:"Confirm Password"}),(0,f.jsx)(d.A,{name:"confirmPassword",className:"form-control",placeholder:"Enter Confirm Password",type:"password",onChange:b.handleChange,onBlur:b.handleBlur,value:b.values.confirmPassword||"",invalid:!(!b.touched.confirmPassword||!b.errors.confirmPassword)}),b.touched.confirmPassword&&b.errors.confirmPassword?(0,f.jsx)(ne.A,{type:"invalid",children:b.errors.confirmPassword}):null]})}),(0,f.jsx)(a.A,{xs:12,children:(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2 mt-2",children:[(0,f.jsxs)(p.A,{type:"submit",size:"sm",color:"primary",outline:!0,className:"d-flex align-items-center",children:[(0,f.jsx)(Q.A,{isTrue:m,children:(0,f.jsx)("div",{className:"spinner-border spinner-border-sm text-light me-2",role:"status",style:{width:"1rem",height:"1rem"},children:(0,f.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),"Save"]}),(0,f.jsx)(p.A,{onClick:v,size:"sm",color:"danger",children:"Cancel"})]})})]})})})})})]})})};var le=n(7867),te=n(75067),ie=n(41720);const oe=e=>{let{centers:s}=e;const[n,l]=(0,r.useState)(!1);if(!s||!Array.isArray(s)||0===s.length)return(0,f.jsx)("p",{className:"text-muted mb-0",children:"No centers assigned."});const t=n?s:s.slice(0,3),i=s.length-3;return(0,f.jsxs)("div",{className:"d-flex flex-wrap gap-2 align-items-center",children:[t.map(e=>(0,f.jsx)(y.A,{color:"primary",pill:!0,children:(null===e||void 0===e?void 0:e.displayName)||e.title},e._id||e.id)),i>0&&(0,f.jsx)("button",{type:"button",className:"btn btn-link btn-sm p-0",onClick:()=>l(!n),children:n?"Show Less":"+ ".concat(i," more")})]})},ae=(0,t.Ng)(e=>({user:e.User.user,form:e.User.form,centerAccess:e.User.centerAccess}))(e=>{let{user:s,form:n,centerAccess:c}=e;const m=(0,t.wA)(),b=(0,l.Zp)(),R=localStorage.getItem("micrologin"),P=R?JSON.parse(R).token:null,T=(0,t.d4)(e=>e.User.dataLoader),z=(0,t.d4)(e=>e.Center.allCenters||[]),M=(0,t.d4)(e=>e.User.data||[]),[D,E]=(0,r.useState)(""),[F,U]=(0,r.useState)(null),[I,L]=(0,r.useState)(!1),[W,_]=(0,r.useState)(!1),[B,q]=(0,r.useState)(!1),[Y,J]=(0,r.useState)(1),[G,X]=(0,r.useState)(1),[Z,$]=(0,r.useState)(0),{loading:ee,hasPermission:se,roles:ne}=(0,h.S)(P),ae=se("USER",null,"READ"),de=(0,g.m)();(0,r.useEffect)(()=>{P&&(m((0,V.jwZ)(null===s||void 0===s?void 0:s.centerAccess)),m((0,V.Qf8)()))},[m,s,P]),(0,r.useEffect)(()=>{if(!z||0===z.length||!P)return;if(!ae)return;const e=setTimeout(()=>{(async()=>{try{var e,s,n,r;m((0,H.o3)(!0));const l=await(0,u.CFN)({page:Y,limit:12,search:D,token:P,centerAccess:JSON.stringify(c)});let t=(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.data)||[];t=t.length>0&&Array.isArray(z)&&z.length>0?t.map(e=>(0,v.A)((0,v.A)({},e),{},{centerAccess:(e.centerAccess||[]).map(e=>z.find(s=>s._id===e)||{_id:e,title:"Unknown Center"})})):t.map(e=>(0,v.A)((0,v.A)({},e),{},{centerAccess:(e.centerAccess||[]).map(e=>({_id:e,title:"Unknown Center"}))})),m((0,H.XO)(t)),X((null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.totalPages)||1),$(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.total),J((null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.currentPage)||Y)}catch(l){de(l)||(console.error("Error fetching users:",l),x.oR.error(l.message||"Failed to fetch users."))}finally{m((0,H.o3)(!1))}})()},500);return()=>clearTimeout(e)},[D,Y,P,c,z,ne]),document.title="Users | Your App Name";const ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;U(e),m((0,V.gQX)({isOpen:!n.isOpen,data:e}))},pe=function(){U(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),L(e=>!e)},ue=function(){U(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),_(e=>!e)},xe=function(){U(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),q(e=>!e)},me=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").map(e=>e.charAt(0)).join("").toUpperCase()},he=e=>{e>=1&&e<=G&&J(e)};return ee?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,f.jsx)(i.A,{color:"primary",className:"d-block",style:{width:"3rem",height:"3rem"}})}):ae?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j.A,{children:(0,f.jsx)(C.A,{children:(0,f.jsxs)(o.A,{className:"g-3 align-items-center",children:[(0,f.jsx)(a.A,{md:4,children:(0,f.jsxs)("div",{className:"search-box position-relative",children:[(0,f.jsx)(d.A,{type:"text",value:D,onChange:e=>E(e.target.value),className:"form-control",placeholder:"Search by name or email..."}),(0,f.jsx)("i",{className:"ri-search-line search-icon"}),(0,f.jsx)(Q.A,{isTrue:T,children:(0,f.jsx)(i.A,{className:"position-absolute end-0 top-50 translate-middle-y me-2",color:"success",size:"sm"})})]})}),(0,f.jsx)(a.A,{md:8,className:"text-sm-end",children:(0,f.jsx)(te.A,{accessRolePermission:null===ne||void 0===ne?void 0:ne.permissions,permission:"create",children:(0,f.jsxs)(p.A,{color:"success",onClick:()=>ce(),children:[(0,f.jsx)("i",{className:"ri-add-fill me-1 align-bottom"}),"Add User"]})})})]})})}),(0,f.jsx)(K,{isOpen:n.isOpen,toggleForm:()=>ce(null),userData:F,setUserData:U,hasUserPermission:ae}),(0,f.jsx)(re,{isOpen:I,toggleForm:pe,userData:F,setUserData:U,token:P}),(0,f.jsx)(le.A,{show:W,onDeleteClick:async()=>{try{await m((0,V.a18)({id:F._id,token:P})).unwrap(),U(null)}catch(e){de(e)||x.oR.error(e.message||"Failed to delete user.")}finally{ue()}},onCloseClick:()=>{U(null),ue()}}),(0,f.jsx)(le.A,{show:B,onDeleteClick:async()=>{try{await m((0,V.Pof)({id:F._id,token:P})).unwrap(),U(null)}catch(e){de(e)||x.oR.error(e.message||"Failed to suspend user.")}finally{xe()}},onCloseClick:()=>{U(null),xe()},messsage:"Are you sure you want to ".concat("suspended"===(null===F||void 0===F?void 0:F.status)?"restore":"suspend"," this user?"),buttonMessage:"Yes, ".concat("suspended"===(null===F||void 0===F?void 0:F.status)?"Restore":"Suspend"," It!")}),(0,f.jsx)(o.A,{className:"g-4",children:(M||[]).map(e=>(0,f.jsx)(a.A,{xxl:3,lg:4,md:6,children:(0,f.jsxs)(j.A,{className:"team-box h-100",children:[(0,f.jsx)("div",{className:"team-cover",children:(0,f.jsx)("img",{src:ie,alt:"",className:"img-fluid"})}),(0,f.jsxs)(C.A,{className:"p-4 d-flex flex-column",children:[(0,f.jsxs)("div",{className:"flex-grow-1",children:[(0,f.jsxs)("div",{className:"d-flex align-items-start mb-4",children:[(0,f.jsx)("div",{className:"flex-shrink-0",children:(0,f.jsx)("div",{className:"avatar-lg img-thumbnail rounded-circle",children:e.profilePicture?(0,f.jsx)("img",{src:e.profilePicture,alt:e.name,className:"img-fluid d-block h-100 w-100 rounded-circle object-fit-cover"}):(0,f.jsx)("div",{className:"avatar-title rounded-circle h-100 w-100 bg-soft-".concat(e.bgColor||"primary"," text-").concat(e.textColor||"primary"),children:(0,f.jsx)("span",{className:"fs-22",children:me(e.name)})})})}),(0,f.jsxs)("div",{className:"flex-grow-1 ms-3",children:[(0,f.jsx)("h5",{className:"fs-16 mb-1",children:(0,f.jsx)(O(),{searchWords:[D],autoEscape:!0,textToHighlight:e.name||""})}),(0,f.jsx)("p",{className:"text-muted mb-0",children:e.role||"N/A"})]}),(0,f.jsx)("div",{className:"flex-shrink-0",children:(0,f.jsxs)(A.A,{direction:"start",children:[(0,f.jsx)(te.A,{accessRolePermission:null===ne||void 0===ne?void 0:ne.permissions,permission:"create",children:(0,f.jsx)(w.A,{tag:"a",role:"button",children:(0,f.jsx)("i",{className:"ri-more-fill fs-17"})})}),(0,f.jsxs)(N.A,{children:[(0,f.jsx)(te.A,{accessRolePermission:null===ne||void 0===ne?void 0:ne.permissions,permission:"edit",children:(0,f.jsxs)(k.A,{onClick:()=>ce(e),children:[(0,f.jsx)("i",{className:"ri-pencil-line me-2 align-middle"}),"Edit Details"]})}),(0,f.jsx)(te.A,{accessRolePermission:null===ne||void 0===ne?void 0:ne.permissions,permission:"edit",subAccess:"USERPASSWORDCHANGE",children:(0,f.jsxs)(k.A,{onClick:()=>pe(e),children:[(0,f.jsx)("i",{className:"ri-lock-password-line me-2 align-middle"}),"Change Password"]})}),(0,f.jsx)(te.A,{accessRolePermission:null===ne||void 0===ne?void 0:ne.permissions,permission:"delete",subAccess:"SUSPENDUSER",children:(0,f.jsxs)(k.A,{onClick:()=>xe(e),children:[(0,f.jsx)("i",{className:"ri-user-unfollow-line me-2 align-middle"}),"suspended"===e.status?"Restore User":"Suspend User"]})}),(0,f.jsx)(te.A,{accessRolePermission:null===ne||void 0===ne?void 0:ne.permissions,permission:"delete",children:(0,f.jsxs)(k.A,{className:"text-danger",onClick:()=>ue(e),children:[(0,f.jsx)("i",{className:"ri-delete-bin-5-line me-2 align-middle"}),"Delete User"]})})]})]})})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("p",{className:"text-muted mb-1",children:"Email Address"}),(0,f.jsx)("h6",{className:"mb-0",children:(0,f.jsx)(O(),{searchWords:[D],autoEscape:!0,textToHighlight:e.email||"-"})})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("p",{className:"text-muted mb-1",children:"Contact Number"}),(0,f.jsx)("h6",{className:"mb-0",children:(0,f.jsx)(O(),{searchWords:[D],autoEscape:!0,textToHighlight:(null===e||void 0===e?void 0:e.phoneNumber)||"-"})})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("p",{className:"text-muted mb-1",children:"Assigned Centers"}),(0,f.jsx)(oe,{centers:e.centerAccess||[]})]})]}),(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-muted mb-1",children:"Account Status"}),(0,f.jsx)(y.A,{color:"active"===e.status?"success":"danger",className:"text-uppercase",children:e.status||"N/A"})]}),(0,f.jsx)(S.N_,{to:"/user/activity/".concat(e._id),className:"btn btn-soft-primary view-btn",children:"View Activity"})]})]})]})},e._id))}),G>1&&(0,f.jsxs)(o.A,{className:"mt-4 justify-content-center align-items-center",children:[(0,f.jsx)(a.A,{xs:"auto",className:"d-flex justify-content-center",children:(0,f.jsx)(p.A,{color:"secondary",disabled:1===Y,onClick:()=>he(Y-1),children:"\u2190 Previous"})}),(0,f.jsxs)(a.A,{xs:"auto",className:"text-center text-muted mx-3",children:["Showing ",Math.min(12*(Y-1)+1,Z),"\u2013",Math.min(12*Y,Z)," of ",Z]}),(0,f.jsx)(a.A,{xs:"auto",className:"d-flex justify-content-center",children:(0,f.jsx)(p.A,{color:"secondary",disabled:Y===G,onClick:()=>he(Y+1),children:"Next \u2192"})})]})]}):(b("/unauthorized"),null)});var de=n(99904),ce=n(24410);const pe=e=>{const[s,n]=(0,r.useState)();return(0,f.jsx)(r.Fragment,{children:(0,f.jsx)("div",{className:"page-content",children:(0,f.jsxs)(de.A,{fluid:!0,children:[(0,f.jsx)(ce.A,{title:s?"".concat(s.name," (").concat(s.role,")"):"User",pageTitle:"User"}),(0,f.jsxs)(l.BV,{children:[(0,f.jsx)(l.qh,{path:"activity/:id",element:(0,f.jsx)(b,{})}),(0,f.jsx)(l.qh,{path:"/",element:(0,f.jsx)(ae,{userActivity:s,setUserActivity:n})})]})]})})})}}}]);
//# sourceMappingURL=5537.2ac755f7.chunk.js.map