{"version":3,"file":"static/js/4791.082b58f9.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/index-25aba8a9.js","../node_modules/@dytesdk/ui-kit/dist/esm/dyte-participants-audio.entry.js"],"sourcesContent":["import { a as getElement } from './index-08f4416b.js';\nimport { o as appendElement, q as removeElement, u as uiStore } from './ui-store-11740cb4.js';\n\nfunction SyncWithStore() {\n    return function (proto, propName) {\n        const { connectedCallback, disconnectedCallback } = proto;\n        proto.connectedCallback = function () {\n            const host = getElement(this);\n            const value = host[propName];\n            if (!value) {\n                const storeValue = uiStore.state[propName];\n                host[propName] = storeValue;\n                appendElement(propName, host);\n            }\n            return connectedCallback === null || connectedCallback === void 0 ? void 0 : connectedCallback.call(this);\n        };\n        proto.disconnectedCallback = function () {\n            removeElement(propName, getElement(this));\n            return disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(this);\n        };\n    };\n}\n\nexport { SyncWithStore as S };\n","import { r as registerInstance, c as createEvent, h, H as Host } from './index-08f4416b.js';\nimport { e as disableSettingSinkId, a as defaultIconPack, c as useLanguage, v as isLiveStreamViewer } from './ui-store-11740cb4.js';\nimport { l as logger } from './logger-31448943.js';\nimport { S as SyncWithStore } from './index-25aba8a9.js';\n\n/**\n * Handles audio from participants in a meeting\n */\nclass DyteAudio {\n    constructor(meeting, audio) {\n        this.meeting = meeting;\n        this.audio = audio !== null && audio !== void 0 ? audio : document.createElement('audio');\n        this.audio.autoplay = true;\n        this.audioStream = new MediaStream();\n        this.audio.srcObject = this.audioStream;\n        this.audioTracks = [];\n    }\n    addTrack(id, track) {\n        if (!this.audioTracks.some((a) => a.id === id)) {\n            this.audioTracks.push({ id, track });\n            this.audioStream.addTrack(track);\n            this.play();\n        }\n    }\n    removeTrack(id) {\n        const track = this.audioTracks.find((a) => a.id === id);\n        if (track != null) {\n            this.audioStream.removeTrack(track.track);\n            this.audioTracks = this.audioTracks.filter((a) => a.id !== id);\n        }\n    }\n    async play() {\n        var _a;\n        this.audio.srcObject = this.audioStream;\n        await ((_a = this.audio.play()) === null || _a === void 0 ? void 0 : _a.catch((err) => {\n            if (err.name === 'NotAllowedError') {\n                if (this._onError != null) {\n                    this._onError();\n                }\n            }\n            else if (err.name !== 'AbortError') {\n                logger.error('[dyte-audio] play() error\\n', err);\n            }\n        }));\n    }\n    async setDevice(id) {\n        var _a, _b, _c;\n        if (disableSettingSinkId(this.meeting))\n            return;\n        await ((_c = (_b = (_a = this.audio).setSinkId) === null || _b === void 0 ? void 0 : _b.call(_a, id)) === null || _c === void 0 ? void 0 : _c.catch((err) => {\n            logger.error('[dyte-audio] setSinkId() error\\n', err);\n        }));\n    }\n    onError(onError) {\n        this._onError = onError;\n    }\n}\n\nconst dyteParticipantsAudioCss = \":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;overflow-wrap:break-word;color:rgb(var(--dyte-colors-text-1000, 255 255 255));word-wrap:break-word}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}\";\nconst DyteParticipantsAudioStyle0 = dyteParticipantsAudioCss;\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst DyteParticipantsAudio = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.dialogClose = createEvent(this, \"dialogClose\", 7);\n        /** Icon pack */\n        this.iconPack = defaultIconPack;\n        /** Language */\n        this.t = useLanguage();\n        /** Pass existing audio element */\n        this.preloadedAudioElem = undefined;\n        this.showPlayDialog = false;\n        this.onDyteDialogClose = () => {\n            this.showPlayDialog = false;\n            this.dialogClose.emit();\n        };\n    }\n    componentDidLoad() {\n        this.meetingChanged(this.meeting);\n    }\n    disconnectedCallback() {\n        var _a;\n        if (this.meeting == null)\n            return;\n        this.audioUpdateListener &&\n            this.meeting.participants.joined.removeListener('audioUpdate', this.audioUpdateListener);\n        this.screenShareUpdateListener &&\n            this.meeting.participants.joined.removeListener('screenShareUpdate', this.screenShareUpdateListener);\n        this.participantLeftListener &&\n            this.meeting.participants.joined.removeListener('participantLeft', this.participantLeftListener);\n        this.deviceUpdateListener &&\n            this.meeting.self.removeListener('deviceUpdate', this.deviceUpdateListener);\n        this.stageStatusUpdateListener &&\n            ((_a = this.meeting.stage) === null || _a === void 0 ? void 0 : _a.removeListener('stageStatusUpdate', this.stageStatusUpdateListener));\n    }\n    async setupAudio() {\n        this.audio = new DyteAudio(this.meeting, this.preloadedAudioElem);\n        // Set the device to the current speaker device\n        const currentDevices = this.meeting.self.getCurrentDevices();\n        if (currentDevices.speaker != null) {\n            await this.audio.setDevice(currentDevices.speaker.deviceId);\n        }\n    }\n    async handleAutoPlayError() {\n        if (!this.audio) {\n            await this.setupAudio();\n        }\n        this.audio.onError(() => {\n            this.showPlayDialog = true;\n        });\n        this.audio.play();\n        return;\n    }\n    async handleEvents(meeting) {\n        this.audioUpdateListener = ({ id, audioEnabled, audioTrack }) => {\n            const audioId = `audio-${id}`;\n            if (audioEnabled && audioTrack != null) {\n                this.audio.addTrack(audioId, audioTrack);\n            }\n            else {\n                this.audio.removeTrack(audioId);\n            }\n        };\n        const participants = meeting.participants.joined.toArray();\n        for (const participant of participants) {\n            this.audioUpdateListener(participant);\n        }\n        this.participantLeftListener = ({ id }) => {\n            this.audio.removeTrack(`audio-${id}`);\n            this.audio.removeTrack(`screenshare-${id}`);\n        };\n        this.screenShareUpdateListener = ({ id, screenShareEnabled, screenShareTracks }) => {\n            const audioId = `screenshare-${id}`;\n            if (screenShareEnabled && screenShareTracks.audio != null) {\n                this.audio.addTrack(audioId, screenShareTracks.audio);\n            }\n            else {\n                this.audio.removeTrack(audioId);\n            }\n        };\n        this.deviceUpdateListener = ({ device, preview }) => {\n            if (preview)\n                return;\n            if (device.kind === 'audiooutput') {\n                this.audio.setDevice(device.deviceId);\n            }\n        };\n        meeting.participants.joined.addListener('audioUpdate', this.audioUpdateListener);\n        meeting.participants.joined.addListener('screenShareUpdate', this.screenShareUpdateListener);\n        meeting.participants.joined.addListener('participantLeft', this.participantLeftListener);\n        meeting.self.addListener('deviceUpdate', this.deviceUpdateListener);\n    }\n    async meetingChanged(meeting) {\n        var _a;\n        if (meeting == null)\n            return;\n        this.setupAudio();\n        if (isLiveStreamViewer(meeting)) {\n            this.stageStatusUpdateListener = async (status) => {\n                if (status === 'ON_STAGE') {\n                    // NOTE(@madhugb): When someone joins stage handle autoplay and also handle events\n                    await this.handleAutoPlayError();\n                }\n            };\n            (_a = meeting.stage) === null || _a === void 0 ? void 0 : _a.on('stageStatusUpdate', this.stageStatusUpdateListener);\n        }\n        else {\n            await this.handleAutoPlayError();\n        }\n        await this.handleEvents(meeting);\n    }\n    render() {\n        return (h(Host, { key: '8f75e172807ecedd630de70b5cc3e8c73aad09de' }, this.showPlayDialog && (h(\"dyte-dialog\", { key: '4770efe5ed393e2033706e983996a2b7f822feac', open: true, onDyteDialogClose: this.onDyteDialogClose, hideCloseButton: true, disableEscapeKey: true, iconPack: this.iconPack, t: this.t }, h(\"div\", { key: '5c1cb440b28b8a7a3e655056a3495f1d10c7168e', class: \"modal\" }, h(\"h3\", { key: 'c3426d43cb93374db943952d7e21ecc7ed49c6ad' }, this.t('audio_playback.title')), h(\"p\", { key: '46e1b0443fec08430c1d08556a528e2de7419708' }, this.t('audio_playback.description')), h(\"dyte-button\", { key: '99173304cfa04af361162d78993c0ccb06de3400', kind: \"wide\", onClick: () => {\n                this.audio.play();\n                this.onDyteDialogClose();\n            }, title: this.t('audio_playback') }, this.t('audio_playback')))))));\n    }\n    static get watchers() { return {\n        \"meeting\": [\"meetingChanged\"]\n    }; }\n};\n__decorate([\n    SyncWithStore()\n], DyteParticipantsAudio.prototype, \"meeting\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteParticipantsAudio.prototype, \"iconPack\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteParticipantsAudio.prototype, \"t\", void 0);\nDyteParticipantsAudio.style = DyteParticipantsAudioStyle0;\n\nexport { DyteParticipantsAudio as dyte_participants_audio };\n"],"names":["SyncWithStore","proto","propName","connectedCallback","disconnectedCallback","host","getElement","this","storeValue","uiStore","state","appendElement","call","removeElement","DyteAudio","constructor","meeting","audio","document","createElement","autoplay","audioStream","MediaStream","srcObject","audioTracks","addTrack","id","track","some","a","push","play","removeTrack","find","filter","_a","catch","err","name","_onError","logger","error","setDevice","_b","_c","disableSettingSinkId","setSinkId","onError","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","DyteParticipantsAudio","hostRef","registerInstance","dialogClose","createEvent","iconPack","defaultIconPack","t","useLanguage","preloadedAudioElem","undefined","showPlayDialog","onDyteDialogClose","emit","componentDidLoad","meetingChanged","audioUpdateListener","participants","joined","removeListener","screenShareUpdateListener","participantLeftListener","deviceUpdateListener","self","stageStatusUpdateListener","stage","setupAudio","currentDevices","getCurrentDevices","speaker","deviceId","handleAutoPlayError","handleEvents","_ref","audioEnabled","audioTrack","audioId","concat","toArray","participant","_ref2","_ref3","screenShareEnabled","screenShareTracks","_ref4","device","preview","kind","addListener","isLiveStreamViewer","async","status","on","render","h","Host","open","hideCloseButton","disableEscapeKey","class","onClick","title","watchers","prototype","style"],"sourceRoot":""}