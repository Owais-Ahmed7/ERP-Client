{"version":3,"file":"static/js/2199.1ee55c54.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/index-25aba8a9.js","../node_modules/@dytesdk/ui-kit/dist/esm/dyte-audio-tile.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/hark-6327d91e.js"],"sourcesContent":["import { a as getElement } from './index-08f4416b.js';\nimport { o as appendElement, q as removeElement, u as uiStore } from './ui-store-11740cb4.js';\n\nfunction SyncWithStore() {\n    return function (proto, propName) {\n        const { connectedCallback, disconnectedCallback } = proto;\n        proto.connectedCallback = function () {\n            const host = getElement(this);\n            const value = host[propName];\n            if (!value) {\n                const storeValue = uiStore.state[propName];\n                host[propName] = storeValue;\n                appendElement(propName, host);\n            }\n            return connectedCallback === null || connectedCallback === void 0 ? void 0 : connectedCallback.call(this);\n        };\n        proto.disconnectedCallback = function () {\n            removeElement(propName, getElement(this));\n            return disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(this);\n        };\n    };\n}\n\nexport { SyncWithStore as S };\n","import { r as registerInstance, h, H as Host } from './index-08f4416b.js';\nimport { a as defaultIconPack, c as useLanguage } from './ui-store-11740cb4.js';\nimport { h as hark } from './hark-6327d91e.js';\nimport { S as SyncWithStore } from './index-25aba8a9.js';\n\nconst dyteAudioTileCss = \":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column}.avatar-ctr{box-sizing:border-box;width:100%;flex:1 1 0%;padding:var(--dyte-space-1\\\\.5, 6px);border:2px solid transparent;border-radius:calc(var(--dyte-border-radius-xl, 40px) + var(--dyte-space-1\\\\.5, 6px))}.avatar-ctr.speaking{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));transition-property:box-shadow;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.bar-0{box-shadow:none}.bar-1{box-shadow:0 0 4px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-2{box-shadow:0 0 8px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-3{box-shadow:0 0 16px 1px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-4{box-shadow:0 0 20px 3px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-5{box-shadow:0 0 24px 6px rgb(var(--dyte-colors-brand-500, 33 96 253))}dyte-avatar{aspect-ratio:1 / 1;height:100%;width:100%;position:relative;border-radius:var(--dyte-border-radius-xl, 40px)}dyte-name-tag{display:block;height:var(--dyte-space-10, 40px);width:100%;text-align:center;line-height:2.5rem}:host([size='sm']) .avatar-ctr{border-radius:calc(var(--dyte-border-radius-lg, 12px) + var(--dyte-space-1\\\\.5, 6px))}:host([size='sm']) dyte-name-tag{height:var(--dyte-space-7, 28px);line-height:1.75rem}:host([size='sm']) dyte-avatar{border-radius:var(--dyte-border-radius-lg, 12px)}.mic-icon{position:absolute;bottom:calc(var(--dyte-space-1, 4px) * -1);right:calc(var(--dyte-space-1, 4px) * -1);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.mic-icon dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) .mic-icon dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='md']) .mic-icon dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}\";\nconst DyteAudioTileStyle0 = dyteAudioTileCss;\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst DyteAudioTile = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        /** Icon pack */\n        this.iconPack = defaultIconPack;\n        /** Language */\n        this.t = useLanguage();\n        this.audioEnabled = false;\n        this.volume = 0;\n        this.onAudioUpdate = ({ audioEnabled, audioTrack, }) => {\n            if (!this.participant)\n                return;\n            if (audioEnabled && audioTrack) {\n                const stream = new MediaStream();\n                stream.addTrack(audioTrack);\n                this.calcVolume(stream);\n                this.audioEnabled = true;\n            }\n            else {\n                this.volume = 0;\n                this.audioEnabled = false;\n            }\n        };\n    }\n    connectedCallback() {\n        this.participantChanged(this.participant);\n    }\n    disconnectedCallback() {\n        var _a, _b;\n        (_a = this.hark) === null || _a === void 0 ? void 0 : _a.stop();\n        (_b = this.participant) === null || _b === void 0 ? void 0 : _b.removeListener('audioUpdate', this.onAudioUpdate);\n    }\n    participantChanged(participant) {\n        if (!participant) {\n            return;\n        }\n        this.audioEnabled = participant.audioEnabled;\n        participant.addListener('audioUpdate', this.onAudioUpdate);\n    }\n    /**\n     * Determines the volume from a given MediaStream and updates the components state\n     * @param stream A MediaStream with AudioTrack(s) added\n     */\n    calcVolume(stream) {\n        this.hark = hark(stream, {\n            play: false,\n            interval: 1000 / 10,\n        });\n        this.hark.on('volume_change', (dBs) => {\n            const prevVolume = this.volume;\n            // The exact formula to convert from dBs (-100..0) to linear (0..1) is:\n            //   Math.pow(10, dBs / 20)\n            // However it does not produce a visually useful output, so let exagerate\n            // it a bit. Also, let convert it from 0..1 to 0..10 and avoid value 1 to\n            // minimize component renderings.\n            // if dBs is -Inifnity, set vol to 0\n            let audioVol = Math.round(10 ** (dBs / 115) * 10);\n            if (audioVol < 3)\n                audioVol = 0;\n            let volume = Math.round((prevVolume * 2 + audioVol) / 3);\n            if (prevVolume !== volume) {\n                this.volume = volume;\n            }\n        });\n    }\n    render() {\n        const defaults = {\n            meeting: this.meeting,\n            size: this.size,\n            config: this.config,\n            states: this.states,\n            iconPack: this.iconPack,\n            t: this.t,\n        };\n        let shadowClass = 'bar-0';\n        if (this.volume > 5) {\n            shadowClass = 'bar-5';\n        }\n        else if (this.volume < 0) {\n            shadowClass = 'bar-0';\n        }\n        else {\n            shadowClass = 'bar-' + this.volume;\n        }\n        return (h(Host, { key: '857dc5cefa005a9f429a32b01ef482ad8b2b667f' }, h(\"div\", { key: 'ea0841398dee55b4cae6fb8a740e0057d1f25071', class: { 'avatar-ctr': true, speaking: this.audioEnabled, [shadowClass]: true } }, h(\"dyte-avatar\", { key: '84197cb9acc92408a7033c3d0e6e5459a8351e9d', participant: this.participant, size: this.size }, !this.audioEnabled && (h(\"div\", { key: '9a284bd8863f638321aae3e84a1ac39a73ee9840', class: \"mic-icon\" }, h(\"dyte-icon\", { key: '5ea4329213d65c112acf9e323c1c29f61f6f3117', icon: defaultIconPack.mic_off }))))), h(\"dyte-name-tag\", Object.assign({ key: 'd799227e0ad142d6832bd7796ce1f39a4040e19e', variant: \"text\", participant: this.participant }, defaults)), h(\"slot\", { key: 'b2b8b06518be41c39ee1d9574192d57993a31bae' })));\n    }\n    static get watchers() { return {\n        \"participant\": [\"participantChanged\"]\n    }; }\n};\n__decorate([\n    SyncWithStore()\n], DyteAudioTile.prototype, \"meeting\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteAudioTile.prototype, \"size\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteAudioTile.prototype, \"states\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteAudioTile.prototype, \"iconPack\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteAudioTile.prototype, \"t\", void 0);\nDyteAudioTile.style = DyteAudioTileStyle0;\n\nexport { DyteAudioTile as dyte_audio_tile };\n","/*\nWildEmitter.js is a slim little event emitter by @henrikjoreteg largely based\non @visionmedia's Emitter from UI Kit.\n\nWhy? I wanted it standalone.\n\nI also wanted support for wildcard emitters like this:\n\nemitter.on('*', function (eventName, other, event, payloads) {\n\n});\n\nemitter.on('somenamespace*', function (eventName, payloads) {\n\n});\n\nPlease note that callbacks triggered by wildcard registered events also get\nthe event name as the first argument.\n*/\n\nvar wildemitter = WildEmitter$1;\n\nfunction WildEmitter$1() { }\n\nWildEmitter$1.mixin = function (constructor) {\n    var prototype = constructor.prototype || constructor;\n\n    prototype.isWildEmitter= true;\n\n    // Listen on the given `event` with `fn`. Store a group name if present.\n    prototype.on = function (event, groupName, fn) {\n        this.callbacks = this.callbacks || {};\n        var hasGroup = (arguments.length === 3),\n            group = hasGroup ? arguments[1] : undefined,\n            func = hasGroup ? arguments[2] : arguments[1];\n        func._groupName = group;\n        (this.callbacks[event] = this.callbacks[event] || []).push(func);\n        return this;\n    };\n\n    // Adds an `event` listener that will be invoked a single\n    // time then automatically removed.\n    prototype.once = function (event, groupName, fn) {\n        var self = this,\n            hasGroup = (arguments.length === 3),\n            group = hasGroup ? arguments[1] : undefined,\n            func = hasGroup ? arguments[2] : arguments[1];\n        function on() {\n            self.off(event, on);\n            func.apply(this, arguments);\n        }\n        this.on(event, group, on);\n        return this;\n    };\n\n    // Unbinds an entire group\n    prototype.releaseGroup = function (groupName) {\n        this.callbacks = this.callbacks || {};\n        var item, i, len, handlers;\n        for (item in this.callbacks) {\n            handlers = this.callbacks[item];\n            for (i = 0, len = handlers.length; i < len; i++) {\n                if (handlers[i]._groupName === groupName) {\n                    //console.log('removing');\n                    // remove it and shorten the array we're looping through\n                    handlers.splice(i, 1);\n                    i--;\n                    len--;\n                }\n            }\n        }\n        return this;\n    };\n\n    // Remove the given callback for `event` or all\n    // registered callbacks.\n    prototype.off = function (event, fn) {\n        this.callbacks = this.callbacks || {};\n        var callbacks = this.callbacks[event],\n            i;\n\n        if (!callbacks) return this;\n\n        // remove all handlers\n        if (arguments.length === 1) {\n            delete this.callbacks[event];\n            return this;\n        }\n\n        // remove specific handler\n        i = callbacks.indexOf(fn);\n        if (i !== -1) {\n            callbacks.splice(i, 1);\n            if (callbacks.length === 0) {\n                delete this.callbacks[event];\n            }\n        }\n        return this;\n    };\n\n    /// Emit `event` with the given args.\n    // also calls any `*` handlers\n    prototype.emit = function (event) {\n        this.callbacks = this.callbacks || {};\n        var args = [].slice.call(arguments, 1),\n            callbacks = this.callbacks[event],\n            specialCallbacks = this.getWildcardCallbacks(event),\n            i,\n            len,\n            listeners;\n\n        if (callbacks) {\n            listeners = callbacks.slice();\n            for (i = 0, len = listeners.length; i < len; ++i) {\n                if (!listeners[i]) {\n                    break;\n                }\n                listeners[i].apply(this, args);\n            }\n        }\n\n        if (specialCallbacks) {\n            len = specialCallbacks.length;\n            listeners = specialCallbacks.slice();\n            for (i = 0, len = listeners.length; i < len; ++i) {\n                if (!listeners[i]) {\n                    break;\n                }\n                listeners[i].apply(this, [event].concat(args));\n            }\n        }\n\n        return this;\n    };\n\n    // Helper for for finding special wildcard event handlers that match the event\n    prototype.getWildcardCallbacks = function (eventName) {\n        this.callbacks = this.callbacks || {};\n        var item,\n            split,\n            result = [];\n\n        for (item in this.callbacks) {\n            split = item.split('*');\n            if (item === '*' || (split.length === 2 && eventName.slice(0, split[0].length) === split[0])) {\n                result = result.concat(this.callbacks[item]);\n            }\n        }\n        return result;\n    };\n\n};\n\nWildEmitter$1.mixin(WildEmitter$1);\n\nvar WildEmitter = wildemitter;\n\nfunction getMaxVolume (analyser, fftBins) {\n  var maxVolume = -Infinity;\n  analyser.getFloatFrequencyData(fftBins);\n\n  for(var i=4, ii=fftBins.length; i < ii; i++) {\n    if (fftBins[i] > maxVolume && fftBins[i] < 0) {\n      maxVolume = fftBins[i];\n    }\n  }\n  return maxVolume;\n}\n\n\nvar audioContextType;\nif (typeof window !== 'undefined') {\n  audioContextType = window.AudioContext || window.webkitAudioContext;\n}\n// use a single audio context due to hardware limits\nvar audioContext = null;\nvar hark = function(stream, options) {\n  var harker = new WildEmitter();\n\n  // make it not break in non-supported browsers\n  if (!audioContextType) return harker;\n\n  //Config\n  var options = options || {},\n      smoothing = (options.smoothing || 0.1),\n      interval = (options.interval || 50),\n      threshold = options.threshold,\n      play = options.play,\n      history = options.history || 10,\n      running = true;\n\n  // Ensure that just a single AudioContext is internally created\n  audioContext = options.audioContext || audioContext || new audioContextType();\n\n  var sourceNode, fftBins, analyser;\n\n  analyser = audioContext.createAnalyser();\n  analyser.fftSize = 512;\n  analyser.smoothingTimeConstant = smoothing;\n  fftBins = new Float32Array(analyser.frequencyBinCount);\n\n  if (stream.jquery) stream = stream[0];\n  if (stream instanceof HTMLAudioElement || stream instanceof HTMLVideoElement) {\n    //Audio Tag\n    sourceNode = audioContext.createMediaElementSource(stream);\n    if (typeof play === 'undefined') play = true;\n    threshold = threshold || -50;\n  } else {\n    //WebRTC Stream\n    sourceNode = audioContext.createMediaStreamSource(stream);\n    threshold = threshold || -50;\n  }\n\n  sourceNode.connect(analyser);\n  if (play) analyser.connect(audioContext.destination);\n\n  harker.speaking = false;\n\n  harker.suspend = function() {\n    return audioContext.suspend();\n  };\n  harker.resume = function() {\n    return audioContext.resume();\n  };\n  Object.defineProperty(harker, 'state', { get: function() {\n    return audioContext.state;\n  }});\n  audioContext.onstatechange = function() {\n    harker.emit('state_change', audioContext.state);\n  };\n\n  harker.setThreshold = function(t) {\n    threshold = t;\n  };\n\n  harker.setInterval = function(i) {\n    interval = i;\n  };\n\n  harker.stop = function() {\n    running = false;\n    harker.emit('volume_change', -100, threshold);\n    if (harker.speaking) {\n      harker.speaking = false;\n      harker.emit('stopped_speaking');\n    }\n    analyser.disconnect();\n    sourceNode.disconnect();\n  };\n  harker.speakingHistory = [];\n  for (var i = 0; i < history; i++) {\n      harker.speakingHistory.push(0);\n  }\n\n  // Poll the analyser node to determine if speaking\n  // and emit events if changed\n  var looper = function() {\n    setTimeout(function() {\n\n      //check if stop has been called\n      if(!running) {\n        return;\n      }\n\n      var currentVolume = getMaxVolume(analyser, fftBins);\n\n      harker.emit('volume_change', currentVolume, threshold);\n\n      var history = 0;\n      if (currentVolume > threshold && !harker.speaking) {\n        // trigger quickly, short history\n        for (var i = harker.speakingHistory.length - 3; i < harker.speakingHistory.length; i++) {\n          history += harker.speakingHistory[i];\n        }\n        if (history >= 2) {\n          harker.speaking = true;\n          harker.emit('speaking');\n        }\n      } else if (currentVolume < threshold && harker.speaking) {\n        for (var i = 0; i < harker.speakingHistory.length; i++) {\n          history += harker.speakingHistory[i];\n        }\n        if (history == 0) {\n          harker.speaking = false;\n          harker.emit('stopped_speaking');\n        }\n      }\n      harker.speakingHistory.shift();\n      harker.speakingHistory.push(0 + (currentVolume > threshold));\n\n      looper();\n    }, interval);\n  };\n  looper();\n\n  return harker;\n};\n\nexport { hark as h };\n"],"names":["SyncWithStore","proto","propName","connectedCallback","disconnectedCallback","host","getElement","this","storeValue","uiStore","state","appendElement","call","removeElement","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","DyteAudioTile","constructor","hostRef","registerInstance","iconPack","defaultIconPack","t","useLanguage","audioEnabled","volume","onAudioUpdate","_ref","audioTrack","participant","stream","MediaStream","addTrack","calcVolume","participantChanged","_a","_b","hark","stop","removeListener","addListener","play","interval","on","dBs","prevVolume","audioVol","Math","round","render","defaults","meeting","size","config","states","shadowClass","h","Host","class","speaking","icon","mic_off","assign","variant","watchers","prototype","style","wildemitter","WildEmitter$1","mixin","isWildEmitter","event","groupName","fn","callbacks","hasGroup","group","undefined","func","_groupName","push","once","self","off","apply","releaseGroup","item","len","handlers","splice","indexOf","emit","listeners","args","slice","specialCallbacks","getWildcardCallbacks","concat","eventName","split","result","audioContextType","WildEmitter","window","AudioContext","webkitAudioContext","audioContext","options","harker","sourceNode","fftBins","analyser","smoothing","threshold","history","running","createAnalyser","fftSize","smoothingTimeConstant","Float32Array","frequencyBinCount","jquery","HTMLAudioElement","HTMLVideoElement","createMediaElementSource","createMediaStreamSource","connect","destination","suspend","resume","get","onstatechange","setThreshold","setInterval","disconnect","speakingHistory","looper","setTimeout","currentVolume","maxVolume","getFloatFrequencyData","ii","getMaxVolume","shift"],"sourceRoot":""}