{"version":3,"file":"static/js/8496.b2c6ca1c.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/dyte-ui-provider.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/size-505ade24.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host, a as getElement } from './index-08f4416b.js';\nimport { d as defaultConfig, l as uiState, u as uiStore } from './ui-store-11740cb4.js';\nimport { g as generateConfig, p as provideDyteDesignSystem, d as deepMerge } from './config-46f2bfe1.js';\nimport { g as getSize } from './size-505ade24.js';\nimport './keysIn-310f65c1.js';\nimport './isObjectLike-773b9473.js';\n\nconst dyteUiProviderCss = \"dyte-ui-provider{display:block;width:100%;height:100%}\";\nconst DyteUiProviderStyle0 = dyteUiProviderCss;\n\nconst LEAVE_ROOM_TIMER = 10000;\nconst DyteUiProvider = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.statesUpdate = createEvent(this, \"dyteStatesUpdate\", 7);\n        /** Config */\n        this.config = defaultConfig;\n        /** Whether to show setup screen or not */\n        this.showSetupScreen = false;\n        /**\n         * Do not render children until meeting is initialized\n         * @default false\n         */\n        this.noRenderUntilMeeting = false;\n        this.handleResize = () => {\n            this.size = getSize(this.host.clientWidth);\n        };\n        this.loadTheme = () => {\n            var _a;\n            if (this.config === defaultConfig) {\n                const { config } = generateConfig(this.meeting.self.config, this.meeting);\n                this.config = config;\n            }\n            if ((_a = this.config) === null || _a === void 0 ? void 0 : _a.designTokens) {\n                provideDyteDesignSystem(document.documentElement, this.config.designTokens);\n            }\n        };\n        this.roomJoinedListener = () => {\n            this.updateStates({ meeting: 'joined' });\n        };\n        this.waitlistedListener = () => {\n            this.updateStates({ meeting: 'waiting' });\n        };\n        this.roomLeftListener = ({ state }) => {\n            // Let socketConnectionUpdate listener handle this case.\n            if (state === 'disconnected' || state === 'failed')\n                return;\n            this.updateStates({ meeting: 'ended', roomLeftState: state });\n        };\n        this.mediaPermissionUpdateListener = ({ kind, message }) => {\n            if (['audio', 'video'].includes(kind)) {\n                if ((message === 'DENIED' || message === 'SYSTEM_DENIED') &&\n                    uiState.states.activeDebugger !== true) {\n                    const permissionModalSettings = {\n                        enabled: true,\n                        kind,\n                    };\n                    this.updateStates({ activePermissionsMessage: permissionModalSettings });\n                }\n            }\n        };\n        this.socketConnectionUpdateListener = ({ state }) => {\n            if (state === 'failed') {\n                setTimeout(() => {\n                    this.meeting.leave('disconnected');\n                }, LEAVE_ROOM_TIMER);\n            }\n        };\n    }\n    listenState(e) {\n        this.updateStates(e.detail);\n    }\n    updateStates(states) {\n        const newStates = Object.assign({}, uiState.states);\n        uiState.states = deepMerge(newStates, states);\n        this.statesUpdate.emit(uiState.states);\n    }\n    connectedCallback() {\n        if (typeof window !== 'undefined') {\n            this.authErrorListener = (ev) => {\n                if (ev.detail.message.includes('401')) {\n                    this.updateStates({ meeting: 'ended', roomLeftState: 'unauthorized' });\n                }\n            };\n            window.addEventListener('dyteError', this.authErrorListener);\n        }\n        this.onMeetingChange(this.meeting);\n        this.onIconPackChange(this.iconPack);\n        this.onTChange(this.t);\n        this.onConfigChange(this.config);\n        this.onSizeChange(this.size);\n        this.resizeObserver = new ResizeObserver(() => this.handleResize());\n        this.resizeObserver.observe(this.host);\n    }\n    disconnectedCallback() {\n        this.resizeObserver.disconnect();\n        window.removeEventListener('dyteError', this.authErrorListener);\n        if (!this.meeting)\n            return;\n        this.meeting.self.removeListener('roomLeft', this.roomLeftListener);\n        this.meeting.self.removeListener('roomJoined', this.roomJoinedListener);\n        this.meeting.self.removeListener('waitlisted', this.waitlistedListener);\n        this.meeting.self.removeListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n        this.meeting.meta.removeListener('socketConnectionUpdate', this.socketConnectionUpdateListener);\n    }\n    onMeetingChange(meeting) {\n        uiStore.state.meeting = meeting;\n        if (!meeting)\n            return;\n        this.updateStates({ viewType: meeting.meta.viewType });\n        this.loadTheme();\n        meeting.self.addListener('roomJoined', this.roomJoinedListener);\n        meeting.self.addListener('waitlisted', this.waitlistedListener);\n        meeting.self.addListener('roomLeft', this.roomLeftListener);\n        meeting.self.addListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n        meeting.meta.addListener('socketConnectionUpdate', this.socketConnectionUpdateListener);\n        if (meeting.connectedMeetings.supportsConnectedMeetings) {\n            meeting.connectedMeetings.once('changingMeeting', this.handleChangingMeeting);\n        }\n        if (meeting.self.roomJoined) {\n            this.updateStates({ meeting: 'joined' });\n        }\n        else {\n            if (this.showSetupScreen) {\n                this.updateStates({ meeting: 'setup' });\n            }\n            else {\n                meeting.joinRoom();\n            }\n        }\n        window.removeEventListener('dyteError', this.authErrorListener);\n    }\n    onIconPackChange(newIconPack) {\n        uiStore.state.iconPack = newIconPack;\n    }\n    onTChange(newT) {\n        uiStore.state.t = newT;\n    }\n    onConfigChange(config) {\n        uiStore.state.config = config;\n    }\n    onSizeChange(newSize) {\n        uiStore.state.size = newSize;\n    }\n    handleChangingMeeting(destinationMeetingId) {\n        this.updateStates({\n            activeBreakoutRoomsManager: Object.assign(Object.assign({}, uiState.states.activeBreakoutRoomsManager), { destinationMeetingId }),\n        });\n    }\n    render() {\n        return h(Host, { key: '5f67cfc77ed97b1c996a086441b793e643f7a40e' }, this.noRenderUntilMeeting && !this.meeting ? null : h(\"slot\", null));\n    }\n    get host() { return getElement(this); }\n    static get watchers() { return {\n        \"meeting\": [\"onMeetingChange\"],\n        \"iconPack\": [\"onIconPackChange\"],\n        \"t\": [\"onTChange\"],\n        \"config\": [\"onConfigChange\"],\n        \"size\": [\"onSizeChange\"]\n    }; }\n};\nDyteUiProvider.style = DyteUiProviderStyle0;\n\nexport { DyteUiProvider as dyte_ui_provider };\n","const sm = 640;\nconst md = 768;\nconst lg = 1080;\nconst xl = 2160;\nconst breakpoints = {\n\tsm: sm,\n\tmd: md,\n\tlg: lg,\n\txl: xl\n};\n\n/**\n * Get the screen breakpoint from a given width\n * @param width The width of the container\n * @returns The screen breakpoint value\n */\nconst getSize = (width) => {\n    if (width >= breakpoints.lg)\n        return 'lg';\n    else if (width >= breakpoints.md)\n        return 'md';\n    else\n        return 'sm';\n};\n\nexport { getSize as g };\n"],"names":["DyteUiProvider","constructor","hostRef","registerInstance","this","statesUpdate","createEvent","config","defaultConfig","showSetupScreen","noRenderUntilMeeting","handleResize","size","getSize","host","clientWidth","loadTheme","_a","generateConfig","meeting","self","designTokens","provideDyteDesignSystem","document","documentElement","roomJoinedListener","updateStates","waitlistedListener","roomLeftListener","_ref","state","roomLeftState","mediaPermissionUpdateListener","_ref2","kind","message","includes","uiState","states","activeDebugger","permissionModalSettings","enabled","activePermissionsMessage","socketConnectionUpdateListener","_ref3","setTimeout","leave","listenState","e","detail","newStates","Object","assign","deepMerge","emit","connectedCallback","window","authErrorListener","ev","addEventListener","onMeetingChange","onIconPackChange","iconPack","onTChange","t","onConfigChange","onSizeChange","resizeObserver","ResizeObserver","observe","disconnectedCallback","disconnect","removeEventListener","removeListener","meta","uiStore","viewType","addListener","connectedMeetings","supportsConnectedMeetings","once","handleChangingMeeting","roomJoined","joinRoom","newIconPack","newT","newSize","destinationMeetingId","activeBreakoutRoomsManager","render","h","Host","key","getElement","watchers","style","breakpoints","width"],"sourceRoot":""}