{"version":3,"file":"static/js/9910.1266bb7a.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/index-25aba8a9.js","../node_modules/@dytesdk/ui-kit/dist/esm/dyte-camera-toggle.entry.js"],"sourcesContent":["import { a as getElement } from './index-08f4416b.js';\nimport { o as appendElement, q as removeElement, u as uiStore } from './ui-store-11740cb4.js';\n\nfunction SyncWithStore() {\n    return function (proto, propName) {\n        const { connectedCallback, disconnectedCallback } = proto;\n        proto.connectedCallback = function () {\n            const host = getElement(this);\n            const value = host[propName];\n            if (!value) {\n                const storeValue = uiStore.state[propName];\n                host[propName] = storeValue;\n                appendElement(propName, host);\n            }\n            return connectedCallback === null || connectedCallback === void 0 ? void 0 : connectedCallback.call(this);\n        };\n        proto.disconnectedCallback = function () {\n            removeElement(propName, getElement(this));\n            return disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(this);\n        };\n    };\n}\n\nexport { SyncWithStore as S };\n","import { r as registerInstance, c as createEvent, h, H as Host } from './index-08f4416b.js';\nimport { a as defaultIconPack, c as useLanguage } from './ui-store-11740cb4.js';\nimport { S as SyncWithStore } from './index-25aba8a9.js';\n\nconst dyteCameraToggleCss = \":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}\";\nconst DyteCameraToggleStyle0 = dyteCameraToggleCss;\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst DyteCameraToggle = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.stateUpdate = createEvent(this, \"dyteStateUpdate\", 7);\n        this.videoUpdateListener = ({ videoEnabled }) => {\n            this.videoEnabled = videoEnabled;\n        };\n        this.stageStatusListener = () => {\n            this.stageStatus = this.meeting.stage.status;\n            this.canProduceVideo = this.meeting.self.permissions.canProduceVideo === 'ALLOWED';\n        };\n        this.mediaPermissionUpdateListener = ({ kind, message }) => {\n            if (kind === 'video') {\n                this.cameraPermission = message;\n            }\n        };\n        this.meetingPermissionsUpdateListener = (patch) => {\n            var _a;\n            if ((_a = patch === null || patch === void 0 ? void 0 : patch.media) === null || _a === void 0 ? void 0 : _a.video) {\n                this.canProduceVideo = this.meeting.self.permissions.canProduceVideo === 'ALLOWED';\n            }\n        };\n        /** Variant */\n        this.variant = 'button';\n        /** Icon pack */\n        this.iconPack = defaultIconPack;\n        /** Language */\n        this.t = useLanguage();\n        this.videoEnabled = false;\n        this.canProduceVideo = false;\n        this.cameraPermission = 'NOT_REQUESTED';\n        this.stageStatus = 'OFF_STAGE';\n        this.toggleCamera = () => {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n            (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.__internals__.logger.info('dyteCameraToggle::toggleCamera', {\n                media: {\n                    video: {\n                        enabled: Boolean((_c = (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self) === null || _c === void 0 ? void 0 : _c.videoEnabled),\n                        permission: this.cameraPermission,\n                        canProduce: (_f = (_e = (_d = this.meeting) === null || _d === void 0 ? void 0 : _d.self) === null || _e === void 0 ? void 0 : _e.permissions) === null || _f === void 0 ? void 0 : _f.canProduceVideo,\n                    },\n                },\n                webinar: {\n                    stageStatus: (_g = this.meeting) === null || _g === void 0 ? void 0 : _g.stage.status,\n                },\n                livestream: {\n                    stageStatus: (_j = (_h = this.meeting) === null || _h === void 0 ? void 0 : _h.stage) === null || _j === void 0 ? void 0 : _j.status,\n                },\n                moduleExists: {\n                    self: Boolean((_k = this.meeting) === null || _k === void 0 ? void 0 : _k.self),\n                },\n            });\n            if (this.hasPermissionError()) {\n                const permissionModalSettings = {\n                    enabled: true,\n                    kind: 'video',\n                };\n                this.stateUpdate.emit({ activePermissionsMessage: permissionModalSettings });\n                return false;\n            }\n            const self = (_l = this.meeting) === null || _l === void 0 ? void 0 : _l.self;\n            if (self == null || !this.canProduceVideo) {\n                return;\n            }\n            if (self.videoEnabled) {\n                self.disableVideo();\n            }\n            else {\n                self.enableVideo();\n            }\n        };\n    }\n    connectedCallback() {\n        this.meetingChanged(this.meeting);\n    }\n    disconnectedCallback() {\n        var _a, _b, _c, _d, _e, _f, _g;\n        (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.self.removeListener('videoUpdate', this.videoUpdateListener);\n        (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self.removeListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n        (_d = (_c = this.meeting) === null || _c === void 0 ? void 0 : _c.stage) === null || _d === void 0 ? void 0 : _d.removeListener('stageStatusUpdate', this.stageStatusListener);\n        (_g = (_f = (_e = this.meeting) === null || _e === void 0 ? void 0 : _e.self) === null || _f === void 0 ? void 0 : _f.permissions) === null || _g === void 0 ? void 0 : _g.removeListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n    }\n    meetingChanged(meeting) {\n        var _a, _b;\n        if (meeting != null) {\n            const { self, stage } = meeting;\n            this.canProduceVideo = this.meeting.self.permissions.canProduceVideo === 'ALLOWED';\n            this.cameraPermission = self.mediaPermissions.video || 'NOT_REQUESTED';\n            this.videoEnabled = self.videoEnabled;\n            this.stageStatus = meeting.stage.status;\n            self.addListener('videoUpdate', this.videoUpdateListener);\n            self.addListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n            stage === null || stage === void 0 ? void 0 : stage.addListener('stageStatusUpdate', this.stageStatusListener);\n            (_b = (_a = meeting === null || meeting === void 0 ? void 0 : meeting.self) === null || _a === void 0 ? void 0 : _a.permissions) === null || _b === void 0 ? void 0 : _b.addListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n        }\n    }\n    hasPermissionError() {\n        return this.cameraPermission === 'DENIED' || this.cameraPermission === 'SYSTEM_DENIED';\n    }\n    getState() {\n        let tooltipLabel = '';\n        let label = '';\n        let icon = '';\n        let classList = {};\n        let hasError = this.hasPermissionError();\n        let couldNotStart = this.cameraPermission === 'COULD_NOT_START';\n        if (this.videoEnabled && !hasError) {\n            label = this.t('video_on');\n            icon = this.iconPack.video_on;\n        }\n        else {\n            label = this.t('video_off');\n            icon = this.iconPack.video_off;\n            classList['red-icon'] = true;\n        }\n        if (couldNotStart) {\n            tooltipLabel = this.t('perm_could_not_start.video');\n        }\n        else if (this.cameraPermission === 'SYSTEM_DENIED') {\n            tooltipLabel = this.t('perm_sys_denied.video');\n        }\n        else if (this.cameraPermission === 'DENIED') {\n            tooltipLabel = this.t('perm_denied.video');\n        }\n        else {\n            tooltipLabel = this.videoEnabled ? this.t('disable_video') : this.t('enable_video');\n        }\n        return {\n            tooltipLabel,\n            label,\n            icon,\n            classList,\n            showWarning: hasError || couldNotStart,\n            disable: hasError,\n        };\n    }\n    render() {\n        var _a;\n        if (!this.canProduceVideo ||\n            ((_a = this.meeting) === null || _a === void 0 ? void 0 : _a.meta.viewType) === 'AUDIO_ROOM' ||\n            ['OFF_STAGE', 'REQUESTED_TO_JOIN_STAGE'].includes(this.stageStatus)) {\n            return null;\n        }\n        const { tooltipLabel, label, icon, classList, showWarning, disable } = this.getState();\n        return (h(Host, { title: label }, h(\"dyte-tooltip\", { kind: \"block\", label: tooltipLabel, part: \"tooltip\" }, h(\"dyte-controlbar-button\", { part: \"controlbar-button\", size: this.size, iconPack: this.iconPack, class: classList, variant: this.variant, label: label, icon: icon, onClick: this.toggleCamera, showWarning: showWarning, disabled: disable }))));\n    }\n    static get watchers() { return {\n        \"meeting\": [\"meetingChanged\"]\n    }; }\n};\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"meeting\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"size\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"iconPack\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteCameraToggle.prototype, \"t\", void 0);\nDyteCameraToggle.style = DyteCameraToggleStyle0;\n\nexport { DyteCameraToggle as dyte_camera_toggle };\n"],"names":["SyncWithStore","proto","propName","connectedCallback","disconnectedCallback","host","getElement","this","storeValue","uiStore","state","appendElement","call","removeElement","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","DyteCameraToggle","constructor","hostRef","registerInstance","stateUpdate","createEvent","videoUpdateListener","_ref","videoEnabled","stageStatusListener","stageStatus","meeting","stage","status","canProduceVideo","self","permissions","mediaPermissionUpdateListener","_ref2","kind","message","cameraPermission","meetingPermissionsUpdateListener","patch","_a","media","video","variant","iconPack","defaultIconPack","t","useLanguage","toggleCamera","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","__internals__","logger","info","enabled","Boolean","permission","canProduce","webinar","livestream","moduleExists","hasPermissionError","permissionModalSettings","emit","activePermissionsMessage","disableVideo","enableVideo","meetingChanged","removeListener","mediaPermissions","addListener","getState","tooltipLabel","label","icon","classList","hasError","couldNotStart","video_on","video_off","showWarning","disable","render","meta","viewType","includes","h","Host","title","part","size","class","onClick","disabled","watchers","prototype","style"],"sourceRoot":""}