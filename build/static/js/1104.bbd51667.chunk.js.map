{"version":3,"file":"static/js/1104.bbd51667.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/dyte-mic-toggle.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/index-25aba8a9.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host } from './index-08f4416b.js';\nimport { a as defaultIconPack, c as useLanguage } from './ui-store-11740cb4.js';\nimport { S as SyncWithStore } from './index-25aba8a9.js';\n\nconst dyteMicToggleCss = \":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}\";\nconst DyteMicToggleStyle0 = dyteMicToggleCss;\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n        r = Reflect.decorate(decorators, target, key, desc);\n    else\n        for (var i = decorators.length - 1; i >= 0; i--)\n            if (d = decorators[i])\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst DyteMicToggle = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.stateUpdate = createEvent(this, \"dyteStateUpdate\", 7);\n        this.audioUpdateListener = ({ audioEnabled }) => {\n            this.audioEnabled = audioEnabled;\n        };\n        this.stageStatusListener = () => {\n            this.stageStatus = this.meeting.stage.status;\n            this.canProduceAudio = this.meeting.self.permissions.canProduceAudio === 'ALLOWED';\n        };\n        this.mediaPermissionUpdateListener = ({ kind, message }) => {\n            if (kind === 'audio') {\n                this.micPermission = message;\n            }\n        };\n        this.meetingPermissionsUpdateListener = (patch) => {\n            var _a;\n            if ((_a = patch === null || patch === void 0 ? void 0 : patch.media) === null || _a === void 0 ? void 0 : _a.audio) {\n                this.canProduceAudio = this.meeting.self.permissions.canProduceAudio === 'ALLOWED';\n            }\n        };\n        /** Variant */\n        this.variant = 'button';\n        /** Icon pack */\n        this.iconPack = defaultIconPack;\n        /** Language */\n        this.t = useLanguage();\n        this.audioEnabled = false;\n        this.canProduceAudio = false;\n        this.micPermission = 'NOT_REQUESTED';\n        this.stageStatus = 'OFF_STAGE';\n        this.toggleMic = () => {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n            (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.__internals__.logger.info('dyteMicToggle::toggleMic', {\n                media: {\n                    audio: {\n                        enabled: Boolean((_c = (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self) === null || _c === void 0 ? void 0 : _c.audioEnabled),\n                        permission: this.micPermission,\n                        canProduce: (_f = (_e = (_d = this.meeting) === null || _d === void 0 ? void 0 : _d.self) === null || _e === void 0 ? void 0 : _e.permissions) === null || _f === void 0 ? void 0 : _f.canProduceAudio,\n                    },\n                },\n                webinar: {\n                    stageStatus: (_h = (_g = this.meeting) === null || _g === void 0 ? void 0 : _g.stage) === null || _h === void 0 ? void 0 : _h.status,\n                },\n                livestream: {\n                    stageStatus: (_k = (_j = this.meeting) === null || _j === void 0 ? void 0 : _j.stage) === null || _k === void 0 ? void 0 : _k.status,\n                },\n                moduleExists: {\n                    self: Boolean((_l = this.meeting) === null || _l === void 0 ? void 0 : _l.self),\n                },\n            });\n            if (this.hasPermissionError()) {\n                const permissionModalSettings = {\n                    enabled: true,\n                    kind: 'audio',\n                };\n                this.stateUpdate.emit({ activePermissionsMessage: permissionModalSettings });\n                return false;\n            }\n            const self = (_m = this.meeting) === null || _m === void 0 ? void 0 : _m.self;\n            if (self == null || !this.canProduceAudio) {\n                return;\n            }\n            if (self.audioEnabled) {\n                self.disableAudio();\n            }\n            else {\n                self.enableAudio();\n            }\n        };\n    }\n    connectedCallback() {\n        this.meetingChanged(this.meeting);\n    }\n    disconnectedCallback() {\n        var _a, _b, _c, _d, _e, _f, _g;\n        (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.self.removeListener('audioUpdate', this.audioUpdateListener);\n        (_b = this.meeting) === null || _b === void 0 ? void 0 : _b.self.removeListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n        (_d = (_c = this.meeting) === null || _c === void 0 ? void 0 : _c.stage) === null || _d === void 0 ? void 0 : _d.removeListener('stageStatusUpdate', this.stageStatusListener);\n        (_g = (_f = (_e = this.meeting) === null || _e === void 0 ? void 0 : _e.self) === null || _f === void 0 ? void 0 : _f.permissions) === null || _g === void 0 ? void 0 : _g.removeListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n    }\n    meetingChanged(meeting) {\n        var _a, _b;\n        if (meeting != null) {\n            const { self, stage } = meeting;\n            this.canProduceAudio = this.meeting.self.permissions.canProduceAudio === 'ALLOWED';\n            this.micPermission = meeting.self.mediaPermissions.audio || 'NOT_REQUESTED';\n            this.audioEnabled = self.audioEnabled;\n            this.stageStatus = meeting.stage.status;\n            self.addListener('audioUpdate', this.audioUpdateListener);\n            self.addListener('mediaPermissionUpdate', this.mediaPermissionUpdateListener);\n            stage === null || stage === void 0 ? void 0 : stage.addListener('stageStatusUpdate', this.stageStatusListener);\n            (_b = (_a = meeting.self) === null || _a === void 0 ? void 0 : _a.permissions) === null || _b === void 0 ? void 0 : _b.addListener('permissionsUpdate', this.meetingPermissionsUpdateListener);\n        }\n    }\n    hasPermissionError() {\n        return this.micPermission === 'DENIED' || this.micPermission === 'SYSTEM_DENIED';\n    }\n    getState() {\n        let tooltipLabel = '';\n        let label = '';\n        let icon = '';\n        let classList = {};\n        let hasError = this.hasPermissionError();\n        let couldNotStart = this.micPermission === 'COULD_NOT_START';\n        if (this.audioEnabled && !hasError) {\n            label = this.t('mic_on');\n            icon = this.iconPack.mic_on;\n        }\n        else {\n            label = this.t('mic_off');\n            icon = this.iconPack.mic_off;\n            classList['red-icon'] = true;\n        }\n        if (couldNotStart) {\n            tooltipLabel = this.t('perm_could_not_start.audio');\n        }\n        else if (this.micPermission === 'SYSTEM_DENIED') {\n            tooltipLabel = this.t('perm_sys_denied.audio');\n        }\n        else if (this.micPermission === 'DENIED') {\n            tooltipLabel = this.t('perm_denied.audio');\n        }\n        else {\n            tooltipLabel = this.audioEnabled ? this.t('disable_mic') : this.t('enable_mic');\n        }\n        return {\n            tooltipLabel,\n            label,\n            icon,\n            classList,\n            showWarning: hasError || couldNotStart,\n            disable: hasError,\n        };\n    }\n    render() {\n        if (!this.canProduceAudio ||\n            ['OFF_STAGE', 'REQUESTED_TO_JOIN_STAGE'].includes(this.stageStatus)) {\n            return null;\n        }\n        const { tooltipLabel, label, icon, classList, showWarning, disable } = this.getState();\n        return (h(Host, { title: label }, h(\"dyte-tooltip\", { kind: \"block\", label: tooltipLabel, part: \"tooltip\" }, h(\"dyte-controlbar-button\", { part: \"controlbar-button\", icon: icon, label: label, size: this.size, iconPack: this.iconPack, variant: this.variant, class: classList, onClick: this.toggleMic, showWarning: showWarning, disabled: disable }))));\n    }\n    static get watchers() { return {\n        \"meeting\": [\"meetingChanged\"]\n    }; }\n};\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"meeting\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"size\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"iconPack\", void 0);\n__decorate([\n    SyncWithStore()\n], DyteMicToggle.prototype, \"t\", void 0);\nDyteMicToggle.style = DyteMicToggleStyle0;\n\nexport { DyteMicToggle as dyte_mic_toggle };\n","import { a as getElement } from './index-08f4416b.js';\nimport { o as appendElement, q as removeElement, u as uiStore } from './ui-store-11740cb4.js';\n\nfunction SyncWithStore() {\n    return function (proto, propName) {\n        const { connectedCallback, disconnectedCallback } = proto;\n        proto.connectedCallback = function () {\n            const host = getElement(this);\n            const value = host[propName];\n            if (!value) {\n                const storeValue = uiStore.state[propName];\n                host[propName] = storeValue;\n                appendElement(propName, host);\n            }\n            return connectedCallback === null || connectedCallback === void 0 ? void 0 : connectedCallback.call(this);\n        };\n        proto.disconnectedCallback = function () {\n            removeElement(propName, getElement(this));\n            return disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(this);\n        };\n    };\n}\n\nexport { SyncWithStore as S };\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","DyteMicToggle","constructor","hostRef","registerInstance","this","stateUpdate","createEvent","audioUpdateListener","_ref","audioEnabled","stageStatusListener","stageStatus","meeting","stage","status","canProduceAudio","self","permissions","mediaPermissionUpdateListener","_ref2","kind","message","micPermission","meetingPermissionsUpdateListener","patch","_a","media","audio","variant","iconPack","defaultIconPack","t","useLanguage","toggleMic","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","__internals__","logger","info","enabled","Boolean","permission","canProduce","webinar","livestream","moduleExists","hasPermissionError","permissionModalSettings","emit","activePermissionsMessage","disableAudio","enableAudio","connectedCallback","meetingChanged","disconnectedCallback","removeListener","mediaPermissions","addListener","getState","tooltipLabel","label","icon","classList","hasError","couldNotStart","mic_on","mic_off","showWarning","disable","render","includes","h","Host","title","part","size","class","onClick","disabled","watchers","SyncWithStore","prototype","style","proto","propName","host","getElement","storeValue","uiStore","state","appendElement","call","removeElement"],"sourceRoot":""}