/*! For license information please see 8451.9c70b871.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkjagruti_software=self.webpackChunkjagruti_software||[]).push([[8451],{3929:(e,s,l)=>{l.d(s,{A:()=>n});var t=l(58355),a=l(16260),i=l(43666);function n(e,s){(0,i.A)(2,arguments);var l=(0,a.A)(e),n=(0,t.A)(s);return l.setMilliseconds(n),l}},10812:(e,s,l)=>{l.d(s,{A:()=>n});var t=l(58355),a=l(16260),i=l(43666);function n(e,s){(0,i.A)(2,arguments);var l=(0,a.A)(e),n=(0,t.A)(s);return l.setMinutes(n),l}},14028:(e,s,l)=>{l.d(s,{A:()=>n});var t=l(58355),a=l(16260),i=l(43666);function n(e,s){(0,i.A)(2,arguments);var l=(0,a.A)(e),n=(0,t.A)(s);return l.setSeconds(n),l}},15175:(e,s,l)=>{l.d(s,{A:()=>n});var t=l(60129),a=l(16260),i=l(43666);function n(e,s){var l;(0,i.A)(1,arguments);var n=function(e){(0,i.A)(1,arguments);var s=(0,a.A)(e);return s.setSeconds(0,0),s}((0,a.A)(e.start)),r=(0,a.A)(e.end),o=n.getTime(),d=r.getTime();if(o>=d)throw new RangeError("Invalid interval");var c=[],m=n,u=Number(null!==(l=null===s||void 0===s?void 0:s.step)&&void 0!==l?l:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number equal to or greater than 1");for(;m.getTime()<=d;)c.push((0,a.A)(m)),m=(0,t.A)(m,u);return c}},45479:(e,s,l)=>{l.d(s,{A:()=>n});var t=l(58355),a=l(16260),i=l(43666);function n(e,s){(0,i.A)(2,arguments);var l=(0,a.A)(e),n=(0,t.A)(s);return isNaN(n)?new Date(NaN):n?(l.setDate(l.getDate()+n),l):l}},51010:(e,s,l)=>{l.d(s,{A:()=>i});var t=l(16260),a=l(43666);function i(e,s){var l;(0,a.A)(1,arguments);var i=e||{},n=(0,t.A)(i.start),r=(0,t.A)(i.end).getTime();if(!(n.getTime()<=r))throw new RangeError("Invalid interval");var o=[],d=n;d.setHours(0,0,0,0);var c=Number(null!==(l=null===s||void 0===s?void 0:s.step)&&void 0!==l?l:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;d.getTime()<=r;)o.push((0,t.A)(d)),d.setDate(d.getDate()+c),d.setHours(0,0,0,0);return o}},60129:(e,s,l)=>{l.d(s,{A:()=>r});var t=l(58355),a=l(64410),i=l(43666),n=6e4;function r(e,s){(0,i.A)(2,arguments);var l=(0,t.A)(s);return(0,a.A)(e,l*n)}},72932:(e,s,l)=>{l.r(s),l.d(s,{default:()=>is});var t=l(65043),a=l(73216),i=l(35475),n=l(90864),r=l.n(n),o=(l(56005),l(94983)),d=l(22166),c=l(52336),m=l(70579);const u=(0,d.Ng)(e=>({}))(()=>{const e=localStorage.getItem("micrologin"),s=e?JSON.parse(e).token:null,{hasPermission:l}=(0,c.S)(s),t=l("SETTING","ROLESSETTING","READ"),n=(0,a.zy)(),d=(o.Pe||[]).filter(e=>!("roles"===e.id&&!t));return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"chat-leftsidebar",children:[(0,m.jsx)("div",{className:"ps-4 pe-3 pt-4 mb-",children:(0,m.jsx)("div",{className:"d-flex align-items-start",children:(0,m.jsxs)("div",{className:"d-flex justify-content-between w-100 mb-2",children:[(0,m.jsx)("h5",{className:"pb-0",children:"Setting"}),(0,m.jsx)("button",{onClick:()=>{var e=document.documentElement.clientWidth;const s=document.querySelector(".chat-message-list");e<992&&(s.classList.contains("show-chat-message-list")?s.classList.remove("show-chat-message-list"):s.classList.add("show-chat-message-list"))},type:"button",className:"btn btn-sm px-3 fs-16 data-sidebar-button topnav-hamburger",id:"topnav-hamburger-icon",children:(0,m.jsxs)("span",{className:"hamburger-icon",children:[(0,m.jsx)("span",{}),(0,m.jsx)("span",{}),(0,m.jsx)("span",{})]})})]})})}),(0,m.jsx)(r(),{className:"chat-room-list",children:(0,m.jsx)("div",{className:"chat-message-list",children:(0,m.jsx)("ul",{className:"list-unstyled chat-list chat-user-list users-list",id:"userList",children:(d||[]).map((e,s)=>(0,m.jsx)("li",{className:o.Pe.id===n.pathname?"active":"",children:(0,m.jsx)(i.N_,{to:e.link,children:(0,m.jsxs)("div",{className:"d-flex align-items-center",children:[(0,m.jsxs)("div",{className:"flex-shrink-0 chat-user-img online align-self-center me-2 ms-0",children:[(0,m.jsx)("div",{className:"avatar-xxs",children:(0,m.jsx)("i",{className:"".concat(e.icon," fs-4")})}),(0,m.jsx)("span",{className:"user-status"})]}),(0,m.jsx)("div",{className:"flex-grow-1 overflow-hidden",children:(0,m.jsx)("p",{className:"text-truncate font-semi-bold fs-15 mb-0",children:e.label||""})})]})})}))})})})]})})});var x=l(99904);const h=e=>(0,m.jsx)(t.Fragment,{children:(0,m.jsx)("div",{className:"mt-3"})});var p=l(90424),j=l(24410),g=l(89379),v=l(80045),b=l(88682),A=l(6221),N=l(12327),f=l(22345),y=l(7493),C=l(72679),S=l(23194),T=l(26259),E=l(80899),w=l(86897),O=l(98093);const P=["2d echo charges","ac charges","airbed charges","ambulance charges","attendant/care taker charges","bio medical waste charges","bsl charges","ct scan","diaper charges","medical consumables","discharge medicines","doctor consultation charges","doppler charges","dressing charges","drug test","ecg charges","ect charges","emergency charges","emergency hospital charges","enema","extra food charges","hospital charges","injectables","mrd charges","mri charges","nebulisation charges","nursing charges","opd consultation charges","other charges","medicines","physiotherapy charges","procedure charges","psychological counselling","psychological test","refund","registration charges","room charges","sleep study charges","travel expenses","upt charges","usg charges","x-ray charges"],k=(0,d.Ng)(e=>({centers:e.Center.data,userCenters:e.User.centerAccess}))(e=>{let{toggle:s,centers:l,userCenters:a}=e;const i=(0,d.wA)(),[n,r]=(0,t.useState)([]),o=e=>{const s=[...n],l=e.target.name,t=e.target.value;s[e.target.id][l]=t,r(s)},c=(0,w.Wx)({enableReinitialize:!0,initialValues:{items:n,centers:l.map(e=>e._id)},validationSchema:E.Ik({items:E.YO().test("notEmpty","Atleas one medicine is required",e=>!(!e||0===e.length)),centers:E.YO().test("notEmpty","At least one center is required",e=>!(!e||0===e.length))}),onSubmit:e=>{i((0,O.sQ7)({items:n,centers:e.centers,centerIds:a})),r([]),s(),c.resetForm()}});return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)("div",{children:(0,m.jsx)(A.A,{onSubmit:e=>(e.preventDefault(),c.handleSubmit(),!1),className:"needs-validation",action:"#",children:(0,m.jsxs)(N.A,{className:"ps-3 pe-3",children:[(0,m.jsxs)(f.A,{xs:12,children:[(0,m.jsx)(y.A,{children:"Centers"}),(0,m.jsx)("div",{className:"d-flex gap-3",children:(l||[]).map(e=>{var s,l;return(0,m.jsxs)("div",{children:[(0,m.jsx)(C.A,{type:"checkbox",value:e._id,checked:null===(s=c.values)||void 0===s||null===(l=s.centers)||void 0===l?void 0:l.includes(e._id),name:"centers",onChange:c.handleChange,onBlur:c.handleBlur}),(0,m.jsx)(y.A,{className:"ms-1",children:e.title})]})})}),c.touched.centers&&c.errors.centers?(0,m.jsx)(S.A,{type:"invalid",className:"d-block",children:c.errors.centers}):null]}),(0,m.jsxs)(f.A,{className:"mb-3 pb-2 border-bottom",xs:2,md:3,children:["Name",(0,m.jsx)("span",{className:"text-danger",children:"*"})]}),(0,m.jsx)(f.A,{className:"mb-3 pb-2 border-bottom",xs:2,md:2,children:"Unit"}),(0,m.jsx)(f.A,{className:"mb-3 pb-2 border-bottom",xs:2,md:2,children:"Cost"}),(0,m.jsx)(f.A,{className:"mb-3 pb-2 border-bottom",xs:2,md:3,children:"Category"}),(0,m.jsx)(f.A,{className:"mb-3 pb-2 border-bottom",xs:4,md:2}),(n||[]).map((e,s)=>(0,m.jsxs)(t.Fragment,{children:[(0,m.jsx)(f.A,{xs:2,md:3,children:(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsx)(C.A,{required:!0,bsSize:"sm",id:s,onChange:o,name:"name",value:e.drugName,type:"text",className:"form-control"})})}),(0,m.jsx)(f.A,{xs:2,md:2,children:(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsx)(C.A,{bsSize:"sm",id:s,onChange:o,name:"unit",value:e.unit,type:"text",className:"form-control"})})}),(0,m.jsx)(f.A,{xs:2,md:2,children:(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsx)(C.A,{bsSize:"sm",id:s,onChange:o,name:"cost",value:e.cost,type:"text",className:"form-control"})})}),(0,m.jsx)(f.A,{xs:2,md:3,children:(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsxs)(C.A,{bsSize:"sm",id:s,onChange:o,name:"category",value:e.category||"",type:"select",className:"form-control",children:[(0,m.jsx)("option",{defaultValue:"",selected:!0,children:"Select Category"}),P.map(e=>(0,m.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})})}),(0,m.jsx)(f.A,{xs:1,md:2,children:(0,m.jsx)(T.A,{size:"sm",onClick:()=>(e=>{const s=[...n];s.splice(e,1),r(s)})(s),color:"danger",children:(0,m.jsx)("i",{className:"ri-delete-bin-6-line fs-14 text-white"})})})]},s)),(0,m.jsx)(f.A,{xs:12,className:"mb-3",children:c.touched.items&&c.errors.items?(0,m.jsx)(S.A,{type:"invalid",className:"d-block",children:c.errors.items}):null}),(0,m.jsx)(f.A,{children:(0,m.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,m.jsx)(T.A,{size:"sm",type:"button",color:"secondary",outline:!0,onClick:()=>{r([...n,{name:"",unit:"",cost:""}])},children:"Add"}),(0,m.jsx)(T.A,{size:"sm",type:"submit",color:"primary",outline:!0,children:"Save"})]})})]})})})})}),I=["modal","toggle"],D=e=>{let{modal:s,toggle:l}=e,a=(0,v.A)(e,I);return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(b.A,{size:"xl",isOpen:s,toggle:l,centered:!0,title:"Add Bill Items",children:(0,m.jsx)(k,(0,g.A)({toggle:l},a))})})};var R=l(77026),M=l(58509),F=l(9790),L=l(96371),z=l(12934),U=l(18353);const B=e=>{let{toggleForm:s,setSearch:l}=e;const[a,i]=(0,t.useState)("");return(0,t.useEffect)(()=>{const e=setTimeout(()=>{l(a)},500);return()=>clearTimeout(e)},[a,l]),(0,m.jsx)(U.A,{className:"p-3 bg-white",children:(0,m.jsxs)(N.A,{className:"gy-2 gx-3 align-items-center",children:[(0,m.jsx)(f.A,{xs:"12",sm:"8",md:"6",lg:"4",children:(0,m.jsxs)("div",{className:"position-relative",children:[(0,m.jsx)(C.A,{type:"text",value:a,onChange:e=>i(e.target.value),className:"form-control pe-5",placeholder:"Search for name","aria-label":"Search for name"}),(0,m.jsx)("i",{className:"ri-search-line position-absolute end-0 top-50 translate-middle-y me-3 text-muted",style:{pointerEvents:"none"}})]})}),(0,m.jsx)(f.A,{xs:"12",sm:"4",md:"6",lg:"4",className:"ms-sm-auto text-sm-end",children:(0,m.jsxs)(T.A,{className:"text-white w-100 w-sm-auto",color:"success",onClick:s,children:[(0,m.jsx)("i",{className:"ri-add-fill me-1 align-middle"})," Add Item"]})})]})})};var q=l(7867),V=l(3655);const G=e=>{let{updateItem:s,setUpdateItem:l}=e;const a=(0,d.wA)(),i=null===s||void 0===s?void 0:s.formData,n=(0,w.Wx)({enableReinitialize:!0,initialValues:{id:(null===i||void 0===i?void 0:i._id)||"",name:i.name||"",unit:i.unit||"",cost:i.cost||""},validationSchema:E.Ik({name:E.Yj().required("Please Enter Item Name")}),onSubmit:e=>{a((0,O.k2)(e)),l({isForm:!1,formIndex:void 0,formData:void 0}),n.resetForm()}});return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(A.A,{onSubmit:e=>(e.preventDefault(),n.handleSubmit(),!1),className:"needs-validation",action:"#",children:(0,m.jsxs)(N.A,{className:"align-items-center",children:[(0,m.jsxs)(f.A,{className:"mb-3 pb-2 border-bottom",xs:2,md:4,children:[(0,m.jsx)(C.A,{onChange:n.handleChange,name:"name",onBlur:n.handleBlur,value:n.values.name||"",bsSize:"sm"}),n.touched.name&&n.errors.name?(0,m.jsx)(S.A,{type:"invalid",children:(0,m.jsx)("div",{className:"font-size-14",children:n.errors.name})}):null]}),(0,m.jsx)(f.A,{className:"mb-3 pb-2 border-bottom",xs:2,md:4,children:(0,m.jsx)(C.A,{onChange:n.handleChange,name:"unit",onBlur:n.handleBlur,value:n.values.unit||"",bsSize:"sm"})}),(0,m.jsx)(f.A,{className:"mb-3 pb-2 border-bottom",xs:2,md:3,children:(0,m.jsx)(C.A,{onChange:n.handleChange,name:"cost",onBlur:n.handleBlur,value:n.values.cost||"",bsSize:"sm"})}),(0,m.jsxs)(f.A,{className:"mb-3 pb-2 border-bottom align-items-end d-flex",xs:4,md:1,children:[(0,m.jsx)(T.A,{type:"button",onClick:()=>{l({isForm:!1,formIndex:void 0,formData:void 0})},className:"me-3",size:"sm",color:"danger",outline:!0,children:(0,m.jsx)("i",{className:"ri-close-circle-line fs-5"})}),(0,m.jsx)(T.A,{type:"submit",size:"sm",color:"success",children:(0,m.jsx)("i",{className:"ri-check-line fs-5"})})]})]})})})},Y=e=>{let{items:s,totalItems:l,totalPages:a,currentPage:i,setDeleteItem:n,itemsPerPage:r,onPageChange:o,onItemsPerPageChange:d}=e;const[c,u]=(0,t.useState)({isForm:!1,formIndex:void 0,formData:void 0}),x=(i-1)*r+1,h=Math.min(x+s.length-1,l);return(0,m.jsxs)("div",{className:"p-4 bg-light rounded shadow-sm",children:[(0,m.jsxs)(N.A,{className:"mb-3 align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(C.A,{type:"select",value:r,onChange:e=>d(Number(e.target.value)),style:{width:"120px"},children:[5,10,25,50].map(e=>(0,m.jsx)("option",{value:e,children:e},e))})}),(0,m.jsxs)(f.A,{className:"text-end text-muted",children:["Page ",i," of ",a]})]}),(0,m.jsxs)(V.A,{bordered:!0,hover:!0,className:"bg-white",children:[(0,m.jsx)("thead",{className:"table-primary text-center",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Name"}),(0,m.jsx)("th",{children:"Unit"}),(0,m.jsx)("th",{children:"Cost"}),(0,m.jsx)("th",{children:"Actions"})]})}),(0,m.jsx)("tbody",{children:(s||[]).map((e,s)=>(0,m.jsx)("tr",{children:c.isForm&&c.formIndex===s?(0,m.jsx)("td",{colSpan:"4",children:(0,m.jsx)(G,{updateItem:c,setUpdateItem:u})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"text-capitalize fw-semibold text-primary",children:e.name}),(0,m.jsx)("td",{children:e.unit||""}),(0,m.jsx)("td",{children:e.cost||""}),(0,m.jsxs)("td",{children:[(0,m.jsx)(T.A,{size:"sm",color:"info",className:"me-2",onClick:()=>((e,s)=>u({isForm:!0,formIndex:e,formData:s}))(s,e),children:(0,m.jsx)("i",{className:"ri-quill-pen-line"})}),(0,m.jsx)(T.A,{size:"sm",color:"danger",outline:!0,onClick:()=>n({isOpen:!0,data:e._id}),children:(0,m.jsx)("i",{className:"ri-close-circle-line"})})]})]})},e._id))})]}),(0,m.jsxs)(N.A,{className:"mt-4 justify-content-between align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:1===i,onClick:()=>o(i-1),children:"\u2190 Previous"})}),(0,m.jsxs)(f.A,{className:"text-center text-muted",children:["Showing ",x,"\u2013",h," of ",l]}),(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:i===a,onClick:()=>o(i+1),children:"Next \u2192"})})]})]})};var _=l(98139),W=l.n(_);const H=e=>{let{toggleForm:s,setSearchadv:l}=e;const[a,i]=(0,t.useState)("");return(0,t.useEffect)(()=>{const e=setTimeout(()=>{l(a)},500);return()=>clearTimeout(e)},[a,l]),(0,m.jsx)(U.A,{className:"p-3 bg-white",children:(0,m.jsxs)(N.A,{className:"gy-2 gx-3 align-items-center",children:[(0,m.jsx)(f.A,{xs:"12",sm:"8",md:"6",lg:"4",children:(0,m.jsxs)("div",{className:"position-relative",children:[(0,m.jsx)(C.A,{type:"text",value:a,onChange:e=>i(e.target.value),className:"form-control",placeholder:"Search for name"}),(0,m.jsx)("i",{className:"ri-search-line position-absolute end-0 top-50 translate-middle-y me-3 text-muted"})]})}),(0,m.jsx)(f.A,{xs:"12",sm:"4",md:"6",lg:"4",className:"ms-sm-auto text-sm-end",children:(0,m.jsxs)(T.A,{className:"text-white w-100 w-sm-auto",color:"success",onClick:s,children:[(0,m.jsx)("i",{className:"ri-add-fill me-1 align-bottom"})," Add Item"]})})]})})},X=(0,d.Ng)(e=>({items:e.Setting.paymentAccounts}))(e=>{let{items:s,totalItems:l,totalPages:t,currentPage:a,itemsPerPage:i,onPageChange:n,onItemsPerPageChange:r,setDeleteItem:o}=e;const d=(a-1)*i+1,c=Math.min(d+(null===s||void 0===s?void 0:s.length)-1,l);return(0,m.jsxs)("div",{className:"p-4 bg-light rounded shadow-sm",children:[(0,m.jsxs)(N.A,{className:"mb-3 align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(C.A,{type:"select",value:i,onChange:e=>r(Number(e.target.value)),style:{width:"120px"},children:[5,10,25,50].map(e=>(0,m.jsx)("option",{value:e,children:e},e))})}),(0,m.jsxs)(f.A,{className:"text-end text-muted",children:["Page ",a," of ",t]})]}),(0,m.jsxs)(V.A,{bordered:!0,hover:!0,className:"bg-white",children:[(0,m.jsx)("thead",{className:"table-primary text-center",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Name"}),(0,m.jsx)("th",{children:"Actions"})]})}),(0,m.jsx)("tbody",{children:(s||[]).map(e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"text-capitalize fw-semibold text-primary",children:e.name}),(0,m.jsx)("td",{className:"text-center",children:(0,m.jsx)(T.A,{size:"sm",color:"danger",outline:!0,onClick:()=>o({isOpen:!0,data:e._id}),children:(0,m.jsx)("i",{className:"ri-close-circle-line"})})})]},e._id))})]}),(0,m.jsxs)(N.A,{className:"mt-4 justify-content-between align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:1===a,onClick:()=>n(a-1),children:"\u2190 Previous"})}),(0,m.jsxs)(f.A,{className:"text-center text-muted",children:["Showing ",d,"\u2013",c," of ",l]}),(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:a===t,onClick:()=>n(a+1),children:"Next \u2192"})})]})]})}),J=(0,d.Ng)(e=>({centers:e.Center.data,userCenters:e.User.centerAccess}))(e=>{let{toggle:s,centers:l,userCenters:a}=e;const i=(0,d.wA)(),n=(0,w.Wx)({enableReinitialize:!0,initialValues:{name:"",centers:l.map(e=>e._id)},validationSchema:E.Ik({name:E.Yj().required("Please Enter Account Name"),centers:E.YO().test("notEmpty","At least one center is required",e=>!(!e||0===e.length))}),onSubmit:e=>{i((0,O.rvJ)((0,g.A)((0,g.A)({},e),{},{centerIds:a}))),s(),n.resetForm()}});return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)("div",{children:(0,m.jsx)(A.A,{onSubmit:e=>(e.preventDefault(),n.handleSubmit(),!1),className:"needs-validation",action:"#",children:(0,m.jsxs)(N.A,{className:"ps-3 pe-3",children:[(0,m.jsxs)(f.A,{xs:12,children:[(0,m.jsx)(y.A,{children:"Centers"}),(0,m.jsx)("div",{className:"d-flex gap-3",children:(l||[]).map(e=>{var s,l;return(0,m.jsxs)("div",{children:[(0,m.jsx)(C.A,{type:"checkbox",value:e._id,checked:null===(s=n.values)||void 0===s||null===(l=s.centers)||void 0===l?void 0:l.includes(e._id),name:"centers",onChange:n.handleChange,onBlur:n.handleBlur}),(0,m.jsx)(y.A,{className:"ms-1",children:e.title})]})})}),n.touched.centers&&n.errors.centers?(0,m.jsx)(S.A,{type:"invalid",className:"d-block",children:n.errors.centers}):null]}),(0,m.jsxs)(f.A,{xs:2,md:4,children:[(0,m.jsx)(y.A,{children:"Account Name"}),(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsx)(C.A,{required:!0,bsSize:"sm",onChange:n.handleChange,name:"name",value:n.values.name,type:"text",className:"form-control"})}),n.touched.items&&n.errors.items?(0,m.jsx)(S.A,{type:"invalid",className:"d-block",children:n.errors.items}):null]}),(0,m.jsx)(f.A,{xs:12,children:(0,m.jsx)("div",{className:"d-flex justify-content-end",children:(0,m.jsx)(T.A,{size:"sm",type:"submit",color:"primary",outline:!0,children:"Save"})})})]})})})})}),K=["modal","toggle"],Q=e=>{let{modal:s,toggle:l}=e,a=(0,v.A)(e,K);return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(b.A,{size:"xl",isOpen:s,toggle:l,centered:!0,title:"Add Bill Items",children:(0,m.jsx)(J,(0,g.A)({toggle:l},a))})})},Z=(0,d.Ng)(e=>{var s,l,t,a,i,n,r,o,d,c;return{centers:e.User.centerAccess,billItems:(null===(s=e.Setting)||void 0===s?void 0:s.invoiceProcedures)||[],totalCount:(null===(l=e.Setting)||void 0===l?void 0:l.totalCount)||0,totalPages:(null===(t=e.Setting)||void 0===t?void 0:t.totalPages)||1,currentPage:(null===(a=e.Setting)||void 0===a?void 0:a.currentPage)||1,itemsPerPage:(null===(i=e.Setting)||void 0===i?void 0:i.itemsPerPage)||10,paymentAccounts:(null===(n=e.Setting)||void 0===n?void 0:n.paymentAccounts)||[],paymentTotalCount:(null===(r=e.Setting)||void 0===r?void 0:r.paymentTotalCount)||0,paymentTotalPages:(null===(o=e.Setting)||void 0===o?void 0:o.paymentTotalPages)||1,paymentCurrentPage:(null===(d=e.Setting)||void 0===d?void 0:d.paymentCurrentPage)||1,paymentItemsPerPage:(null===(c=e.Setting)||void 0===c?void 0:c.paymentItemsPerPage)||10}})(e=>{let{centers:s,billItems:l,totalCount:a,totalPages:i,currentPage:n,itemsPerPage:r,paymentAccounts:o,paymentTotalCount:c,paymentTotalPages:u,paymentCurrentPage:x,paymentItemsPerPage:h}=e;const p=(0,d.wA)(),[g,v]=(0,t.useState)(!1),[b,A]=(0,t.useState)(!1),[N,f]=(0,t.useState)({isOpen:!1,data:null}),[y,C]=(0,t.useState)("1"),[S,T]=(0,t.useState)(""),[E,w]=(0,t.useState)(1),[P,k]=(0,t.useState)(10),[I,U]=(0,t.useState)(""),[V,G]=(0,t.useState)(1),[_,J]=(0,t.useState)(10),K=()=>v(!g),Z=()=>A(!b),$=()=>f({isOpen:!1,data:null});return(0,t.useEffect)(()=>{"1"===y&&p((0,O.we6)({centerIds:s,page:E,limit:P,search:S}))},[p,s,E,P,S,y]),(0,t.useEffect)(()=>{"2"===y&&p((0,O.BnI)({centerIds:s,page:V,limit:_,search:I}))},[p,s,y,V,_,I]),(0,m.jsx)(t.Fragment,{children:(0,m.jsxs)("div",{className:"w-100",children:[(0,m.jsx)("div",{className:"mt-4 mx-4 mb-3",children:(0,m.jsx)(j.A,{title:"Billing",pageTitle:"Billing"})}),(0,m.jsxs)(R.A,{tabs:!0,className:"py-2",children:[(0,m.jsx)(M.A,{children:(0,m.jsx)(F.A,{className:W()({active:"1"===y}),onClick:()=>C("1"),children:"Invoice"})}),(0,m.jsx)(M.A,{children:(0,m.jsx)(F.A,{className:W()({active:"2"===y}),onClick:()=>C("2"),children:"Advance Payment"})})]}),(0,m.jsxs)(L.A,{activeTab:y,children:[(0,m.jsxs)(z.A,{tabId:"1",children:[(0,m.jsx)(B,{toggleForm:K,setSearch:T}),(0,m.jsx)(Y,{items:l,setDeleteItem:f,currentPage:n,itemsPerPage:r,onPageChange:w,onItemsPerPageChange:k,searchItem:S,totalItems:a,totalPages:i}),(0,m.jsx)(D,{modal:g,toggle:K}),(0,m.jsx)(q.A,{show:N.isOpen,onDeleteClick:()=>{p((0,O.PS0)(N.data)),f({isOpen:!1,data:null})},onCloseClick:$})]}),(0,m.jsxs)(z.A,{tabId:"2",children:[(0,m.jsx)(H,{toggleForm:Z,setSearchadv:U}),(0,m.jsx)(X,{items:o,setDeleteItem:f,currentPage:x,itemsPerPage:h,onPageChange:G,onItemsPerPageChange:J,searchItem:I,totalItems:c,totalPages:u}),(0,m.jsx)(Q,{modal:b,toggle:Z}),(0,m.jsx)(q.A,{show:N.isOpen,onDeleteClick:()=>{p((0,O.GKO)(N.data)),f({isOpen:!1,data:null})},onCloseClick:$})]})]})]})})});var $=l(65173),ee=l.n($),se=l(49157),le=l(87426);const te=(0,d.Ng)(e=>({calender:e.Setting.calender}))(e=>{let{calender:s}=e;const l=(0,d.wA)(),a=s?"".concat(s.duration.value," ").concat(s.duration.unit):"";return(0,m.jsx)(t.Fragment,{children:(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)(y.A,{children:"Default Calender Timing"}),(0,m.jsxs)(C.A,{onChange:e=>{const t=e.target.value.match(/(\d+) (\w+)/);if(t){const e={value:parseInt(t[1],10),unit:t[2]};l(s?(0,O._xm)({duration:e,id:s._id}):(0,O._xO)({duration:e}))}},value:a,bsSize:"sm",color:"white",type:"select",children:[(0,m.jsx)("option",{children:"1 Hour"}),(0,m.jsx)("option",{children:"30 Minutes"}),(0,m.jsx)("option",{children:"15 Minutes"})]})]})})});var ae=l(78639);const ie=e=>{let{loading:s,centerAccess:l}=e;const a=(0,d.wA)(),[i,n]=(0,t.useState)("");return(0,t.useEffect)(()=>{setTimeout(()=>{a((0,O.eoR)({name:i,centerAccess:JSON.stringify(l)}))},1e3)},[a,i,l]),(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(se.A,{children:(0,m.jsx)(U.A,{className:"bg-white",children:(0,m.jsxs)(N.A,{className:"gap-2 align-items-end",children:[(0,m.jsx)(f.A,{xs:12,md:4,lg:3,children:(0,m.jsx)(te,{})}),(0,m.jsx)(f.A,{xs:12,md:4,lg:4,children:(0,m.jsxs)("div",{className:"search-box",children:[(0,m.jsx)(C.A,{type:"text",value:i,onChange:e=>{n(e.target.value)},style:{paddingLeft:"20px !important"},className:"ps-4",placeholder:"Search for name",bsSize:"sm"}),(0,m.jsx)("i",{style:{right:"10px",left:"unset"},className:"ri-search-line search-icon"}),(0,m.jsx)(ae.A,{isTrue:s,children:(0,m.jsx)(le.A,{className:"position-absolute",style:{right:30,top:8},color:"success",size:"sm"})})]})}),(0,m.jsx)(f.A,{className:"col-sm-auto ms-auto",children:(0,m.jsx)("div",{className:"list-grid-nav hstack gap-1",children:(0,m.jsxs)(T.A,{className:"text-white",color:"success",children:[(0,m.jsx)("i",{className:"ri-add-fill me-1 align-bottom"})," Add Item"]})})})]})})})})};ie.prototype={loading:ee().bool,centerAccess:ee().array};const ne=(0,d.Ng)(e=>({loading:e.Setting.loading,centerAccess:e.User.centerAccess}))(ie);l(53536);const re=(0,d.Ng)(e=>({doctors:e.Setting.doctorSchedule}))(e=>{let{doctors:s,toggleForm:l}=e;return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)("div",{children:(0,m.jsxs)(N.A,{children:[(0,m.jsx)(f.A,{className:"bg-white p-3",xs:12,children:(0,m.jsxs)(N.A,{children:[(0,m.jsx)(f.A,{xs:1,children:"#"}),(0,m.jsx)(f.A,{xs:2,children:"Practice & Doctors"}),(0,m.jsx)(f.A,{xs:3,children:"Days"}),(0,m.jsx)(f.A,{xs:3,children:"Working Times"}),(0,m.jsx)(f.A,{xs:2,children:"Type"}),(0,m.jsx)(f.A,{xs:1})]})}),(s||[]).map((e,s)=>(0,m.jsxs)(N.A,{className:"align-items-center px-3 py-2",children:[(0,m.jsx)(f.A,{xs:1,children:s+1}),(0,m.jsx)(f.A,{xs:2,children:null===e||void 0===e?void 0:e.name}),(0,m.jsx)(f.A,{xs:3}),(0,m.jsx)(f.A,{xs:3,className:"ps-4"}),(0,m.jsx)(f.A,{xs:2,children:"In-clinic Appointment"}),(0,m.jsx)(f.A,{xs:1,children:(0,m.jsx)(T.A,{size:"sm",onClick:()=>l({doc:e}),color:"light",children:(0,m.jsx)("i",{className:"ri-arrow-right-s-line font-size-20"})})})]},e._id))]})})})});l(55300);var oe=l(10836);const de=()=>{const e=(0,d.wA)(),[s,l]=(0,t.useState)({isOpen:!1,data:null}),a=e=>{let{doc:t}=e;l({isOpen:!s.isOpen,data:t})};return(0,t.useEffect)(()=>{e((0,O.eoR)()),e((0,O.jn7)())},[e]),(0,m.jsx)(t.Fragment,{children:(0,m.jsxs)("div",{className:"w-100",children:[(0,m.jsx)("div",{className:"mt-4 mx-4 mb-3",children:(0,m.jsx)(j.A,{title:"Calender",pageTitle:"Booking"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)(ne,{}),(0,m.jsx)(re,{toggleForm:a}),(0,m.jsx)(b.A,{title:"User Schedule",centered:!0,isOpen:s.isOpen,toggle:a,size:"xl",className:"h-100",children:(0,m.jsx)(oe.Ay,{doctor:s.data,isOpen:s.isOpen,toggle:a})})]})]})})};var ce=l(98288),me=l(11387),ue=l(45627),xe=l(75067);const he=(0,d.Ng)(e=>({data:e.Offers.data,totalCount:e.Offers.totalCount}))(e=>{let{offerCode:s,totalCount:l,setEditOffer:t,setDeleteOffer:a,currentPage:i,itemsPerPage:n,onPageChange:r,onItemsPerPageChange:o,userPermissions:d}=e;const c=Math.ceil(l/n);return(0,m.jsxs)("div",{className:"p-4 bg-light rounded shadow-sm",children:[(0,m.jsxs)(N.A,{className:"mb-3 align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(C.A,{type:"select",value:n,className:"",onChange:e=>o(Number(e.target.value)),style:{width:"120px"},children:[5,10,25,50].map(e=>(0,m.jsx)("option",{value:e,children:e},e))})}),(0,m.jsxs)(f.A,{className:"text-end text-muted",children:["Page ",i," of ",c]})]}),(0,m.jsxs)(V.A,{bordered:!0,hover:!0,className:"bg-white",children:[(0,m.jsx)("thead",{className:"table-primary text-center",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Code"}),(0,m.jsx)("th",{children:"Type"}),(0,m.jsx)("th",{children:"Value"}),(0,m.jsx)("th",{children:"Use/User"}),(0,m.jsx)("th",{children:"Total Applicable"}),(0,m.jsx)("th",{children:"Start Date"}),(0,m.jsx)("th",{children:"End Date"}),(0,m.jsx)("th",{children:"Status"}),(0,m.jsx)("th",{children:"Visible To All"}),(0,m.jsx)("th",{children:"Offer Remains"}),(0,m.jsx)(xe.A,{accessRolePermission:d,permission:"edit",children:(0,m.jsx)("th",{children:"Actions"})})]})}),(0,m.jsx)("tbody",{children:s&&Array.isArray(s)&&(null===s||void 0===s?void 0:s.map(e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"text-capitalize fw-semibold text-primary",children:null===e||void 0===e?void 0:e.code}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.discountType}),(0,m.jsx)("td",{children:"".concat(null===e||void 0===e?void 0:e.discountValue).concat("FIXED"===(null===e||void 0===e?void 0:e.discountType)?"\u20b9":"%")}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.usageLimitPerUser}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.usageLimitGlobal}),(0,m.jsx)("td",{children:(0,ue.A)(new Date(null===e||void 0===e?void 0:e.startDate),"dd MMM, yyyy")}),(0,m.jsx)("td",{children:(0,ue.A)(new Date(null===e||void 0===e?void 0:e.endDate),"dd MMM, yyyy")}),(0,m.jsx)("td",{children:null!==e&&void 0!==e&&e.status?"Active":"Inactive"}),(0,m.jsx)("td",{children:null!==e&&void 0!==e&&e.visibleToAll?"Yes":"No"}),(0,m.jsx)("td",{children:Number(null===e||void 0===e?void 0:e.usageLimitGlobal)-Number(null===e||void 0===e?void 0:e.totalUsed)}),(0,m.jsxs)("td",{children:[(0,m.jsx)(xe.A,{accessRolePermission:d,permission:"edit",children:(0,m.jsx)(T.A,{size:"sm",color:"info",className:"me-2",onClick:()=>t({isOpen:!0,data:e}),children:(0,m.jsx)("i",{className:"ri-quill-pen-line"})})}),(0,m.jsx)(xe.A,{accessRolePermission:d,permission:"delete",children:(0,m.jsx)(T.A,{size:"sm",color:"danger",outline:!0,onClick:()=>a({isOpen:!0,data:e}),children:(0,m.jsx)("i",{className:"ri-close-circle-line"})})})]})]},null===e||void 0===e?void 0:e._id)))})]}),(0,m.jsxs)(N.A,{className:"mt-4 justify-content-between align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:1===i,onClick:()=>r(i-1),children:"\u2190 Previous"})}),(0,m.jsxs)(f.A,{className:"text-center text-muted",children:["Showing ",Math.min((i-1)*n+1,l),"\u2013",Math.min(i*n,l)," of ",l]}),(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:i===c,onClick:()=>r(i+1),children:"Next \u2192"})})]})]})});var pe=l(2364);const je=e=>{let{options:s=[],placeholder:l="Search...",onChange:a,isMulti:i=!1,defaultValue:n}=e;const[r,o]=(0,t.useState)(""),[d,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{n&&c(i?s.filter(e=>n.includes(e.value)):s.find(e=>e.value===n)||null)},[n,s]);const u={control:e=>(0,g.A)((0,g.A)({},e),{},{backgroundColor:"#F2F2F2",border:"none",boxShadow:"none"}),valueContainer:e=>(0,g.A)((0,g.A)({},e),{},{minHeight:"36px",maxHeight:"100px",overflowY:"auto",flexWrap:"wrap",padding:"0 10px"}),input:e=>(0,g.A)((0,g.A)({},e),{},{minHeight:"36px",margin:"0px",padding:"0px"}),menu:e=>(0,g.A)((0,g.A)({},e),{},{backgroundColor:"#F2F2F2"}),option:(e,s)=>(0,g.A)((0,g.A)({},e),{},{backgroundColor:s.isSelected?"#13c56b":"#f0f0f0",color:s.isSelected?"white":"black","&:hover":{backgroundColor:"#13c56b",color:"white"}})};return(0,m.jsxs)("div",{children:[i&&(0,m.jsxs)("div",{className:"d-flex justify-content-end mb-2",style:{gap:"10px"},children:[(0,m.jsx)("button",{type:"button",onClick:()=>{const e=[...s];c(e),a(e.map(e=>e.value))},className:"btn btn-sm btn-outline-primary",children:"Select All"}),(0,m.jsx)("button",{type:"button",onClick:()=>{c(null),a([])},className:"btn btn-sm btn-outline-danger",children:"Clear All"})]}),(0,m.jsx)(pe.Ay,{options:s,onInputChange:e=>{o(e)},onChange:e=>{if(i){const s=e?e.map(e=>e.value):[];a(s)}else a(e?e.value:null);c(e)},placeholder:l,isClearable:!0,styles:u,isMulti:i,value:d})]})};var ge=l(41717),ve=l(52969),be=l(91036);const Ae=["name","type"],Ne=E.Ik().shape({code:E.Yj().required("Code is required"),discountType:E.Yj().oneOf(["FIXED","PERCENTAGE"],"Invalid type").required("Discount type is required"),discountValue:E.ai().min(0,"Must be positive").required("Discount value is required"),minBookingAmount:E.ai().min(0,"Must be positive").optional(),newUsersOnly:E.zM().optional(),visibleToAll:E.zM().optional(),applicableCenters:E.YO().of(E.Yj()).optional(),applicableServices:E.YO().of(E.Yj()).optional(),applicableConsultants:E.YO().of(E.Yj()).optional(),startDate:E.p6().required("Start date is required"),endDate:E.p6().min(E.KR("startDate"),"End date must be after start date").required("End date is required"),usageLimitGlobal:E.ai().min(0,"Must be positive").required("Usage limit is required"),usageLimitPerUser:E.ai().min(0,"Must be positive").required("Per-user limit is required")}),fe={code:"",discountType:"",discountValue:"",minBookingAmount:"",newUsersOnly:!1,visibleToAll:!0,applicableCenters:[],applicableServices:[],applicableConsultants:[],startDate:"",endDate:"",usageLimitGlobal:"",usageLimitPerUser:""},ye=e=>{let{name:s,options:l=[],isMulti:t=!1,placeholder:a="Select..."}=e;const{values:i,setFieldValue:n,touched:r,errors:o}=(0,w.j7)(),d=(0,w.O6)(i,s),c=(0,w.O6)(o,s),u=(0,w.O6)(r,s);return(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(je,{options:l,isMulti:t,defaultValue:d,onChange:e=>n(s,e),placeholder:a}),u&&c&&(0,m.jsx)("div",{className:"text-danger",children:c})]})},Ce=e=>{let{name:s,type:l="text"}=e,t=(0,v.A)(e,Ae);const{values:a,handleChange:i,handleBlur:n,errors:r,touched:o}=(0,w.j7)(),d=(0,w.O6)(r,s),c=(0,w.O6)(o,s),u=(0,w.O6)(a,s),x=(0,g.A)({id:s,name:s,onChange:i,onBlur:n,type:l,invalid:Boolean(c&&d)},t);return"checkbox"===l?x.checked=u:x.value=u,(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(C.A,(0,g.A)({},x)),c&&d&&(0,m.jsx)("div",{className:"text-danger",children:d})]})},Se=e=>{var s;let{toggle:l,apiFlag:a,setApiFlag:i}=e;const n=(0,d.wA)(),r=(0,ve.m)();(0,t.useEffect)(()=>{n((0,O.Qf8)())},[n]);const o=(0,d.d4)(e=>e.User.centerAccess);(0,t.useEffect)(()=>{setTimeout(()=>{n((0,O.eoR)({name:"",centerAccess:JSON.stringify(o)}))},1e3)},[n,o]);const c=(0,d.d4)(e=>e.Center.allCenters),u=(0,d.d4)(e=>e.Setting.doctorSchedule),x=u&&(null===u||void 0===u||null===(s=u.filter(e=>"suspended"!==e.status))||void 0===s?void 0:s.map(e=>({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}))),h=c&&c.map(e=>({label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e._id})),p=[{label:"DOCTOR",value:"DOCTOR"},{label:"ACCOUNTANT",value:"ACCOUNTANT"},{label:"CONSULTANT",value:"CONSULTANT"},{label:"COUNSELLOR",value:"COUNSELLOR"},{label:"NURSE",value:"NURSE"}];return(0,m.jsx)(w.l1,{initialValues:fe,validationSchema:Ne,onSubmit:async e=>{try{(await n((0,ge.kQ)(e)).unwrap()).success&&(i(!a),l())}catch(s){r(s)||(console.error("Add offer failed:",s),be.oR.error(s.message||"Failed to add offer."))}},children:()=>(0,m.jsxs)(w.lV,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Code"}),(0,m.jsx)(Ce,{name:"code"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Discount Type"}),(0,m.jsx)(ye,{name:"discountType",isMulti:!1,options:[{value:"FIXED",label:"Fixed"},{value:"PERCENTAGE",label:"Percentage"}]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Discount Value"}),(0,m.jsx)(Ce,{name:"discountValue",type:"number"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Min Booking Amount"}),(0,m.jsx)(Ce,{name:"minBookingAmount",type:"number"})]}),(0,m.jsxs)("div",{className:"col-md-4 mt-2",children:[(0,m.jsx)("label",{children:" New Users Only "}),(0,m.jsx)(Ce,{name:"newUsersOnly",type:"checkbox",className:"mt-2"})]}),(0,m.jsxs)("div",{className:"col-md-4 mt-2",children:[(0,m.jsx)("label",{children:" Visible To All  "}),(0,m.jsx)(Ce,{name:"visibleToAll",type:"checkbox",className:"mt-2"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Applicable Centers"}),(0,m.jsx)(ye,{name:"applicableCenters",isMulti:!0,options:null!==h&&void 0!==h?h:[]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Applicable Services"}),(0,m.jsx)(ye,{name:"applicableServices",isMulti:!0,options:p})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Applicable Consultants"}),(0,m.jsx)(ye,{name:"applicableConsultants",isMulti:!0,options:x})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Start Date"}),(0,m.jsx)(Ce,{name:"startDate",type:"date"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"End Date"}),(0,m.jsx)(Ce,{name:"endDate",type:"date",min:(new Date).toISOString().split("T")[0]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Usage Limit Global"}),(0,m.jsx)(Ce,{name:"usageLimitGlobal",type:"number"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Usage Limit Per User"}),(0,m.jsx)(Ce,{name:"usageLimitPerUser",type:"number"})]}),(0,m.jsx)("div",{className:"col-md-4"}),(0,m.jsx)("div",{className:"col-md-4 d-flex justify-content-end",style:{height:"70px"},children:(0,m.jsx)(T.A,{type:"submit",color:"success",className:"text-white",style:{marginTop:"28px"},children:"Submit"})})]})]})})},Te=e=>{let{modal:s,toggle:l,apiFlag:a,setApiFlag:i}=e;return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(b.A,{size:"xl",isOpen:s,toggle:l,centered:!0,title:"Add Offer",children:(0,m.jsx)(Se,{toggle:l,apiFlag:a,setApiFlag:i})})})},Ee=["name","type"],we=E.Ik().shape({code:E.Yj().required("Code is required"),discountType:E.Yj().oneOf(["FIXED","PERCENTAGE"],"Invalid type").required("Discount type is required"),discountValue:E.ai().min(0,"Must be positive").required("Discount value is required"),minBookingAmount:E.ai().min(0,"Must be positive").optional(),newUsersOnly:E.zM().optional(),visibleToAll:E.zM().optional(),applicableCenters:E.YO().of(E.Yj()).optional(),applicableServices:E.YO().of(E.Yj()).optional(),applicableConsultants:E.YO().of(E.Yj()).optional(),startDate:E.p6().required("Start date is required"),endDate:E.p6().min(E.KR("startDate"),"End date must be after start date").required("End date is required"),usageLimitGlobal:E.ai().min(0,"Must be positive").required("Usage limit is required"),usageLimitPerUser:E.ai().min(0,"Must be positive").required("Per-user limit is required"),status:E.zM().optional()}),Oe=e=>{let{name:s,options:l=[],isMulti:t=!1,placeholder:a="Select..."}=e;const{values:i,setFieldValue:n,touched:r,errors:o}=(0,w.j7)(),d=(0,w.O6)(i,s),c=(0,w.O6)(o,s),u=(0,w.O6)(r,s);return(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(je,{options:l,isMulti:t,defaultValue:d,onChange:e=>n(s,e),placeholder:a}),u&&c&&(0,m.jsx)("div",{className:"text-danger",children:c})]})},Pe=e=>{let{name:s,type:l="text"}=e,t=(0,v.A)(e,Ee);const{values:a,handleChange:i,handleBlur:n,errors:r,touched:o}=(0,w.j7)(),d=(0,w.O6)(r,s),c=(0,w.O6)(o,s),u=(0,w.O6)(a,s),x=(0,g.A)({id:s,name:s,onChange:i,onBlur:n,type:l,invalid:Boolean(c&&d)},t);return"checkbox"===l?x.checked=u:x.value=u,(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(C.A,(0,g.A)({},x)),c&&d&&(0,m.jsx)("div",{className:"text-danger",children:d})]})},ke=e=>{var s,l,a;let{modal:i,toggle:n,data:r,setApiFlag:o,apiFlag:c}=e;const u=(0,d.wA)(),x=(0,ve.m)();(0,t.useEffect)(()=>{u((0,O.Qf8)())},[u]);const h=(0,d.d4)(e=>e.User.centerAccess);(0,t.useEffect)(()=>{setTimeout(()=>{u((0,O.eoR)({name:"",centerAccess:JSON.stringify(h)}))},1e3)},[u,h]);const p=(0,d.d4)(e=>e.Center.allCenters),j=(0,d.d4)(e=>e.Setting.doctorSchedule),v=j&&(null===j||void 0===j||null===(s=j.filter(e=>"suspended"!==e.status))||void 0===s?void 0:s.map(e=>({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}))),A=p&&p.map(e=>({label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e._id})),N=[{label:"DOCTOR",value:"DOCTOR"},{label:"ACCOUNTANT",value:"ACCOUNTANT"},{label:"CONSULTANT",value:"CONSULTANT"},{label:"COUNSELLOR",value:"COUNSELLOR"},{label:"NURSE",value:"NURSE"}];return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(b.A,{size:"xl",isOpen:i,toggle:n,centered:!0,title:"Edit Offer",children:(0,m.jsx)(w.l1,{initialValues:{code:(null===r||void 0===r?void 0:r.code)||"",discountType:(null===r||void 0===r?void 0:r.discountType)||"",discountValue:(null===r||void 0===r?void 0:r.discountValue)||"",minBookingAmount:(null===r||void 0===r?void 0:r.minBookingAmount)||"",newUsersOnly:(null===r||void 0===r?void 0:r.newUsersOnly)||!1,visibleToAll:(null===r||void 0===r?void 0:r.visibleToAll)||!1,applicableCenters:(null===r||void 0===r||null===(l=r.applicableCenters)||void 0===l?void 0:l.map(e=>e))||[],applicableServices:(null===r||void 0===r?void 0:r.applicableServices)||[],applicableConsultants:(null===r||void 0===r||null===(a=r.applicableConsultants)||void 0===a?void 0:a.map(e=>e))||[],startDate:null!==r&&void 0!==r&&r.startDate?r.startDate.split("T")[0]:"",endDate:null!==r&&void 0!==r&&r.endDate?r.endDate.split("T")[0]:"",usageLimitGlobal:(null===r||void 0===r?void 0:r.usageLimitGlobal)||"",usageLimitPerUser:(null===r||void 0===r?void 0:r.usageLimitPerUser)||"",status:(null===r||void 0===r?void 0:r.status)||!1},validationSchema:we,onSubmit:async e=>{const s=(0,g.A)({_id:r._id},e);try{(await u((0,ge.ih)(s)).unwrap()).success&&(n(),o(!c))}catch(l){x(l)||(console.error("Update offer failed:",l),be.oR.error(l.message||"Failed to update offer."))}},children:()=>(0,m.jsxs)(w.lV,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Code"}),(0,m.jsx)(Pe,{name:"code"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Discount Type"}),(0,m.jsx)(Oe,{name:"discountType",isMulti:!1,options:[{value:"FIXED",label:"Fixed"},{value:"PERCENTAGE",label:"Percentage"}]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Discount Value"}),(0,m.jsx)(Pe,{name:"discountValue",type:"number"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Min Booking Amount"}),(0,m.jsx)(Pe,{name:"minBookingAmount",type:"number"})]}),(0,m.jsxs)("div",{className:"col-md-4 mt-2",children:[(0,m.jsx)("label",{children:" New Users Only "}),(0,m.jsx)(Pe,{name:"newUsersOnly",type:"checkbox",className:"mt-2"})]}),(0,m.jsxs)("div",{className:"col-md-4 mt-2",children:[(0,m.jsx)("label",{children:" Visible To All  "}),(0,m.jsx)(Pe,{name:"visibleToAll",type:"checkbox",className:"mt-2"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Applicable Centers"}),(0,m.jsx)(Oe,{name:"applicableCenters",isMulti:!0,options:null!==A&&void 0!==A?A:[]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Applicable Services"}),(0,m.jsx)(Oe,{name:"applicableServices",isMulti:!0,options:N})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Applicable Consultants"}),(0,m.jsx)(Oe,{name:"applicableConsultants",isMulti:!0,options:v})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Start Date"}),(0,m.jsx)(Pe,{name:"startDate",type:"date"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"End Date"}),(0,m.jsx)(Pe,{name:"endDate",type:"date",min:(new Date).toISOString().split("T")[0]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Usage Limit Global"}),(0,m.jsx)(Pe,{name:"usageLimitGlobal",type:"number"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Usage Limit Per User"}),(0,m.jsx)(Pe,{name:"usageLimitPerUser",type:"number"})]}),(0,m.jsx)("div",{className:"col-md-4",children:(0,m.jsxs)("div",{className:"col-md-4 mt-2",children:[(0,m.jsx)("label",{children:" Active  "}),(0,m.jsx)(Pe,{name:"status",type:"checkbox",className:"mt-2"})]})}),(0,m.jsx)("div",{className:"col-md-4 d-flex justify-content-end",style:{height:"70px"},children:(0,m.jsx)(T.A,{type:"submit",color:"success",className:"text-white",style:{marginTop:"28px"},children:"Submit"})})]})]})})})})},Ie=()=>{const e=(0,a.Zp)(),s=(0,d.wA)(),[l,i]=(0,t.useState)(!1),[n,r]=(0,t.useState)(""),[o,u]=(0,t.useState)(!1),[x,h]=(0,t.useState)({isOpen:!1,data:null}),[p,v]=(0,t.useState)({isOpen:!1,data:null}),[b,A]=(0,t.useState)(1),[y,S]=(0,t.useState)(10),[E,w]=(0,t.useState)(""),P=(0,d.d4)(e=>e.Offers.data),k=localStorage.getItem("micrologin"),I=k?JSON.parse(k).token:null,D=(0,d.d4)(e=>e.Offers.totalCount),R=(0,d.d4)(e=>e.Offers.totalPages),{loading:M,hasPermission:F,roles:L}=(0,c.S)(I),z=F("SETTING","OFFERCODESETTING","READ"),B=(0,ve.m)();(0,t.useEffect)(()=>{const e=setTimeout(()=>{r(E)},500);return()=>clearTimeout(e)},[E]);return(0,t.useEffect)(()=>{(async()=>{try{if(!z)return;await s((0,O.hr5)({page:b,limit:y,search:n})).unwrap()}catch(e){B(e)||be.oR.error(e.message||"Failed to fetch offer list.")}})()},[s,b,y,n,o,z]),M?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,m.jsx)(le.A,{color:"primary",className:"d-block",style:{width:"3rem",height:"3rem"}})}):z?(0,m.jsxs)("div",{className:"container-fluid d-flex flex-column h-100 px-3",children:[(0,m.jsx)("div",{className:"mt-4 mx-4",children:(0,m.jsx)(j.A,{title:"Offer Code",pageTitle:"Offer Code"})}),(0,m.jsx)(U.A,{className:"p-3 bg-white",children:(0,m.jsxs)(N.A,{className:"g-2 align-items-center",children:[(0,m.jsx)(f.A,{sm:4,children:(0,m.jsxs)(ce.A,{children:[(0,m.jsx)(C.A,{type:"text",value:E,onChange:e=>w(e.target.value),placeholder:"Search for name"}),(0,m.jsx)(me.A,{children:(0,m.jsx)("i",{className:"ri-search-line"})})]})}),(0,m.jsx)(xe.A,{accessRolePermission:null===L||void 0===L?void 0:L.permissions,permission:"create",children:(0,m.jsx)(f.A,{className:"col-sm-auto ms-auto",children:(0,m.jsxs)(T.A,{color:"success",className:"text-white",onClick:()=>i(!0),children:[(0,m.jsx)("i",{className:"ri-add-fill me-1 align-bottom"})," Add Offer"]})})})]})}),(0,m.jsx)("div",{className:"flex-grow-1 d-flex flex-column overflow-auto",children:(0,m.jsx)(he,{offerCode:P,totalCount:D,totalPages:R,setEditOffer:v,setDeleteOffer:h,currentPage:b,itemsPerPage:y,onPageChange:e=>{A(e)},onItemsPerPageChange:e=>{S(e),A(1)},userPermissions:null===L||void 0===L?void 0:L.permissions})}),(0,m.jsx)(q.A,{show:x.isOpen,onDeleteClick:async()=>{if(null===x||void 0===x||!x.data)return;const e=(0,g.A)((0,g.A)({},null===x||void 0===x?void 0:x.data),{},{deleted:!0});try{(await s((0,ge.ih)(e)).unwrap()).success&&(u(!o),h({isOpen:!1,data:null}))}catch(l){B(l)||(console.error("Delete offer failed:",l),be.oR.error(l.message||"Failed to delete offer."))}},onCloseClick:()=>h({data:null,isOpen:!1})}),(0,m.jsx)(Te,{modal:l,toggle:()=>i(!l),apiFlag:o,setApiFlag:u}),(0,m.jsx)(ke,{modal:null===p||void 0===p?void 0:p.isOpen,toggle:()=>{v({data:null,isOpen:!1})},data:null===p||void 0===p?void 0:p.data,setApiFlag:u,apiFlag:o})]}):(e("/unauthorized"),null)},De=(0,d.Ng)(e=>({data:e.Taxes.data,totalCount:e.Taxes.totalCount}))(e=>{let{taxCode:s,totalCount:l,setEditOffer:t,setDeleteOffer:a,currentPage:i,itemsPerPage:n,onPageChange:r,onItemsPerPageChange:o,userPermissions:d}=e;const c=Math.ceil(l/n);return(0,m.jsxs)("div",{className:"p-4 bg-light rounded shadow-sm",children:[(0,m.jsxs)(N.A,{className:"mb-3 align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(C.A,{type:"select",value:n,className:"",onChange:e=>o(Number(e.target.value)),style:{width:"120px"},children:[5,10,25,50].map(e=>(0,m.jsx)("option",{value:e,children:e},e))})}),(0,m.jsxs)(f.A,{className:"text-end text-muted",children:["Page ",i," of  ",c]})]}),(0,m.jsxs)(V.A,{bordered:!0,hover:!0,className:"bg-white",children:[(0,m.jsx)("thead",{className:"table-primary text-center",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Tax Name"}),(0,m.jsx)("th",{children:"Tax Value"}),(0,m.jsx)("th",{children:"Tax Type"}),(0,m.jsx)("th",{children:"Start Date"}),(0,m.jsx)("th",{children:"End Date"}),(0,m.jsx)("th",{children:"Status"}),(0,m.jsx)("th",{children:"Visible To All"}),(0,m.jsx)(xe.A,{accessRolePermission:d,permission:"edit",children:(0,m.jsx)("th",{children:"Actions"})})]})}),(0,m.jsx)("tbody",{children:s&&Array.isArray(s)&&s.map(e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"text-capitalize fw-semibold text-primary",children:null===e||void 0===e?void 0:e.taxName}),(0,m.jsx)("td",{children:"".concat(null===e||void 0===e?void 0:e.taxValue).concat("FIXED"===(null===e||void 0===e?void 0:e.taxType)?"\u20b9":"%")}),(0,m.jsx)("td",{children:null===e||void 0===e?void 0:e.taxType}),(0,m.jsx)("td",{children:(0,ue.A)(new Date(null===e||void 0===e?void 0:e.startDate),"dd MMM, yyyy")}),(0,m.jsx)("td",{children:(0,ue.A)(new Date(null===e||void 0===e?void 0:e.endDate),"dd MMM, yyyy")}),(0,m.jsx)("td",{children:null!==e&&void 0!==e&&e.status?"Active":"Inactive"}),(0,m.jsx)("td",{children:null!==e&&void 0!==e&&e.visibleToAll?"Yes":"No"}),(0,m.jsxs)("td",{children:[(0,m.jsx)(xe.A,{accessRolePermission:d,permission:"edit",children:(0,m.jsx)(T.A,{size:"sm",color:"info",className:"me-2",onClick:()=>t({isOpen:!0,data:e}),children:(0,m.jsx)("i",{className:"ri-quill-pen-line"})})}),(0,m.jsx)(xe.A,{accessRolePermission:d,permission:"delete",children:(0,m.jsx)(T.A,{size:"sm",color:"danger",outline:!0,onClick:()=>a({isOpen:!0,data:e}),children:(0,m.jsx)("i",{className:"ri-close-circle-line"})})})]})]},null===e||void 0===e?void 0:e._id))})]}),(0,m.jsxs)(N.A,{className:"mt-4 justify-content-between align-items-center",children:[(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:1===i,onClick:()=>r(i-1),children:"\u2190 Previous"})}),(0,m.jsxs)(f.A,{className:"text-center text-muted",children:["Showing ",Math.min((i-1)*n+1,l),"\u2013",Math.min(i*n,l)," of ",l]}),(0,m.jsx)(f.A,{xs:"auto",children:(0,m.jsx)(T.A,{color:"secondary",disabled:i===c,onClick:()=>r(i+1),children:"Next \u2192"})})]})]})});var Re=l(30845);const Me=["name","type"],Fe=E.Ik().shape({taxName:E.Yj().required("Tax Name is required"),taxType:E.Yj().oneOf(["FIXED","PERCENTAGE"],"Invalid type").required("Tax type is required"),taxValue:E.ai().min(0,"Must be positive").required("Tax value is required"),visibleToAll:E.zM().optional(),applicableCenters:E.YO().of(E.Yj()).optional(),startDate:E.p6().required("Start date is required"),endDate:E.p6().min(E.KR("startDate"),"End date must be after start date").required("End date is required")}),Le={taxName:"",taxType:"",taxValue:"",applicableCenters:[],startDate:"",visibleToAll:!0,endDate:""},ze=e=>{let{name:s,options:l=[],isMulti:t=!1,placeholder:a="Select..."}=e;const{values:i,setFieldValue:n,touched:r,errors:o}=(0,w.j7)(),d=(0,w.O6)(i,s),c=(0,w.O6)(o,s),u=(0,w.O6)(r,s);return(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(je,{options:l,isMulti:t,defaultValue:d,onChange:e=>n(s,e),placeholder:a}),u&&c&&(0,m.jsx)("div",{className:"text-danger",children:c})]})},Ue=e=>{let{name:s,type:l="text"}=e,t=(0,v.A)(e,Me);const{values:a,handleChange:i,handleBlur:n,errors:r,touched:o}=(0,w.j7)(),d=(0,w.O6)(r,s),c=(0,w.O6)(o,s),u=(0,w.O6)(a,s),x=(0,g.A)({id:s,name:s,onChange:i,onBlur:n,type:l,invalid:Boolean(c&&d)},t);return"checkbox"===l?x.checked=u:x.value=u,(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(C.A,(0,g.A)({},x)),c&&d&&(0,m.jsx)("div",{className:"text-danger",children:d})]})},Be=e=>{let{toggle:s,apiFlag:l,setApiFlag:a}=e;const i=(0,d.wA)(),n=(0,ve.m)();(0,t.useEffect)(()=>{i((0,O.Qf8)())},[i]);const r=(0,d.d4)(e=>e.Center.allCenters),o=r&&(null===r||void 0===r?void 0:r.map(e=>({label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e._id})));return(0,m.jsx)(w.l1,{initialValues:Le,validationSchema:Fe,onSubmit:async e=>{try{(await i((0,Re.HB)(e)).unwrap()).success&&(a(!l),s())}catch(t){n(t)||be.oR.error(t.message||"Failed to add tax.")}},children:()=>(0,m.jsxs)(w.lV,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Tax Name"}),(0,m.jsx)(Ue,{name:"taxName"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Tax Type"}),(0,m.jsx)(ze,{name:"taxType",isMulti:!1,options:[{value:"FIXED",label:"Fixed"},{value:"PERCENTAGE",label:"Percentage"}]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Tax Value"}),(0,m.jsx)(Ue,{name:"taxValue",type:"number"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Start Date"}),(0,m.jsx)(Ue,{name:"startDate",type:"date"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"End Date"}),(0,m.jsx)(Ue,{name:"endDate",type:"date",min:(new Date).toISOString().split("T")[0]})]}),(0,m.jsxs)("div",{className:"col-md-4 mt-2",children:[(0,m.jsx)("label",{children:" Visible To All  "}),(0,m.jsx)(Ue,{name:"visibleToAll",type:"checkbox",className:"mt-2"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4 ",children:[(0,m.jsx)("label",{children:"Applicable Centers"}),(0,m.jsx)(ze,{name:"applicableCenters",isMulti:!0,options:null!==o&&void 0!==o?o:[]})]}),(0,m.jsx)("div",{className:"col-md-8 d-flex justify-content-end",style:{height:"70px"},children:(0,m.jsx)(T.A,{type:"submit",color:"success",className:"text-white",style:{marginTop:"28px"},children:"Submit"})})]})]})})},qe=e=>{let{modal:s,toggle:l,apiFlag:a,setApiFlag:i}=e;return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(b.A,{size:"xl",isOpen:s,toggle:l,centered:!0,title:"Add Tax",children:(0,m.jsx)(Be,{toggle:l,apiFlag:a,setApiFlag:i})})})},Ve=["name","type"],Ge=E.Ik().shape({taxName:E.Yj().required("Tax Name is required"),taxType:E.Yj().oneOf(["FIXED","PERCENTAGE"],"Invalid type").required("Tax type is required"),taxValue:E.ai().min(0,"Must be positive").required("Tax value is required"),visibleToAll:E.zM().optional(),applicableCenters:E.YO().of(E.Yj()).optional(),startDate:E.p6().required("Start date is required"),endDate:E.p6().min(E.KR("startDate"),"End date must be after start date").required("End date is required"),status:E.zM().optional()}),Ye=e=>{let{name:s,options:l=[],isMulti:t=!1,placeholder:a="Select..."}=e;const{values:i,setFieldValue:n,touched:r,errors:o}=(0,w.j7)(),d=(0,w.O6)(i,s),c=(0,w.O6)(o,s),u=(0,w.O6)(r,s);return(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(je,{options:l,isMulti:t,defaultValue:d,onChange:e=>n(s,e),placeholder:a}),u&&c&&(0,m.jsx)("div",{className:"text-danger",children:c})]})},_e=e=>{let{name:s,type:l="text"}=e,t=(0,v.A)(e,Ve);const{values:a,handleChange:i,handleBlur:n,errors:r,touched:o}=(0,w.j7)(),d=(0,w.O6)(r,s),c=(0,w.O6)(o,s),u=(0,w.O6)(a,s),x=(0,g.A)({id:s,name:s,onChange:i,onBlur:n,type:l,invalid:Boolean(c&&d)},t);return"checkbox"===l?x.checked=u:x.value=u,(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)(C.A,(0,g.A)({},x)),c&&d&&(0,m.jsx)("div",{className:"text-danger",children:d})]})},We=e=>{var s;let{modal:l,toggle:a,data:i,setApiFlag:n,apiFlag:r}=e;const o=(0,d.wA)(),c=(0,ve.m)();(0,t.useEffect)(()=>{o((0,O.Qf8)())},[o]);const u=(0,d.d4)(e=>e.Center.allCenters),x=u&&u.map(e=>({label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e._id}));return(0,m.jsx)(t.Fragment,{children:(0,m.jsx)(b.A,{size:"xl",isOpen:l,toggle:a,centered:!0,title:"Edit Tax",children:(0,m.jsx)(w.l1,{initialValues:{taxName:(null===i||void 0===i?void 0:i.taxName)||"",taxType:(null===i||void 0===i?void 0:i.taxType)||"",taxValue:(null===i||void 0===i?void 0:i.taxValue)||"",visibleToAll:(null===i||void 0===i?void 0:i.visibleToAll)||!1,applicableCenters:(null===i||void 0===i||null===(s=i.applicableCenters)||void 0===s?void 0:s.map(e=>e))||[],startDate:null!==i&&void 0!==i&&i.startDate?i.startDate.split("T")[0]:"",endDate:null!==i&&void 0!==i&&i.endDate?i.endDate.split("T")[0]:"",status:(null===i||void 0===i?void 0:i.status)||!1},validationSchema:Ge,onSubmit:async e=>{const s=(0,g.A)({_id:i._id},e);try{(await o((0,Re.pO)(s)).unwrap()).success&&(a(),n(!r))}catch(l){c(l)||(console.error("Edit tax failed:",l),be.oR.error(l.message||"Failed to update tax."))}},children:()=>(0,m.jsxs)(w.lV,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Tax Name"}),(0,m.jsx)(_e,{name:"taxName"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Tax Type"}),(0,m.jsx)(Ye,{name:"taxType",isMulti:!1,options:[{value:"FIXED",label:"Fixed"},{value:"PERCENTAGE",label:"Percentage"}]})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Tax Value"}),(0,m.jsx)(_e,{name:"taxValue",type:"number"})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"Start Date"}),(0,m.jsx)(_e,{name:"startDate",type:"date"})]}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:"End Date"}),(0,m.jsx)(_e,{name:"endDate",type:"date",min:(new Date).toISOString().split("T")[0]})]}),(0,m.jsx)("div",{className:"col-md-4 mt-2",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("label",{children:" Visible To All "}),(0,m.jsx)(_e,{name:"visibleToAll",type:"checkbox",className:"mt-2"})]}),(0,m.jsxs)("div",{className:"col-md-2",children:[(0,m.jsx)("label",{children:" Active "}),(0,m.jsx)(_e,{name:"status",type:"checkbox",className:"mt-2"})]})]})})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-md-4 ",children:[(0,m.jsx)("label",{children:"Applicable Centers"}),(0,m.jsx)(Ye,{name:"applicableCenters",isMulti:!0,options:null!==x&&void 0!==x?x:[]})]}),(0,m.jsx)("div",{className:"col-md-8 d-flex justify-content-end",style:{height:"70px"},children:(0,m.jsx)(T.A,{type:"submit",color:"success",className:"text-white",style:{marginTop:"28px"},children:"Submit"})})]})]})})})})},He=()=>{const e=(0,a.Zp)(),s=(0,d.wA)(),[l,i]=(0,t.useState)(!1),[n,r]=(0,t.useState)(""),[o,u]=(0,t.useState)(!1),[x,h]=(0,t.useState)({isOpen:!1,data:null}),[p,v]=(0,t.useState)({isOpen:!1,data:null}),[b,A]=(0,t.useState)(1),[y,S]=(0,t.useState)(10),[E,w]=(0,t.useState)(""),O=(0,d.d4)(e=>e.Taxes.data),P=(0,d.d4)(e=>e.Taxes.totalCount),k=(0,d.d4)(e=>e.Taxes.totalPages),I=localStorage.getItem("micrologin"),D=I?JSON.parse(I).token:null,{loading:R,hasPermission:M,roles:F}=(0,c.S)(D),L=M("SETTING","TAXMANAGEMENTSETTING","READ"),z=(0,ve.m)();(0,t.useEffect)(()=>{const e=setTimeout(()=>{r(E)},500);return()=>clearTimeout(e)},[E]);return(0,t.useEffect)(()=>{(async()=>{if(L)try{await s((0,Re.yU)({page:b,limit:y,search:n})).unwrap()}catch(e){z(e)||be.oR.error("Failed to fetch tax list.")}})()},[s,b,y,n,o,L]),R?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,m.jsx)(le.A,{color:"primary",className:"d-block",style:{width:"3rem",height:"3rem"}})}):L?(0,m.jsxs)("div",{className:"container-fluid d-flex flex-column h-100 px-3",children:[(0,m.jsx)("div",{className:"mt-4 mx-4",children:(0,m.jsx)(j.A,{title:"Tax Management",pageTitle:"Tax Management"})}),(0,m.jsx)(U.A,{className:"p-3 bg-white",children:(0,m.jsxs)(N.A,{className:"g-2 align-items-center",children:[(0,m.jsx)(f.A,{sm:4,children:(0,m.jsxs)(ce.A,{children:[(0,m.jsx)(C.A,{type:"text",value:E,onChange:e=>w(e.target.value),placeholder:"Search for name"}),(0,m.jsx)(me.A,{children:(0,m.jsx)("i",{className:"ri-search-line"})})]})}),(0,m.jsx)(xe.A,{accessRolePermission:null===F||void 0===F?void 0:F.permissions,permission:"create",children:(0,m.jsx)(f.A,{className:"col-sm-auto ms-auto",children:(0,m.jsxs)(T.A,{color:"success",className:"text-white",onClick:()=>i(!0),children:[(0,m.jsx)("i",{className:"ri-add-fill me-1 align-bottom"})," Add Tax"]})})})]})}),(0,m.jsx)("div",{className:"flex-grow-1 d-flex flex-column overflow-auto",children:(0,m.jsx)(De,{taxCode:O,totalCount:P,totalPages:k,setEditOffer:v,setDeleteOffer:h,currentPage:b,itemsPerPage:y,onPageChange:e=>{A(e)},onItemsPerPageChange:e=>{S(e),A(1)},userPermissions:null===F||void 0===F?void 0:F.permissions})}),(0,m.jsx)(q.A,{show:x.isOpen,onDeleteClick:async()=>{if(null===x||void 0===x||!x.data)return;const e=(0,g.A)((0,g.A)({},null===x||void 0===x?void 0:x.data),{},{deleted:!0});try{(await s((0,Re.pO)(e)).unwrap()).success&&(u(!o),h({isOpen:!1,data:null}))}catch(l){z(l)||be.oR.error(l.message||"Failed to delete tax.")}},onCloseClick:()=>h({data:null,isOpen:!1})}),(0,m.jsx)(We,{modal:null===p||void 0===p?void 0:p.isOpen,toggle:()=>{v({data:null,isOpen:!1})},data:null===p||void 0===p?void 0:p.data,setApiFlag:u,apiFlag:o}),(0,m.jsx)(qe,{modal:l,toggle:()=>i(!l),apiFlag:o,setApiFlag:u})]}):(e("/unauthorized"),null)},Xe=e=>{let{children:s,className:l=""}=e;return(0,m.jsx)("div",{style:{minWidth:"250px",backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"box-shadow 0.3s ease-in-out"},className:l,children:s})},Je=e=>{let{totalUsers:s=0,avatars:l=[],roleName:t="Unnamed Role",onEdit:a,onDelete:i,permissions:n=[]}=e;return(0,m.jsxs)(Xe,{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:"250px",width:"100%",height:"100%",padding:"1rem",boxSizing:"border-box"},children:[(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,m.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#4B5563"},children:["Total ",s," user",1!==s?"s":""]}),s>0&&l.length>0&&(0,m.jsxs)("div",{style:{display:"flex",marginLeft:"0.5rem"},children:[l.slice(0,3).map((e,s)=>(0,m.jsx)("img",{src:e,alt:"",style:{width:"2rem",height:"2rem",borderRadius:"9999px",border:"2px solid white",objectFit:"cover",marginLeft:0===s?"0":"-0.5rem"}},s)),l.length>3&&(0,m.jsxs)("span",{style:{width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"9999px",backgroundColor:"#E5E7EB",color:"#4B5563",fontSize:"0.75rem",fontWeight:500,border:"2px solid white",marginLeft:"-0.5rem"},children:["+",l.length-3]})]})]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#111827",margin:0},children:t}),(0,m.jsx)(xe.A,{accessRolePermission:n,permission:"edit",children:(0,m.jsxs)("button",{onClick:a,style:{marginTop:"0.25rem",fontSize:"0.875rem",color:"#4F46E5",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:[(0,m.jsx)("i",{className:"bx bx-edit-alt",style:{fontSize:"1rem",marginRight:"0.25rem"}}),"Edit Role"]})})]}),(0,m.jsx)(xe.A,{accessRolePermission:n,permission:"delete",children:s<=0?(0,m.jsx)("button",{onClick:i,style:{padding:"0.5rem",background:"none",border:"none",cursor:"pointer",color:"#9CA3AF"},onMouseEnter:e=>e.currentTarget.style.color="#EF4444",onMouseLeave:e=>e.currentTarget.style.color="#9CA3AF",children:(0,m.jsx)("i",{className:"bx bx-trash",style:{fontSize:"1.25rem"}})}):""})]})]})},Ke=e=>{let{onAdd:s}=e;return(0,m.jsxs)(Xe,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",minWidth:"250px",width:"100%",height:"100%",padding:"1rem",boxSizing:"border-box"},children:[(0,m.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:500,color:"#111827",marginBottom:"0.5rem"},children:"Add Role"}),(0,m.jsx)("p",{style:{fontSize:"0.875rem",color:"#6B7280",marginBottom:"1rem"},children:"Add new role, if it doesn\u2019t exist."}),(0,m.jsxs)("button",{onClick:s,style:{display:"inline-flex",alignItems:"center",padding:"0.5rem 1rem",backgroundColor:"#4F46E5",color:"white",fontSize:"0.875rem",fontWeight:500,borderRadius:"0.375rem",border:"none",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",cursor:"pointer"},children:[(0,m.jsx)("i",{className:"bx bx-plus",style:{fontSize:"1rem",marginRight:"0.5rem"}}),"Add Role"]})]})},Qe=l.p+"static/media/profile-image.095de2657a3c6d22d251.png";var Ze=l(25601);const $e=(0,l(77784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),es=[{key:"CENTER",label:"Center",subModules:[]},{key:"NURSE",label:"Nurse",subModules:[]},{key:"LEAD",label:"Lead",subModules:[]},{key:"BOOKING",label:"Booking",subModules:[{name:"PRESCRIPTION",label:"Prescription"},{name:"PAYMENT",label:"Payment"}]},{key:"INTERN",label:"Intern",subModules:[{name:"INTERNTIMELINE",label:"Intern Timeline"},{name:"INTERNBILLING",label:"Intern Bill"}]},{key:"PATIENTS",label:"Paitents",subModules:[{name:"PATIENTSTIMELINE",label:"Paitents Timeline"},{name:"PATIENTSHISTORY",label:"Paitents History"},{name:"PATIENTSBILLING",label:"Paitents Bill"},{name:"PATIENTCHARTS",label:"Paitents Chart"}]},{key:"USER",label:"User",subModules:[{name:"USERPASSWORDCHANGE",label:"User Password Change"},{name:"SUSPENDUSER",label:"Suspend User"}]},{key:"SETTING",label:"Setting",subModules:[{name:"MEDICINESETTING",label:"Medicine"},{name:"INVOICESETTING",label:"Invoice"},{name:"ADVANCEPAYMENTSETTING",label:"Advanece Payment"},{name:"CALENDERSETTING",label:"Calender"},{name:"OFFERCODESETTING",label:"Offer Code"},{name:"TAXMANAGEMENTSETTING",label:"Tax Management"},{name:"ROLESSETTING",label:"Roles"}]},{key:"RECYCLEBIN",label:"Recycle Bin",subModules:[{name:"CENTERLIST",label:"Center List"},{name:"PATIENTSLIST",label:"Paitents List"},{name:"CHARTLIST",label:"Paitents Chart"},{name:"BILLLIST",label:"Paitents Bill"},{name:"LEADLIST",label:"Lead List"},{name:"MEDICINELIST",label:"Medicine List"},{name:"INTERNLIST",label:"Intern List"}]},{key:"REPORT",label:"Report",subModules:[{name:"DASHBOARD",label:"Dashboard"},{name:"Report",label:"Report"},{name:"FINANCE",label:"Finance"},{name:"PATIENTANALYTICS",label:"Patient Analytics"},{name:"DBLOGS",label:"DB Logs"},{name:"LEADANALYTICS",label:"Lead Analytics"},{name:"OPDANALYTICS",label:"OPD Analytics"}]}],ss=["READ","WRITE","DELETE","NONE"],ls=e=>{let{isOpen:s,onClose:l,onSubmit:a,initialData:i}=e;const[n,r]=(0,t.useState)(""),[o,d]=(0,t.useState)([]),[c,u]=(0,t.useState)(null),x=Boolean(i);(0,t.useEffect)(()=>{r((null===i||void 0===i?void 0:i.name)||""),null!==i&&void 0!==i&&i.permissions&&Array.isArray(i.permissions)?d(es.map(e=>{let{key:s,subModules:l}=e;const t=i.permissions.find(e=>e.module.toUpperCase()===s);return{module:s,type:(null===t||void 0===t?void 0:t.type)||"NONE",subModules:l.map(e=>{var s,l;return{name:e.name,type:(null===t||void 0===t||null===(s=t.subModules)||void 0===s||null===(l=s.find(s=>s.name===e.name))||void 0===l?void 0:l.type)||"NONE"}})}})):d(es.map(e=>{let{key:s,subModules:l}=e;return{module:s,type:"NONE",subModules:l.map(e=>({name:e.name,type:"NONE"}))}}))},[i]);const h=()=>{l()};return s?(0,m.jsx)("div",{style:{position:"fixed",inset:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.5)",padding:"20px"},children:(0,m.jsxs)("div",{style:{width:"100%",maxWidth:"900px",backgroundColor:"#fff",borderRadius:"12px",padding:"24px",position:"relative",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 5px 15px rgba(0,0,0,0.3)"},children:[(0,m.jsx)("button",{onClick:h,style:{position:"absolute",top:"16px",right:"16px",border:"none",background:"none",cursor:"pointer",color:"#555"},"aria-label":"Close",children:(0,m.jsx)($e,{size:20})}),(0,m.jsx)("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#333",textAlign:"center",marginBottom:"4px"},children:x?"Edit Role":"Add Role"}),(0,m.jsx)("p",{style:{fontSize:"14px",color:"#777",textAlign:"center",marginBottom:"24px"},children:x?"Update role permissions":"Create a new role and set permissions"}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a({name:n,permissions:o})},children:[(0,m.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,m.jsx)("label",{style:{display:"block",color:"#333",marginBottom:"6px"},children:"Role Name"}),(0,m.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #ccc",fontSize:"14px"},placeholder:"Enter role name"})]}),es.map(e=>{let{key:s,label:l,subModules:t}=e;const a=(i=s,o.find(e=>e.module===i)||{module:i,type:"NONE",subModules:[]});var i;return(0,m.jsxs)("div",{style:{border:"1px solid #ccc",borderRadius:"8px",padding:"16px",marginBottom:"20px",backgroundColor:"#f9f9f9"},children:[(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px",fontWeight:"500",color:"#333"},children:l}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[ss.map(e=>(0,m.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,m.jsx)("input",{type:"radio",name:"module-".concat(s),value:e,checked:a.type===e,onChange:()=>((e,s)=>{d(l=>l.map(l=>l.module===e?(0,g.A)((0,g.A)({},l),{},{type:s,subModules:l.subModules.map(e=>(0,g.A)((0,g.A)({},e),{},{type:s}))}):l)),"NONE"===s&&u(s=>s===e?null:s)})(s,e)}),(0,m.jsx)("span",{style:{textTransform:"capitalize",fontSize:"14px",color:"#333"},children:e.toLowerCase()})]},e)),("READ"===a.type||"WRITE"===a.type||"DELETE"===a.type)&&(0,m.jsx)("button",{type:"button",onClick:()=>(e=>{u(s=>s===e?null:e)})(s),style:{fontSize:"12px",padding:"4px 8px",border:"1px solid #bbb",backgroundColor:"#fff",color:"#333",borderRadius:"4px",cursor:"pointer"},children:c===s?"Hide Submodules":"Show Submodules"})]})]}),c===s&&(0,m.jsx)("div",{style:{backgroundColor:"#eef2ff",border:"1px solid #c7d2fe",borderRadius:"6px",padding:"12px 16px",marginTop:"8px"},children:0===t.length?(0,m.jsx)("p",{style:{fontSize:"14px",color:"#555"},children:"No submodules present."}):t.map(e=>{var l,t;const i=(e=>{switch(e){case"READ":return["READ","NONE"];case"WRITE":return["READ","WRITE","NONE"];case"DELETE":return["READ","WRITE","DELETE","NONE"];default:return["NONE"]}})(a.type),n=(null===(l=a.subModules)||void 0===l||null===(t=l.find(s=>s.name===e.name))||void 0===t?void 0:t.type)||"NONE";return(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px",paddingLeft:"8px",borderBottom:"1px dashed #ccc",paddingBottom:"6px"},children:[(0,m.jsx)("span",{style:{fontSize:"14px",color:"#333"},children:e.label}),(0,m.jsx)("div",{style:{display:"flex",gap:"12px"},children:i.map(l=>(0,m.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,m.jsx)("input",{type:"radio",name:"sub-".concat(s,"-").concat(e.name),value:l,checked:n===l,onChange:()=>((e,s,l)=>{d(t=>t.map(t=>t.module===e?(0,g.A)((0,g.A)({},t),{},{subModules:t.subModules.map(e=>e.name===s?(0,g.A)((0,g.A)({},e),{},{type:l}):e)}):t))})(s,e.name,l)}),(0,m.jsx)("span",{style:{fontSize:"13px",color:"#333",textTransform:"capitalize"},children:l.toLowerCase()})]},l))})]},e.name)})})]},s)}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,m.jsx)("button",{type:"button",onClick:h,style:{padding:"10px 16px",backgroundColor:"#f5f5f5",border:"1px solid #ccc",borderRadius:"6px",cursor:"pointer",color:"#333"},children:"Cancel"}),(0,m.jsx)("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:x?"Update":"Create"})]})]})]})}):null},ts=e=>{let{isOpen:s,onClose:l,onConfirm:t,roleName:a}=e;return s?(0,m.jsx)("div",{style:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(5px)",padding:"20px"},children:(0,m.jsxs)("div",{style:{width:"100%",maxWidth:"400px",backgroundColor:"#fff",borderRadius:"12px",padding:"24px",position:"relative",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.3)"},children:[(0,m.jsx)("button",{onClick:l,style:{position:"absolute",top:"16px",right:"16px",border:"none",background:"none",cursor:"pointer",color:"#555"},"aria-label":"Close",children:(0,m.jsx)($e,{size:20})}),(0,m.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#333",marginBottom:"16px"},children:"Confirm Deletion"}),(0,m.jsxs)("p",{style:{fontSize:"14px",color:"#555",marginBottom:"24px"},children:["Are you sure you want to delete the role ",(0,m.jsx)("strong",{children:a}),"? This action cannot be undone."]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,m.jsx)("button",{type:"button",onClick:l,style:{padding:"10px 16px",backgroundColor:"#f5f5f5",border:"1px solid #ccc",borderRadius:"6px",cursor:"pointer",color:"#333"},children:"Cancel"}),(0,m.jsx)("button",{type:"button",onClick:t,style:{padding:"10px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Delete"})]})]})}):null},as=()=>{const e=(0,a.Zp)(),s=localStorage.getItem("micrologin"),l=s?JSON.parse(s).token:null,[i,n]=(0,t.useState)([]),[r,o]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[x,h]=(0,t.useState)(!1),[p,v]=(0,t.useState)(null),[b,A]=(0,t.useState)(null),[N,f]=(0,t.useState)(1),[y,C]=(0,t.useState)(1),{loading:S,hasPermission:E,roles:w}=(0,c.S)(l),O=E("SETTING","ROLESSETTING","READ"),P=(0,ve.m)(),k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(l)try{var s,t,a;o(!0);const i=await(0,Ze.L_M)({page:e,limit:10,token:l});n((null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.data)||[]),C((null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.totalPages)||1),f((null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.currentPage)||e)}catch(i){P(i)||be.oR.error("Failed to fetch roles.")}finally{o(!1)}};(0,t.useEffect)(()=>{O&&k(N)},[l,N,O]);return S?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,m.jsx)(le.A,{color:"primary",className:"d-block",style:{width:"3rem",height:"3rem"}})}):O?(0,m.jsxs)("div",{className:"container-fluid d-flex flex-column h-100 px-3",children:[(0,m.jsx)("div",{className:"mt-4 mx-4",children:(0,m.jsx)(j.A,{title:"Roles Management",pageTitle:"Roles Management"})}),(0,m.jsxs)(U.A,{className:"p-3 bg-white",children:[(0,m.jsx)("h1",{children:"Roles Management"}),(0,m.jsxs)("div",{className:"p-4",children:[(0,m.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"15px"},children:r?(0,m.jsx)("p",{children:"Loading roles..."}):(0,m.jsxs)(m.Fragment,{children:[i.map(e=>(0,m.jsx)(Je,{totalUsers:e.userCount,avatars:[Qe],roleName:e.name,onEdit:()=>(e=>{v(e),u(!0)})(e),onDelete:()=>(e=>{A(e),h(!0)})(e),permissions:null===w||void 0===w?void 0:w.permissions},e.id||e._id)),(0,m.jsx)(xe.A,{accessRolePermission:null===w||void 0===w?void 0:w.permissions,permission:"create",children:(0,m.jsx)(Ke,{onAdd:()=>{v(null),u(!0)}})})]})}),!r&&y>1&&(0,m.jsxs)("div",{className:"mt-4 d-flex justify-content-center align-items-center gap-2",children:[(0,m.jsx)(T.A,{color:"primary",disabled:1===N,onClick:()=>{N>1&&f(e=>e-1)},children:"Prev"}),(0,m.jsxs)("span",{className:"mx-2",children:["Page ",N," of ",y]}),(0,m.jsx)(T.A,{color:"primary",disabled:N===y,onClick:()=>{N<y&&f(e=>e+1)},children:"Next"})]})]})]}),d&&(0,m.jsx)(ls,{isOpen:d,onClose:()=>u(!1),onSubmit:async e=>{try{if(o(!0),p){const{name:s,permissions:t}=e;await(0,Ze.D3X)({id:p.id||p._id,name:s,permissions:t,token:l}),be.oR.success("Role updated successfully!"),n(e=>e.map(e=>(e.id||e._id)===(p.id||p._id)?(0,g.A)((0,g.A)({},e),{},{name:s,permissions:t}):e))}else{const{name:s,permissions:t}=e;await(0,Ze.CmL)({name:s,permissions:t,token:l}),be.oR.success("Role created successfully!"),await k(N)}u(!1),v(null)}catch(s){P(s)||be.oR.error(p?"Failed to update role.":"Failed to create role.")}finally{o(!1)}},initialData:p||void 0}),x&&(0,m.jsx)(ts,{isOpen:x,onClose:()=>h(!1),onConfirm:async()=>{try{o(!0),await(0,Ze.EOX)({id:b.id||b._id,token:l}),be.oR.success("Role deleted successfully!"),await k(N),h(!1),A(null)}catch(e){P(e)||be.oR.error("Failed to delete role.")}finally{o(!1)}},roleName:null===b||void 0===b?void 0:b.name})]}):(e("/unauthorized"),null)},is=e=>(0,m.jsx)(t.Fragment,{children:(0,m.jsx)("div",{className:"page-content",children:(0,m.jsx)(x.A,{fluid:!0,children:(0,m.jsxs)("div",{className:"chat-wrapper d-lg-flex gap-1 my-n4 mx-n4",children:[(0,m.jsx)(u,{}),(0,m.jsxs)(a.BV,{children:[(0,m.jsx)(a.qh,{path:"/center",element:(0,m.jsx)(h,{})}),(0,m.jsx)(a.qh,{path:"/medicine",element:(0,m.jsx)(p.default,{})}),(0,m.jsx)(a.qh,{path:"/billing",element:(0,m.jsx)(Z,{})}),(0,m.jsx)(a.qh,{path:"/calender",element:(0,m.jsx)(de,{})}),(0,m.jsx)(a.qh,{path:"/offercode",element:(0,m.jsx)(Ie,{})}),(0,m.jsx)(a.qh,{path:"/taxmanagement",element:(0,m.jsx)(He,{})}),(0,m.jsx)(a.qh,{path:"/rolesmanagment",element:(0,m.jsx)(as,{})})]})]})})})})},77784:(e,s,l)=>{l.d(s,{A:()=>u});var t=l(89379),a=l(80045),i=l(65043);const n=e=>{const s=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,l)=>l?l.toUpperCase():s.toLowerCase()))(e);return s.charAt(0).toUpperCase()+s.slice(1)},r=function(){for(var e=arguments.length,s=new Array(e),l=0;l<e;l++)s[l]=arguments[l];return s.filter((e,s,l)=>Boolean(e)&&""!==e.trim()&&l.indexOf(e)===s).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],c=(0,i.forwardRef)((e,s)=>{let{color:l="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:m,className:u="",children:x,iconNode:h}=e,p=(0,a.A)(e,d);return(0,i.createElement)("svg",(0,t.A)((0,t.A)((0,t.A)({ref:s},o),{},{width:n,height:n,stroke:l,strokeWidth:m?24*Number(c)/Number(n):c,className:r("lucide",u)},!x&&!(e=>{for(const s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(p)&&{"aria-hidden":"true"}),p),[...h.map(e=>{let[s,l]=e;return(0,i.createElement)(s,l)}),...Array.isArray(x)?x:[x]])}),m=["className"],u=(e,s)=>{const l=(0,i.forwardRef)((l,o)=>{let{className:d}=l,u=(0,a.A)(l,m);return(0,i.createElement)(c,(0,t.A)({ref:o,iconNode:s,className:r("lucide-".concat((x=n(e),x.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),d)},u));var x});return l.displayName=n(e),l}}}]);
//# sourceMappingURL=8451.9c70b871.chunk.js.map