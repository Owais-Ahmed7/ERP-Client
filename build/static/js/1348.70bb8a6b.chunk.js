"use strict";(self.webpackChunkjagruti_software=self.webpackChunkjagruti_software||[]).push([[1348],{24410:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(65043),l=s(35475),r=s(12327),n=s(22345),i=s(70579);const d=e=>{let{title:t,pageTitle:s}=e;return(0,i.jsx)(a.Fragment,{children:(0,i.jsx)(r.A,{children:(0,i.jsx)(n.A,{xs:12,children:(0,i.jsxs)("div",{className:"page-title-box p-3 d-flex flex-column flex-sm-row align-items-start align-items-sm-center justify-content-between gap-2",children:[(0,i.jsx)("h4",{className:"mb-2 mb-sm-0",children:t}),(0,i.jsx)("div",{className:"page-title-right",children:(0,i.jsxs)("ol",{className:"breadcrumb m-0",children:[(0,i.jsx)("li",{className:"breadcrumb-item",children:(0,i.jsx)(l.N_,{to:"#",children:s})}),(0,i.jsx)("li",{className:"breadcrumb-item active",children:t})]})})]})})})})}},29899:(e,t,s)=>{s.d(t,{A:()=>x});var a=s(65043),l=s(22166),r=s(98093),n=s(54027),i=s(26259),d=s(98396),o=s(70579);const c={Planned:"bg-blue-100 text-blue-700 border-blue-300",Completed:"bg-green-100 text-green-700 border-green-300",Missed:"bg-red-100 text-red-700 border-red-300",Admitted:"bg-emerald-100 text-emerald-700 border-emerald-300 font-bold"},m=[{label:"All",value:""},{label:"Today Visits",value:"today"},{label:"Tomorrow Visits",value:"tomorrow"},{label:"Past Visits",value:"past"},{label:"Future Visits",value:"future"},{label:"Planned Visits",value:"planned"}],x=e=>{let{leadDate:t}=e;const s=(0,l.wA)(),{contacts:x=[],loading:h,pagination:p={}}=(0,l.d4)(e=>e.HubspotContacts),[u,g]=(0,a.useState)({visitType:"",status:"",assignedTo:""}),[b,j]=(0,a.useState)(""),[y,f]=(0,a.useState)(1),[v,A]=(0,a.useState)(10),[N,w]=(0,a.useState)(null),k=(0,a.useRef)({});(0,a.useEffect)(()=>{const e={page:y,limit:v};"planned"===b?e.status="Planned":e.visitDate=b,console.log(e,"params"),s((0,r.R95)(e))},[b,y,v,s]),(0,a.useEffect)(()=>(w(null),k.current={},()=>{k.current={},w(null)}),[x,y,b]);const C=(0,a.useMemo)(()=>{let e=x;return u.visitType&&(e=e.filter(e=>e.visitType===u.visitType)),u.status&&(e=e.filter(e=>e.status===u.status)),u.assignedTo&&(e=e.filter(e=>e.assignedTo===u.assignedTo)),e},[x,u]);console.log(C,"filteredContacts");const L=(null===p||void 0===p?void 0:p.totalPages)||1;null===p||void 0===p||p.totalItems;return(0,o.jsxs)("div",{className:"p-2 sm:p-6 max-w-7xl mx-auto",children:[(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow flex flex-wrap items-center gap-2 px-4 py-3 mb-6 border border-gray-100",children:[(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,o.jsx)("button",{className:"px-4 py-2 rounded-lg font-medium border transition-colors duration-150 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 ".concat(b===e.value?"bg-blue-600 text-gray-700 border-blue-600 shadow":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-blue-50"),onClick:()=>{j(e.value),f(1)},children:e.label},e.value))}),(0,o.jsx)("div",{className:"flex-1"})]}),(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Name"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Center"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Email"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Phone"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Gender"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Age"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Visit Date"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Amount"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Relation with pat"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Issues"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Comments"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Lead Status"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Lifecycle Stage"}),(0,o.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:h?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,className:"text-center py-12 text-gray-400 text-lg font-medium",children:"Loading contacts..."})}):0===C.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,className:"text-center py-12 text-gray-400 text-lg font-medium",children:"No contacts found."})}):C.map((e,t)=>(0,o.jsxs)("tr",{className:"transition-colors group ".concat("Admitted"===e.leadStatus?"bg-emerald-50 hover:bg-emerald-100 border-l-4 border-emerald-500":"hover:bg-blue-50"),children:[(0,o.jsx)("td",{className:"px-4 py-3 font-bold whitespace-nowrap font-semibold text-gray-900 flex items-center gap-2",children:(0,n.k)("".concat(e.firstname||""," ").concat(e.lastname||""))||"N/A"}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.center}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.email}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.phone}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:"Option 1"===e.gender?"Male":"Option 2"===e.gender?"Female":"Other"}),(0,o.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:[e.patient_age," Years"]}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.visitDate}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.amount}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.relation_with_patient}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.issues}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-700",children:e.comments}),(0,o.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,o.jsx)("span",{className:"px-2 py-1 rounded-full border text-xs font-semibold ".concat(c[e.leadStatus]||"bg-gray-100 text-gray-700 border-gray-300"),children:e.leadStatus})}),(0,o.jsx)("td",{className:"px-4 py-3 text-capitalize whitespace-nowrap text-gray-700",children:e.lifecyclestage}),(0,o.jsx)("td",{className:"px-4 py-3 text-xs whitespace-nowrap text-gray-700",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)(i.A,{ref:e=>k.current[t]=e,onClick:()=>{var t;return s((0,r.IPd)({data:null,leadData:{leadOrigin:"hubspot",patient:{name:null===(t="".concat(e.firstname," ").concat(e.lastname))||void 0===t?void 0:t.trim(),phoneNumber:e.phone,email:e.email}},isOpen:!0}))},onMouseEnter:()=>w(t),onMouseLeave:()=>w(null),children:[(0,o.jsx)("i",{className:"ri-user-add-line align-bottom text-white text-muted me-2"})," "]}),N===t&&k.current[t]&&(0,o.jsx)(d.A,{isOpen:!0,target:k.current[t],placement:"top",delay:{show:100,hide:100},children:"Register this HubSpot contact as a new patient"})]})})]},t))})]})}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center justify-between mt-8 gap-2 bg-white rounded-xl shadow border border-gray-100 px-4 py-3",children:[(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing"," ",0===C.length?0:(y-1)*v+1,"-",Math.min(y*v,(null===p||void 0===p?void 0:p.totalItems)||0)," ","of ",(null===p||void 0===p?void 0:p.totalItems)||0," contacts"]}),(0,o.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,o.jsx)("button",{className:"px-3 py-1 rounded border border-gray-300 bg-white text-gray-700 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:opacity-50",onClick:()=>f(e=>Math.max(1,e-1)),disabled:1===y,children:"Previous"}),(0,o.jsxs)("span",{className:"px-2 py-1 text-gray-700 font-medium",children:["Page ",y," of ",L||1]}),(0,o.jsx)("button",{className:"px-3 py-1 rounded border border-gray-300 bg-white text-gray-700 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:opacity-50",onClick:()=>f(e=>Math.min(L,e+1)),disabled:y===L||0===L,children:"Next"}),(0,o.jsx)("select",{className:"ml-2 border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:v,onChange:e=>{A(Number(e.target.value)),f(1)},children:[10,20,50,100].map(e=>(0,o.jsxs)("option",{value:e,children:[e," / page"]},e))})]})]})]})}},41348:(e,t,s)=>{s.r(t),s.d(t,{default:()=>le});var a=s(89379),l=s(65043),r=s(99904),n=s(49157),i=s(18353),d=s(77026),o=s(58509),c=s(9790),m=s(96371),x=s(12934),h=s(12327),p=s(22345),u=s(72679),g=s(87426),b=s(26259),j=s(24410),y=s(78639),f=s(52414),v=s(22166),A=s(98093),N=s(19020),w=s(80899),k=s(86897),C=s(53536),L=s.n(C),P=s(27965),D=(s(7245),s(88682)),S=s(6221),E=s(7493),M=s(23194);const T=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{label:"Patient Name",name:"patientName",type:"text",disabled:e},{label:"Patient Phone Number",name:"patientPhoneNumber",type:"text",disabled:e},{label:"Patient Gender",name:"patientGender",type:"radio",options:["MALE","FEMALE","OTHERS"],disabled:!1},{label:"Patient Age",name:"patientAge",type:"number",disabled:e},{label:"Attended By",name:"attendedBy",type:"text",disabled:!1},{label:"Location",name:"location",type:"checkbox",disabled:!1},{label:"Inquiry Details",name:"inquiry",type:"text",disabled:!1},{label:"Visitor Name",name:"visitorName",type:"text",disabled:!1},{label:"Relation With Patient",name:"relationWithPatient",type:"text",disabled:!1},{label:"Charges",name:"charges",type:"text",disabled:!1},{label:"Reffered By",name:"refferedBy",type:"text",disabled:!1},{label:"Comment",name:"comment",type:"text",disabled:!1},{label:"Inquiry Type",name:"inquiryType",type:"text",disabled:!1},{label:"Given Updates",name:"givenUpdates",type:"text",disabled:!1}]};var U=s(70579);const O=(0,v.Ng)(e=>{var t,s;return{user:e.User.user,isOpen:null===(t=e.Lead.createEditLead)||void 0===t?void 0:t.isOpen,lead:null===(s=e.Lead.createEditLead)||void 0===s?void 0:s.data,centers:e.Center.allCenters,centerAccess:e.User.centerAccess}})(e=>{var t,s,r,n,i,d;let{user:o,isOpen:c,lead:m,centers:x,centerAccess:g,date:j}=e;const y=(0,v.wA)(),[f,N]=(0,l.useState)(null!==m&&void 0!==m&&null!==(t=m.followUp)&&void 0!==t&&t.length?m.followUp:[]);(0,l.useEffect)(()=>{var e;null!==m&&void 0!==m&&null!==(e=m.followUp)&&void 0!==e&&e.length&&N(L().cloneDeep(m.followUp))},[m]);const C=(0,k.Wx)({enableReinitialize:!0,initialValues:{author:o?o._id:"",patientName:m?null===(s=m.patient)||void 0===s?void 0:s.name:"",patientPhoneNumber:m?null===(r=m.patient)||void 0===r?void 0:r.phoneNumber:"",patientGender:m?null===(n=m.patient)||void 0===n?void 0:n.gender:"",patientAge:m?null===(i=m.patient)||void 0===i?void 0:i.age:"",attendedBy:m?m.attendedBy:o?o.name:"",location:Array.isArray(null===m||void 0===m?void 0:m.location)?null===(d=m.location)||void 0===d?void 0:d.map(e=>e._id):[],visitorName:m?m.visitorName:"",relationWithPatient:m?m.relationWithPatient:"",charges:m?m.charges:"",refferedBy:m?m.refferedBy:"",inquiry:m?m.inquiry:"",comment:m?m.comment:"",inquiryType:m?m.inquiryType:"",givenUpdates:m?m.givenUpdates:"",date:m?m.date:""},validationSchema:w.Ik({patientName:w.Yj().required("Please Enter Patient Name"),patientPhoneNumber:w.Yj().required("Please Enter Patient Phone Number"),patientGender:w.Yj().required("Please Select Patient Gender"),patientAge:w.ai().required("Please Enter Patient Age"),attendedBy:w.Yj().required("Please Enter Attendend Name"),location:w.YO().test("notEmpty","Location is required",e=>!(!e||0===e.length)),inquiry:w.Yj().required("Please Enter Inquiry")}),onSubmit:e=>{y(m?(0,A.Q6B)((0,a.A)((0,a.A)({},e),{},{followUp:f.filter(e=>!!e.value),id:m._id,centerAccess:g},j)):(0,A.kQ8)((0,a.A)((0,a.A)({},e),{},{followUp:f.filter(e=>!!e.value),centerAccess:g},j))),O()}}),O=()=>{C.resetForm(),N([]),y((0,A.lHf)({isOpen:!1,data:null}))};return(0,U.jsx)(l.Fragment,{children:(0,U.jsx)(D.A,{centered:!0,isOpen:c,size:"xl",title:"Add Lead",children:(0,U.jsx)("div",{children:(0,U.jsx)(S.A,{onSubmit:e=>(e.preventDefault(),C.handleSubmit(),!1),action:"#",children:(0,U.jsxs)(h.A,{children:[(T(null===m||void 0===m?void 0:m.isRegister)||[]).map((e,t)=>(0,U.jsx)(p.A,{xs:12,lg:6,children:(0,U.jsxs)("div",{className:"mb-3",children:[(0,U.jsx)(E.A,{htmlFor:e,className:"form-label",children:e.label}),"radio"===e.type?(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)("div",{className:"d-flex flex-wrap",children:[(e.options||[]).map((t,s)=>(0,U.jsx)(l.Fragment,{children:(0,U.jsxs)("div",{className:"d-flex me-5 align-items-center",children:[(0,U.jsx)(u.A,{className:"me-2 mt-0",type:e.type,name:e.name,value:t,onChange:C.handleChange,checked:C.values[e.name]===t}),(0,U.jsx)(E.A,{className:"form-label fs-14 mb-0",children:t})]},t+s)},t+s)),C.touched[e.name]&&C.errors[e.name]?(0,U.jsx)(M.A,{type:"invalid",className:"d-block",children:C.errors[e.name]}):null]})}):"checkbox"===e.type?(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)("div",{className:"d-flex flex-wrap",children:[(x||[]).map((t,s)=>{var a;return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)("div",{className:"d-flex me-5 align-items-center",children:[(0,U.jsx)(u.A,{className:"me-2 mt-0",type:e.type,name:e.name,value:null===t||void 0===t?void 0:t._id,onChange:C.handleChange,checked:null===(a=C.values[e.name])||void 0===a?void 0:a.includes(null===t||void 0===t?void 0:t._id)}),(0,U.jsx)(E.A,{className:"form-label fs-9 mb-0",children:t.title||t.label})]},t[e.value])})}),C.touched[e.name]&&C.errors[e.name]?(0,U.jsx)(M.A,{type:"invalid",className:"d-block",children:C.errors[e.name]}):null]})}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(u.A,{name:e.name,className:"form-control",placeholder:"Enter ".concat(e.label),type:e.type,disabled:e.disabled,onChange:C.handleChange,onBlur:C.handleBlur,value:C.values[e.name]||"",invalid:!(!C.touched[e.name]||!C.errors[e.name])}),C.touched[e.name]&&C.errors[e.name]?(0,U.jsx)(M.A,{type:"invalid",children:C.errors[e.name]}):null]})]})},t+e)),(0,U.jsx)(p.A,{xs:12,lg:6,children:(0,U.jsxs)("div",{className:"mb-3",children:[(0,U.jsx)(E.A,{htmlFor:"date",className:"form-label",children:"Date"}),(0,U.jsx)(P.A,{name:"date",value:C.values.date||new Date,onChange:e=>{let[t]=e;const s={target:{value:t,name:"date"}};C.handleChange(s)},options:{dateFormat:"d M Y G:i:S K",enableTime:!0,time_24hr:!1,disableMobile:!0},className:"form-control shadow-none bg-light",id:"date"}),C.touched.date&&C.errors.date?(0,U.jsx)(M.A,{className:"d-block",type:"invalid",children:C.errors.date}):null]})}),(0,U.jsx)(p.A,{xs:12,children:(0,U.jsxs)("div",{children:[(0,U.jsx)(E.A,{children:"Follow Up"}),(0,U.jsxs)("div",{className:"",children:[(f||[]).map((e,t)=>(0,U.jsxs)("div",{className:"d-flex gap-3 align-items-center mb-3",children:[(0,U.jsx)(u.A,{className:"w-50",type:"textarea",placeholder:"Follow up ".concat(t+1),onChange:e=>{let s=[...f];s[t].value=e.target.value,N(s)},value:e.value},t),(0,U.jsx)(b.A,{type:"button",onClick:()=>{let e=[...f];e=e.filter((e,s)=>s!==t),N(e)},size:"sm",color:"danger",outline:!0,children:(0,U.jsx)("i",{className:"ri-close-circle-line fs-6"})})]})),(0,U.jsx)("button",{type:"button",onClick:()=>N([...f,{value:""}]),className:"btn btn-sm btn-secondary",children:"Add"})]})]})}),(0,U.jsx)(p.A,{xs:12,children:(0,U.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-3",children:[(0,U.jsx)(b.A,{type:"submit",size:"sm",color:"primary",outline:!0,children:"Save"}),(0,U.jsx)(b.A,{onClick:O,size:"sm",color:"danger",children:"Cancel"})]})})]})})})})})});var q=s(76263),F=s(32171),B=s(62739),R=s(85873),H=s(81349),W=s(16854),I=s.n(W),_=s(45627),z=s(97950);const G=e=>{let{children:t,node:s}=e;const a=(0,l.useRef)();(0,l.useEffect)(()=>{const{current:e}=a;return!document||s||e||(a.current=document.createElement("div"),document.body.appendChild(a.current)),()=>{e&&document.body.removeChild(e)}},[s]);const r=s||a.current;return r?z.createPortal(t,r):null},V=e=>{let{leads:t,leadQuery:s,setDeleteLead:r,setMergeLead:n,setUnMergeLead:i}=e;const d=(0,v.wA)();return(0,U.jsx)(l.Fragment,{children:(0,U.jsx)("div",{className:"overflow-scroll",children:(0,U.jsxs)(h.A,{className:"mt-3 py-2 row-gap-2 lead-table  dropdown-portal",children:[(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Patient Name"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Date"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Patient Number"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Patient Age"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Patient Gender"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Attended By"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Location"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Visitor Name"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Reffered By"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Inquiry details"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1,children:"Follow Up"}),(0,U.jsx)(p.A,{className:"display-6 fs-13 font-semi-bold",xs:1}),(t||[]).map(e=>(0,U.jsx)(p.A,{className:"bg-white py-3 overflow-auto",xs:12,children:(0,U.jsxs)(h.A,{className:"p-0",children:[" ",(e.leads||[]).map((e,t)=>(0,U.jsxs)(l.Fragment,{children:[(0,U.jsxs)(p.A,{className:"d-flex align-items-center border border-top-2 border-bottom-2 p-1",xs:1,children:[(0,U.jsxs)("span",{className:"text-primary fs-15 me-2",children:[t+1,":"]}),"  ",(0,U.jsx)("h6",{id:"lead-".concat(e._id),className:e.isRegister?"text-success fs-6 mb-0":"mb-0",children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.patient.name})}),(0,U.jsx)(y.A,{isTrue:e.isRegister,children:(0,U.jsx)(q.A,{target:"lead-".concat(e._id),children:"Registered Patient"})})]}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.date?(0,_.A)(new Date(e.date),"dd/MM/yyyy hh:mm a"):""})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.patient.phoneNumber})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:"".concat(e.patient.age," years")})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.patient.gender})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.attendedBy})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:Array.isArray(e.location)?e.location.map(e=>e.title).join(", \n"):e.location})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.visitorName})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.refferedBy})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(0,U.jsx)(I(),{searchWords:[s],autoEscape:!0,textToHighlight:e.inquiry})}),(0,U.jsx)(p.A,{className:"border border-top-2 border-bottom-2 p-1",xs:1,children:(e.followUp||[]).map((e,t)=>(0,U.jsx)("div",{children:e.value},t))}),(0,U.jsx)(p.A,{className:"border border-top-2 text-center border-bottom-2 p-1",xs:1,children:(0,U.jsxs)(F.A,{children:[(0,U.jsx)(B.A,{className:"btn btn-ghost-secondary btn-icon",tag:"button",children:(0,U.jsx)("i",{className:"bx bx-dots-vertical-rounded fs-4"})}),(0,U.jsx)(G,{node:document.querySelector(".dropdown-portal"),children:(0,U.jsxs)(R.A,{style:{width:"200px"},children:[(0,U.jsxs)(H.A,{href:"#",className:"d-block user-profile-show",disabled:e.isRegister,onClick:()=>i(e),children:[(0,U.jsx)("i",{className:"ri-git-branch-fill align-bottom text-muted me-2"})," ","Un Merge"]}),(0,U.jsxs)(H.A,{href:"#",className:"d-block user-profile-show",disabled:e.isRegister,onClick:()=>n(e),children:[(0,U.jsx)("i",{className:"ri-git-merge-fill align-bottom text-muted me-2"})," ","Merge"]}),(0,U.jsxs)(H.A,{href:"#",className:"d-block user-profile-show",disabled:e.isRegister,onClick:()=>d((0,A.IPd)({data:null,leadData:(0,a.A)((0,a.A)({},e),{},{leadOrigin:"generic"}),isOpen:!0})),children:[(0,U.jsx)("i",{className:"ri-user-2-fill align-bottom text-muted me-2"})," ","Register Patient"]}),(0,U.jsxs)(H.A,{href:"#",className:"d-block user-profile-show",onClick:()=>d((0,A.lHf)({data:e,isOpen:!0})),children:[(0,U.jsx)("i",{className:"ri-quill-pen-line align-bottom text-muted me-2"})," ","Edit"]}),(0,U.jsxs)(H.A,{href:"#",disabled:e.isRegister,onClick:()=>r({id:e._id,isOpen:!0}),children:[" ",(0,U.jsx)("i",{className:"ri-delete-bin-5-line align-bottom text-muted me-2"})," ","Delete"]})]})})]})})]},e._id))]})},e._id))]})})})};var Y=s(7867),Q=s(62378),J=s(5780),K=s(46087),X=s(49935);const Z=(0,v.Ng)(e=>({leads:e.Lead.unGroupLeads,searchLoading:e.Lead.searchLoading,centerAccess:e.User.centerAccess}))(e=>{let{leads:t,searchLoading:s,setMergeWith:a,centerAccess:r,date:n}=e;const i=(0,v.wA)(),[d,o]=(0,l.useState)("");(0,l.useEffect)(()=>{(null===d||void 0===d?void 0:d.length)>1&&i((0,A.nMw)({leadQuery:d,centerAccess:JSON.stringify(r),grouped:!1}))},[i,d,r,n]);return(0,U.jsx)(l.Fragment,{children:(0,U.jsxs)("div",{children:[" ",(0,U.jsxs)(X.A,{direction:"down",children:[(0,U.jsx)(E.A,{className:"d-block text-dark fw-heavy",children:"Search Lead"}),(0,U.jsxs)(B.A,{className:"p-0 position-relative w-200",color:"light",children:[(0,U.jsx)(u.A,{value:d,onChange:e=>{const t=e.target.value;o(t)},size:"sm",className:"w-100"}),(0,U.jsx)(y.A,{isTrue:s,children:(0,U.jsx)("span",{className:"link-success dropdown-input-icon",style:{right:"50px"},children:(0,U.jsx)(g.A,{size:"sm",color:"success"})})})]})]})]})})});var $=s(58786),ee=s(62978);const te=(0,v.Ng)(e=>({leads:e.Lead.unGroupLeads,searchLoading:e.Lead.searchLoading,centerAccess:e.User.centerAccess}))(e=>{var t;let{lead:s,setLead:r,leads:n,centerAccess:i,date:d}=e;const o=(0,v.wA)(),[c,m]=(0,l.useState)(),x=[{name:"Patient Name",selector:e=>{var t;return null===(t=e.patient)||void 0===t?void 0:t.name}},{name:"Patient Number",selector:e=>{var t;return null===(t=e.patient)||void 0===t?void 0:t.phoneNumber}},{name:"Attended By",selector:e=>e.attendedBy},{name:"Location",selector:e=>Array.isArray(e.location)?e.location.map(e=>e.title).join(", \n"):e.location},{name:"Inquiry Details",selector:e=>e.inquiry},{name:"",selector:e=>(0,U.jsx)(b.A,{onClick:()=>{m(e),o((0,A._Pu)({payload:[]}))},size:"sm",color:"success",children:(0,U.jsx)("i",{className:"ri-check-line fs-5"})})}],h=[{name:"Patient Name",selector:e=>{var t;return null===(t=e.patient)||void 0===t?void 0:t.name}},{name:"Patient Number",selector:e=>{var t;return null===(t=e.patient)||void 0===t?void 0:t.phoneNumber}},{name:"Attended By",selector:e=>e.attendedBy},{name:"Location",selector:e=>Array.isArray(e.location)?e.location.map(e=>e.title).join(", \n"):e.location},{name:"Inquiry Details",selector:e=>e.inquiry}];return(0,U.jsx)(l.Fragment,{children:(0,U.jsxs)(D.A,{size:"lg",title:"Merge Lead",isOpen:Boolean(s),toggle:()=>{r(null),m(null)},children:[(0,U.jsx)(Z,{setMergeWith:m}),(0,U.jsx)("div",{className:"overflow-auto",children:(0,U.jsx)($.Ay,{style:{height:"500px !important",backgroundColor:"#1d1d1d"},fixedHeader:!0,columns:x,data:n||[],highlightOnHover:!0})}),(0,U.jsx)(ee.A,{}),(0,U.jsxs)(y.A,{isTrue:Boolean(c),children:[(0,U.jsxs)("h5",{className:"dispaly-5",children:["Merge ",(0,U.jsxs)("span",{className:"text-success",children:["-",null===s||void 0===s||null===(t=s.patient)||void 0===t?void 0:t.name,"-"]})," ","With"]}),(0,U.jsx)($.Ay,{fixedHeader:!0,columns:h,data:[c]||0,highlightOnHover:!0}),(0,U.jsx)("div",{className:"text-end mt-4",children:(0,U.jsx)(b.A,{onClick:()=>{o((0,A.H$w)((0,a.A)({lead:s,mergeWithLead:c,centerAccess:i},d))),r(null),m(null)},size:"sm",color:"primary",className:"text-white",children:"Merge"})})]})]})})}),se=(0,v.Ng)(e=>({centerAccess:e.User.centerAccess}))(e=>{let{lead:t,setUnMergeLead:s,centerAccess:r,date:n}=e;const i=(0,v.wA)(),d=()=>{s(null)};return(0,U.jsx)(l.Fragment,{children:(0,U.jsxs)(D.A,{size:"md",centered:!0,title:"Unmerge Lead",isOpen:Boolean(t),toggle:d,children:[(0,U.jsx)("div",{className:"mt-2 text-center",children:(0,U.jsxs)("div",{className:"mt-4 pt-2 fs-15 mx-4 mx-sm-5",children:[(0,U.jsx)("h4",{children:"Are you sure ?"}),(0,U.jsx)("p",{className:"text-muted mx-4 mb-0",children:"Are you sure you want to Un merge this record ?"})]})}),(0,U.jsxs)("div",{className:"d-flex gap-2 justify-content-center mt-4 mb-2",children:[(0,U.jsx)("button",{type:"button",className:"btn w-sm btn-light","data-bs-dismiss":"modal",onClick:d,children:"Close"}),(0,U.jsx)("button",{type:"button",className:"btn w-sm btn-danger text-white",id:"delete-record",onClick:()=>{i((0,A.cD5)((0,a.A)({lead:t,centerAccess:r},n))),d()},children:"Yes, Unmerge It!"})]})]})})});var ae=s(29899);const le=(0,v.Ng)(e=>({leads:e.Lead.data,searchLoading:e.Lead.searchLoading,centerAccess:e.User.centerAccess,user:e.User.user}))(e=>{let{searchLoading:t,leads:s,centerAccess:w,user:k}=e;const C=(0,v.wA)(),[L,P]=(0,l.useState)({start:(0,J.A)(new Date),end:(0,K.A)(new Date)}),[D,S]=(0,l.useState)(),[E,M]=(0,l.useState)(),[T,q]=(0,l.useState)(""),[F,B]=(0,l.useState)({id:null,isOpen:!1}),[R,H]=(0,l.useState)("1");(0,l.useEffect)(()=>{C((0,A.nMw)((0,a.A)({leadQuery:T,grouped:!0,centerAccess:JSON.stringify(w)},L)))},[C,T,w,L]),(0,l.useEffect)(()=>{C((0,A.Qf8)())},[C]),(0,l.useEffect)(()=>{console.log(k,"user"),C((0,A.jwZ)(null===k||void 0===k?void 0:k.centerAccess))},[C,null===k||void 0===k?void 0:k.centerAccess]);const W=()=>{B({id:null,isOpen:!1})};return(0,U.jsx)(l.Fragment,{children:(0,U.jsx)("div",{className:"page-content",children:(0,U.jsxs)(r.A,{fluid:!0,children:[(0,U.jsx)(j.A,{title:"Leads",pageTitle:"Leads"}),(0,U.jsx)(n.A,{className:"mb-0",children:(0,U.jsx)(i.A,{className:"bg-white p-0",children:(0,U.jsxs)(d.A,{tabs:!0,className:"nav-tabs-custom",children:[(0,U.jsx)(o.A,{children:(0,U.jsxs)(c.A,{className:"1"===R?"active":"",onClick:()=>H("1"),style:{cursor:"pointer"},children:[(0,U.jsx)("i",{className:"ri-user-line me-1 align-bottom"}),"General Leads"]})}),(0,U.jsx)(o.A,{children:(0,U.jsxs)(c.A,{className:"2"===R?"active":"",onClick:()=>H("2"),style:{cursor:"pointer"},children:[(0,U.jsx)("i",{className:"ri-hubspot-line me-1 align-bottom"}),"HubSpot Contacts"]})})]})})}),(0,U.jsxs)(m.A,{activeTab:R,children:[(0,U.jsxs)(x.A,{tabId:"1",children:[(0,U.jsx)(n.A,{className:"mb-0",children:(0,U.jsx)(i.A,{className:"bg-white",children:(0,U.jsxs)(h.A,{className:"g-2",children:[(0,U.jsx)(p.A,{sm:4,children:(0,U.jsxs)("div",{className:"search-box",children:[(0,U.jsx)(u.A,{type:"text",value:T,onChange:e=>q(e.target.value),className:"form-control",placeholder:"Search for title, address"}),(0,U.jsx)("i",{className:"ri-search-line search-icon"}),(0,U.jsx)(y.A,{isTrue:t,children:(0,U.jsx)(g.A,{className:"position-absolute",style:{right:10,top:10},color:"success",size:"sm"})})]})}),(0,U.jsxs)(p.A,{className:"col-sm-auto ms-auto d-flex gap-3",children:[(0,U.jsx)(f.A,{reportDate:L,setReportDate:P}),(0,U.jsx)("div",{className:"list-grid-nav hstack gap-1",children:(0,U.jsxs)(b.A,{color:"success",onClick:()=>C((0,A.lHf)({isOpen:!0,data:null})),children:[(0,U.jsx)("i",{className:"ri-add-fill me-1 align-bottom"})," Add New Lead"]})}),(0,U.jsx)("div",{className:"list-grid-nav hstack gap-1",children:(0,U.jsx)(Q.CSVLink,{data:(()=>{let e=[];return(s||[]).forEach(t=>{var s;null===(s=t.leads)||void 0===s||s.forEach(t=>{var s,l;e.push((0,a.A)((0,a.A)({},t),{},{date:(0,_.A)(new Date(t.date),"dd MMM yyyy hh:mm a"),followUp:(null===(s=t.followUp)||void 0===s?void 0:s.length)>0?t.followUp.map(e=>e.value).join(", \n"):"",location:(null===(l=t.location)||void 0===l?void 0:l.length)>0?t.location.map(e=>e.title).join(", \n"):""}))})}),e})()||[],title:"CSV Download",filename:"leads.csv",headers:[{label:"Date",key:"date"},{label:"Patient Name",key:"patient.name"},{label:"Patient Phone Number",key:"patient.phoneNumber"},{label:"Patient Age",key:"patient.age"},{label:"Attended By",key:"attendedBy"},{label:"Location",key:"location"},{label:"Referred By",key:"refferedBy"},{label:"Inquiry Details",key:"inquiry"},{label:"Comment",key:"comment"},{label:"Inquiry Type",key:"inquiryType"},{label:"Given Updates",key:"givenUpdates"},{label:"Follow up",key:"followUp"},{label:"Registered",key:"isRegister"}],className:"btn btn-info px-2 ms-3",children:(0,U.jsx)("i",{className:"ri-file-paper-2-line text-light text-decoration-none"})})})]})]})})}),(0,U.jsx)(V,{leads:s,leadQuery:T,setDeleteLead:B,setMergeLead:S,setUnMergeLead:M})]}),(0,U.jsx)(x.A,{tabId:"2",children:(0,U.jsx)(ae.A,{leadDate:L})})]}),(0,U.jsx)(N.A,{}),(0,U.jsx)(O,{date:L}),(0,U.jsx)(te,{date:L,lead:D,setLead:S}),(0,U.jsx)(se,{date:L,lead:E,setUnMergeLead:M}),(0,U.jsx)(Y.A,{show:null===F||void 0===F?void 0:F.isOpen,onCloseClick:W,onDeleteClick:()=>{C((0,A.VXj)(null===F||void 0===F?void 0:F.id)),W()}})]})})})})},52414:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(89379),l=s(65043),r=s(12327),n=s(22345),i=s(81349),d=s(85873),o=s(62739),c=s(49935),m=(s(7245),s(27965)),x=s(46087),h=s(5780),p=s(70579);const u=e=>{let{reportDate:t,setReportDate:s}=e;const u=e=>{const t=new Date;e&&t.setDate(t.getDate()-e),s({start:(0,h.A)(t),end:(0,x.A)(t)})};return(0,p.jsx)(l.Fragment,{children:(0,p.jsx)("div",{children:(0,p.jsx)("div",{children:(0,p.jsx)(r.A,{className:"justify-content-end",children:(0,p.jsx)(n.A,{xs:12,children:(0,p.jsx)("div",{className:"d-flex justify-content-md-end mt-4 mt-md-0",children:(0,p.jsxs)("div",{className:"border border-dark d-flex align-items-center",children:[(0,p.jsx)("div",{children:(0,p.jsx)(m.A,{name:"dateOfAdmission",value:t.start||"",onChange:e=>{let[l]=e;s((0,a.A)((0,a.A)({},t),{},{start:l}))},options:{dateFormat:"d M, Y",maxDate:new Date(t.end),disableMobile:!0},className:"form-control shadow-none bg-light border-0",id:"dateOfAdmission"})}),(0,p.jsx)("div",{className:"bg-light h-100 d-flex align-items-center",children:"-"}),(0,p.jsx)("div",{children:(0,p.jsx)(m.A,{name:"dateOfAdmission",value:t.end||"",onChange:e=>{let[l]=e;s((0,a.A)((0,a.A)({},t),{},{end:l}))},options:{dateFormat:"d M, Y",minDate:new Date(t.start),disableMobile:!0},className:"form-control shadow-none bg-light border-0 text-end",id:"dateOfAdmission"})}),(0,p.jsx)("div",{className:"border-start border-dark",children:(0,p.jsxs)(c.A,{children:[(0,p.jsx)(o.A,{caret:!0,color:"light",className:"pe-3"}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(i.A,{children:(0,p.jsx)("div",{onClick:()=>u(),children:"Today"})}),(0,p.jsx)(i.A,{children:(0,p.jsx)("div",{onClick:()=>u(7),children:"Last 7 days"})}),(0,p.jsx)(i.A,{children:(0,p.jsx)("div",{onClick:()=>u(30),children:"Last 30 days"})}),(0,p.jsx)(i.A,{children:(0,p.jsx)("div",{onClick:()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth(),l=new Date(t,a,1);s({start:(0,h.A)(l),end:(0,x.A)(new Date)})},children:"This month"})})]})]})})]})})})})})})})}}}]);
//# sourceMappingURL=1348.70bb8a6b.chunk.js.map